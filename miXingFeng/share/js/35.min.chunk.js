(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{203:function(e,t,a){"use strict";var o=a(0),i=a.n(o);t.a=(()=>i.a.createElement("div",{className:"top-status-bar"}))},204:function(e,t,a){"use strict";var o=a(0),i=a.n(o),n=a(203);t.a=(({centerText:e="",backToPreviousPage:t=(()=>{}),rightText:a="",rightTextFunc:s=(()=>{})})=>i.a.createElement(o.Fragment,null,i.a.createElement(n.a,null),i.a.createElement("div",{className:"navbar-container"},i.a.createElement("div",{className:"back-btn",onClick:t},i.a.createElement("i",{className:"fa fa-angle-left","aria-hidden":"true"})),i.a.createElement("div",{className:"center-text"},e),i.a.createElement("div",{className:"other-text",onClick:s},a))))},273:function(e,t,a){e.exports=a(27)(29)},280:function(e,t,a){e.exports=a(27)(13)},495:function(e,t,a){"use strict";a.r(t);a(271);var o=a(272),i=a.n(o),n=(a(224),a(226)),s=a.n(n),r=a(0),l=a.n(r),c=a(71),h=a(314),m=a(204),p=a(2),u=a(110),d=a(8),g=a(10),w=a(11),f=a(4),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e};const P=Object(h.a)()(class extends r.Component{constructor(...e){var t;return t=super(...e),this.backToMainPage=(()=>{goRoute(this,"/system_setup")}),this.onChangeNotification=(e=>{logger.info("onChangeNotification",e),$dispatch(Object(p.A)(e)),e?Object(u.a)():Object(u.b)(),this.props.form.setFieldsValue({Switch1:e})}),this.onChangeAlwaysShowAdsPage=(e=>{logger.info("onChangeAlwaysShowAdsPage",e),$dispatch(Object(p.g)(e)),this.props.form.setFieldsValue({Switch3:e})}),this.onAllowGetPosition=(e=>{try{logger.info("onAllowGetPosition",e);const t=this;e?window.permissions?window.permissions.checkPermission(window.permissions.ACCESS_FINE_LOCATION,function(e){if(logger.info("onAllowGetPosition ACCESS_FINE_LOCATION",e),!e.hasPermission)return Object(d.Q)().then(e=>{!1===e?t.props.form.setFieldsValue({Switch4:!1}):(t.props.form.setFieldsValue({Switch4:!0}),$dispatch(Object(p.d)(!0)))});$dispatch(Object(p.d)(!0)),t.props.form.setFieldsValue({Switch4:!0})}):($dispatch(Object(p.d)(!0)),t.props.form.setFieldsValue({Switch4:!0})):($dispatch(Object(p.d)(!1)),this.props.form.setFieldsValue({Switch4:!1}))}catch(e){logger.error("onAllowGetPosition err",e)}}),this.onAllowOthersGetPosition=(e=>{logger.info("onAllowOthersGetPosition",e),$dispatch(Object(p.e)(e)),this.props.form.setFieldsValue({Switch5:e})}),this.onAllowShareMySignature=(e=>{const{username:t,token:a}=this.props;if(!a)return alert("请先登录"),void setTimeout(()=>{this.props.form.setFieldsValue({Switch6:!e}),$dispatch(Object(p.f)(!e))},17);logger.info("onAllowShareMySignature",e);const o=Object.assign({username:t,token:a,userInfo:{shareNickname:e}});axios.post(g.a.updateUserInfo,o).then(t=>{"modify_success"===t.data.result.response?($dispatch(Object(w.j)(t.data.result.token)),$dispatch(Object(p.f)(e))):(alertDebug("onAllowShareMySignature 设置失败"),logger.error("onAllowShareMySignature 设置失败",t.data.result),this.props.form.setFieldsValue({Switch6:!e}),$dispatch(Object(p.f)(!e)))}).catch(t=>(this.props.form.setFieldsValue({Switch6:!e}),$dispatch(Object(p.f)(!e)),Object(f.q)(t,"onAllowShareMySignature"))),this.props.form.setFieldsValue({Switch6:e})}),this.clearFingerPrint=(()=>{localStorage.removeItem("fingerprintAuth"),localStorage.removeItem("fingerprintAuthUsername"),localStorage.removeItem("fingerprintAuthToken"),alert("清除成功")}),t}render(){const{receiveNotification:e,alwaysShowAdsPage:t,token:a,allowGetPosition:o,allowOthersGetPosition:n,allowShareMyNickname:r}=this.props,{getFieldProps:c}=this.props.form;return l.a.createElement("div",{className:"notification-run-container"},l.a.createElement(m.a,{centerText:"通知和权限",backToPreviousPage:this.backToMainPage}),l.a.createElement(s.a,{renderHeader:()=>""},!isH5&&a?l.a.createElement(s.a.Item,{style:{height:"60px"},extra:l.a.createElement(i.a,S({},c("Switch1",{initialValue:e,valuePropName:"checked",platform:"ios"}),{onClick:this.onChangeNotification}))},"接收所有通知"):null,l.a.createElement(s.a.Item,{style:{height:"60px"},extra:l.a.createElement(i.a,S({},c("Switch3",{initialValue:t,valuePropName:"checked",platform:"ios"}),{onClick:this.onChangeAlwaysShowAdsPage}))},"启动app显示广告"),l.a.createElement(s.a.Item,{style:{height:"60px"},extra:l.a.createElement(i.a,S({},c("Switch4",{initialValue:o,valuePropName:"checked",platform:"ios"}),{onClick:this.onAllowGetPosition}))},"允许程序获取地理位置"),l.a.createElement(s.a.Item,{style:{height:"60px"},extra:l.a.createElement(i.a,S({},c("Switch5",{initialValue:n,valuePropName:"checked",platform:"ios"}),{onClick:this.onAllowOthersGetPosition}))},"允许别人获取我的位置"),l.a.createElement(s.a.Item,{style:{height:"60px"},extra:l.a.createElement(i.a,S({},c("Switch6",{initialValue:r,valuePropName:"checked",platform:"ios"}),{onClick:this.onAllowShareMySignature}))},"共享我的昵称"),isCordova&&l.a.createElement(s.a.Item,{onClick:this.clearFingerPrint,style:{height:"60px"}},"清除指纹识别记录")))}});t.default=Object(c.connect)(e=>({receiveNotification:e.common.receiveNotification,alwaysShowAdsPage:e.common.alwaysShowAdsPage,username:e.login.username,token:e.login.token,allowGetPosition:e.common.allowGetPosition,allowOthersGetPosition:e.common.allowOthersGetPosition,allowShareMyNickname:e.common.allowShareMyNickname}),()=>({}))(P)}}]);