(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{203:function(e,t,a){"use strict";var r=a(0),o=a.n(r);t.a=(()=>o.a.createElement("div",{className:"top-status-bar"}))},204:function(e,t,a){"use strict";var r=a(0),o=a.n(r),n=a(203);t.a=(({centerText:e="",backToPreviousPage:t=(()=>{}),rightText:a="",rightTextFunc:i=(()=>{})})=>o.a.createElement(r.Fragment,null,o.a.createElement(n.a,null),o.a.createElement("div",{className:"navbar-container"},o.a.createElement("div",{className:"back-btn",onClick:t},o.a.createElement("i",{className:"fa fa-angle-left","aria-hidden":"true"})),o.a.createElement("div",{className:"center-text"},e),o.a.createElement("div",{className:"other-text",onClick:i},a))))},214:function(e,t,a){"use strict";a(70),a(184)},215:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(a(12)),o=p(a(21)),n=p(a(14)),i=p(a(15)),l=p(a(13)),s=p(a(16)),c=p(a(24)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0));function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(a[r[o]]=e[r[o]])}return a},f=function(e){function t(){return(0,n.default)(this,t),(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e,t,a=this.props,n=a.className,i=a.prefixCls,l=a.children,s=a.text,p=a.size,f=a.overflowCount,m=a.dot,g=a.corner,h=a.hot,v=d(a,["className","prefixCls","children","text","size","overflowCount","dot","corner","hot"]);f=f,s="number"==typeof s&&s>f?f+"+":s,m&&(s="");var y=(0,c.default)((e={},(0,o.default)(e,i+"-dot",m),(0,o.default)(e,i+"-dot-large",m&&"large"===p),(0,o.default)(e,i+"-text",!m&&!g),(0,o.default)(e,i+"-corner",g),(0,o.default)(e,i+"-corner-large",g&&"large"===p),e)),b=(0,c.default)(i,n,(t={},(0,o.default)(t,i+"-not-a-wrapper",!l),(0,o.default)(t,i+"-corner-wrapper",g),(0,o.default)(t,i+"-hot",!!h),(0,o.default)(t,i+"-corner-wrapper-large",g&&"large"===p),t));return u.createElement("span",{className:b},l,(s||m)&&u.createElement("sup",(0,r.default)({className:y},v),s))}}]),t}(u.Component);t.default=f,f.defaultProps={prefixCls:"am-badge",size:"small",overflowCount:99,dot:!1,corner:!1},e.exports=t.default},224:function(e,t,a){"use strict";a(70),a(186)},226:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(a(12)),o=p(a(14)),n=p(a(15)),i=p(a(13)),l=p(a(16)),s=p(a(24)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0)),u=p(a(227));function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(a[r[o]]=e[r[o]])}return a},f=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,a=e.children,o=e.className,n=e.style,i=e.renderHeader,l=e.renderFooter,u=d(e,["prefixCls","children","className","style","renderHeader","renderFooter"]),p=(0,s.default)(t,o);return c.createElement("div",(0,r.default)({className:p,style:n},u),i?c.createElement("div",{className:t+"-header"},"function"==typeof i?i():i):null,a?c.createElement("div",{className:t+"-body"},a):null,l?c.createElement("div",{className:t+"-footer"},"function"==typeof l?l():l):null)}}]),t}(c.Component);t.default=f,f.Item=u.default,f.defaultProps={prefixCls:"am-list"},e.exports=t.default},227:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Brief=void 0;var r=d(a(12)),o=d(a(21)),n=d(a(14)),i=d(a(15)),l=d(a(13)),s=d(a(16)),c=d(a(24)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0)),p=d(a(102));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(a[r[o]]=e[r[o]])}return a},m=t.Brief=function(e){function t(){return(0,n.default)(this,t),(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){return u.createElement("div",{className:"am-list-brief",style:this.props.style},this.props.children)}}]),t}(u.Component),g=function(e){function t(e){(0,n.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onClick=function(e){var t=a.props,r=t.onClick,o=t.platform;if(r&&"android"===o){a.debounceTimeout&&(clearTimeout(a.debounceTimeout),a.debounceTimeout=null);var n=e.currentTarget,i=Math.max(n.offsetHeight,n.offsetWidth),l=e.currentTarget.getBoundingClientRect(),s={width:i+"px",height:i+"px",left:e.clientX-l.left-n.offsetWidth/2+"px",top:e.clientY-l.top-n.offsetWidth/2+"px"};a.setState({coverRippleStyle:s,RippleClicked:!0},function(){a.debounceTimeout=setTimeout(function(){a.setState({coverRippleStyle:{display:"none"},RippleClicked:!1})},1e3)})}r&&r(e)},a.state={coverRippleStyle:{display:"none"},RippleClicked:!1},a}return(0,s.default)(t,e),(0,i.default)(t,[{key:"componentWillUnmount",value:function(){this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null)}},{key:"render",value:function(){var e,t,a,n=this,i=this.props,l=i.prefixCls,s=i.className,d=i.activeStyle,m=i.error,g=i.align,h=i.wrap,v=i.disabled,y=i.children,b=i.multipleLine,w=i.thumb,O=i.extra,N=i.arrow,x=i.onClick,P=f(i,["prefixCls","className","activeStyle","error","align","wrap","disabled","children","multipleLine","thumb","extra","arrow","onClick"]),k=(P.platform,f(P,["platform"])),_=this.state,E=_.coverRippleStyle,C=_.RippleClicked,j=(0,c.default)(l+"-item",s,(e={},(0,o.default)(e,l+"-item-disabled",v),(0,o.default)(e,l+"-item-error",m),(0,o.default)(e,l+"-item-top","top"===g),(0,o.default)(e,l+"-item-middle","middle"===g),(0,o.default)(e,l+"-item-bottom","bottom"===g),e)),S=(0,c.default)(l+"-ripple",(0,o.default)({},l+"-ripple-animate",C)),T=(0,c.default)(l+"-line",(t={},(0,o.default)(t,l+"-line-multiple",b),(0,o.default)(t,l+"-line-wrap",h),t)),R=(0,c.default)(l+"-arrow",(a={},(0,o.default)(a,l+"-arrow-horizontal","horizontal"===N),(0,o.default)(a,l+"-arrow-vertical","down"===N||"up"===N),(0,o.default)(a,l+"-arrow-vertical-up","up"===N),a)),F=u.createElement("div",(0,r.default)({},k,{onClick:function(e){n.onClick(e)},className:j}),w?u.createElement("div",{className:l+"-thumb"},"string"==typeof w?u.createElement("img",{src:w}):w):null,u.createElement("div",{className:T},void 0!==y&&u.createElement("div",{className:l+"-content"},y),void 0!==O&&u.createElement("div",{className:l+"-extra"},O),N&&u.createElement("div",{className:R,"aria-hidden":"true"})),u.createElement("div",{style:E,className:S})),M={};return Object.keys(k).forEach(function(e){/onTouch/i.test(e)&&(M[e]=k[e],delete k[e])}),u.createElement(p.default,(0,r.default)({},M,{disabled:v||!x,activeStyle:d,activeClassName:l+"-item-active"}),F)}}]),t}(u.Component);g.defaultProps={prefixCls:"am-list",align:"middle",error:!1,multipleLine:!1,wrap:!1,platform:"ios"},g.Brief=m,t.default=g},248:function(e,t,a){"use strict";a.d(t,"a",function(){return p});a(214);var r=a(215),o=a.n(r),n=(a(224),a(226)),i=a.n(n),l=a(0),s=a.n(l),c=a(204),u=a(4);class p extends s.a.Component{constructor(...e){var t;return t=super(...e),this.backToMainPage=(()=>{const{backToPage:e,self:t}=this.props;switch(logger.info("MyInfoMiddlePageComponent backToPage",e),e){case"about":goRoute(t,"/about");break;case"system_setup":goRoute(t,"/system_setup");break;default:goRoute(t,"/main/myInfo")}}),this.goNextRoute=((e,t,a)=>{const{self:r,callback1:o}=this.props;if("/browser_link"===e)Object(u.s)(a);else if(e&&"/package_iframe"!==e)goRoute(r,e);else if(e)r.props.history.push({pathname:"/package_iframe",query:{name:t,src:a}});else if(!e)return o()}),t}render(){const{pageName:e,itemColumns:t,setSystemSetupDot:a,upgradeProgressPercent:r}=this.props;let n="";return r&&(n=` ${r}`),s.a.createElement("div",{className:"middle-page-container"},s.a.createElement(c.a,{centerText:e,backToPreviousPage:this.backToMainPage}),s.a.createElement("div",{className:"middle-page-content"},s.a.createElement(i.a,null,t.map(e=>s.a.createElement(l.Fragment,{key:e.displayName},"检查更新"===e.displayName?s.a.createElement(i.a.Item,{style:{height:"60px"},onClick:()=>this.goNextRoute(null,e.name)},s.a.createElement("span",{style:{marginLeft:12}},e.displayName+n),"  ",s.a.createElement(o.a,{text:a&&"new"})):s.a.createElement(i.a.Item,{style:{height:"60px"},arrow:"horizontal",onClick:()=>this.goNextRoute(e.routeName,e.name,e.src)},s.a.createElement("span",{style:{marginLeft:12}},e.displayName)))))))}}},474:function(e,t,a){"use strict";a.r(t);var r=a(0),o=a.n(r),n=a(71),i=a(248),l=a(4),s=a(68),c=a(7),u=a(6),p=a(10),d=a(2),f=a(8);const m=[{displayName:"用户协议",routeName:"/user_agreement"},{displayName:"服务条款",routeName:"/service_list"},{displayName:"隐私条款",routeName:"/privacy"},{displayName:"开源声明",routeName:"/licence"},{displayName:"我的站点",routeName:"/my_sites"}];isH5||m.push({displayName:"检查更新"});t.default=Object(n.connect)(e=>({appVersion:e.common.appVersion,setSystemSetupDot:e.myInfo.setSystemSetupDot,appUpdating:e.common.appUpdating,appSize:e.common.appSize,upgradeProgressPercent:e.common.upgradeProgressPercent}),()=>({}))(class extends o.a.Component{constructor(...e){var t;return t=super(...e),this.checkUpdateFunc=(()=>{const e=this;logger.info("检查版本更新");const{appUpdating:t,appVersion:a}=this.props;return t?alert("请勿重复下载"):($dispatch(Object(c.o)(!1)),Object(l.A)("正在检查更新"),axios.get(p.a.checkUpdate).then(t=>{if(window.toast.hide(),window.cancelAxiosRequest)return;const r=t.data;if(!r)return void Toast.success("已是最新版本",u.a.toastTime);if(r.disableUpdate)return Toast.success("已是最新版本",u.a.toastTime);const n=r.version,i=r.appSize,c=r.MD5,m=r.content;logger.info(`remote appVersion, ${n}`),logger.info(`local appVersion, ${a}`),n>a?(logger.info("发现新版本"),window.toast.hide(),$dispatch(Object(d.h)(i)),Object(l.j)("发现新版本",o.a.createElement(s.a,{list:m,remoteAppVersion:n,appSize:i}),"立即下载",function(){isElectron?electron.shell.openExternal(u.a.exeDownloadUrl):Object(f.e)(p.a.appRelease,u.a.appName,c,e.downloadAppFunc,e.preview)})):(logger.info("已是最新版本"),Toast.success("已是最新版本",u.a.toastTime))}).catch(e=>{window.toast.hide(),Object(l.q)(e,"checkUpdate")}).finally(()=>{window.cancelAxiosRequest=!1}))}),this.downloadAppFunc=((e,t,a)=>{const r=this,{appSize:o}=this.props;return new Promise((e,t)=>{cordova.plugins.notification.local.hasPermission(function(a){logger.info("downloadAppFunc hasPermission granted",a),a?e():cordova.plugins.notification.local.requestPermission(function(a){logger.info("downloadAppFunc requestPermission granted",a),a?e():t(a)})})}).then(()=>(cordova.plugins.notification.local.setDefaults({id:Math.random(),foreground:!0,sound:!1,wakeup:!0,progressBar:!1,sticky:!0,clock:!0,silent:!1}),new Promise(function(n){window.resolveLocalFileSystemURL(cordova.file.externalApplicationStorageDirectory,function(i){i.getFile(t,{create:!0,exclusive:!1},function(t){$dispatch(Object(d.i)(!0)),cordova.plugins.notification.local.schedule({title:"正在更新",text:`安装包大小:${o}，请稍后`});const i=new window.FileTransfer;let l=0;i.onprogress=function(e){if(e.lengthComputable){const t=e.loaded/e.total;l=(100*t).toFixed(0),$dispatch(Object(d.G)(l+"%")),cordova.plugins.notification.local.update({text:`正在下载: ${l}%`,progressBar:{value:l},sound:!1,silent:!0})}},i.download(encodeURI(e),t.nativeURL,function(e){(l>1||1===l)&&setTimeout(()=>{Object(f.d)(t,a,e,n,!0,r.preview),$dispatch(Object(d.G)(0))})},function(e){cordova.plugins.notification.local.clearAll(),$dispatch(Object(d.r)(!0)),$dispatch(Object(d.i)(!1)),logger.error("下载失败",e),alertDialog("下载失败")})},function(e){$dispatch(Object(d.i)(!1)),logger.error("升级文件下载错误",e)})},function(e){logger.error("文件系统加载失败！",e),alertDialog("文件系统加载失败！")})}))).catch(e=>{logger.error("SystemSetup downloadAppFunc err",e),alertDialog("catch err")})}),this.preview=((e,t="application/vnd.android.package-archive")=>{Object(f.I)(e,t)}),t}render(){const{appVersion:e="",setSystemSetupDot:t,upgradeProgressPercent:a}=this.props;return o.a.createElement("div",{className:"sites-container"},o.a.createElement(i.a,{pageName:"关于",itemColumns:m,self:this,backToPage:"system_setup",callback1:this.checkUpdateFunc,setSystemSetupDot:t,upgradeProgressPercent:a}),e?o.a.createElement("div",{className:"show-version"},"版本号：",e," ",window.config.dev?"debug":""):null)}})}}]);