{"version":3,"file":"js/8.chunk.js?b081a96a","sources":["webpack:///src/components/child/statusBar.js","webpack:///src/components/child/navbar.js","webpack:///src/components/child/heartSvg.js","webpack:///src/components/child/amazingBaby.js","webpack:///src/components/musicPlaying.js"],"sourcesContent":["import React from 'react';\n\nconst StatusBar = () => {\n\treturn (\n\t\t<div className=\"top-status-bar\"></div>\n\t);\n}\n\nexport default StatusBar;\n","import React, { Fragment } from 'react';\nimport StatusBar from \"./statusBar\";\n\nconst NavBar = ({ centerText=\"\", backToPreviousPage=()=>{}, rightText=\"\", rightTextFunc=()=>{}}) => {\n\treturn (\n\t\t<Fragment>\n\t\t\t<StatusBar />\n\t\t\t<div className=\"navbar-container\">\n\t\t\t<div className=\"back-btn\" onClick={backToPreviousPage}>\n\t\t\t\t<i className=\"fa fa-angle-left\" aria-hidden=\"true\"></i>\n\t\t\t</div>\n\t\t\t\t<div className=\"center-text\">{centerText}</div>\n\t\t\t\t<div className=\"other-text\" onClick={rightTextFunc}>{rightText}</div>\n\t\t\t</div>\n\t\t</Fragment>\n\t);\n}\n\nexport default NavBar;\n","import React from \"react\"\n\nconst HeartSvg = () => {\n\treturn (\n\t\t<svg className=\"like-btn\" width=\"56px\" height=\"56px\" viewBox=\"0 0 56 56\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t    <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n\t\t        <g>\n\t\t            <rect fillRule=\"nonzero\" x=\"0\" y=\"0\" width=\"56\" height=\"56\" rx=\"28\"/>\n\t\t            <g transform=\"translate(27.000000, 5.000000)\" fillRule=\"nonzero\" stroke=\"#FD5F66\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\">\n\t\t                <path d=\"M1,0 L1,5\" id=\"path-3\"/>\n\t\t                <path d=\"M1.5,41 L1.5,46\" id=\"path-2\"/>\n\t\t            </g>\n\t\t            <g transform=\"translate(28.000000, 28.000000) rotate(60.000000) translate(-28.000000, -28.000000) translate(27.000000, 5.000000)\" fillRule=\"nonzero\" stroke=\"#FD5F66\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\">\n\t\t                <path d=\"M1,-2.27373675e-13 L1,5\" id=\"path-3\"/>\n\t\t                <path d=\"M1.5,41 L1.5,46\" id=\"path-2\"/>\n\t\t            </g>\n\t\t            <path id=\"fill-3\" fill=\"#7D878F\" fillRule=\"nonzero\" d=\"M28.153959,20.8677974 L28.3060347,20.7157217 C30.5936636,18.4280928 34.3036142,18.4280928 36.5912431,20.7157217 L35.8841363,21.4228284 L36.5912431,20.7157217 C38.878872,23.0033505 38.878872,26.7133011 36.5912431,29.00093 L28.153959,37.4382141 L20.5758574,29.8601125 L19.7169046,29.0011596 C17.4277368,26.7134783 17.4277368,23.0031734 19.7166749,20.7157217 C22.0043038,18.4280928 25.7142544,18.4280928 28.0018832,20.7157217 L28.153959,20.8677974 Z M35.8841363,21.4228284 L35.1770295,22.1299352 C33.6704492,20.6233549 31.2268286,20.6233549 29.7202483,22.1299352 L28.153959,23.6962245 L26.5876697,22.1299352 C25.0810894,20.6233549 22.6374687,20.6233549 21.1306588,22.1301648 C19.623152,23.6366927 19.623152,26.079959 21.1308885,27.5867165 L28.153959,34.609787 L35.1770295,27.5867165 C36.6836098,26.0801362 36.6836098,23.6365155 35.1770295,22.1299352 L35.8841363,21.4228284 Z\" />\n\t\t            <path id=\"heart-color\" d=\"M28.153959,20.8677974 L28.3060347,20.7157217 C30.5936636,18.4280928 34.3036142,18.4280928 36.5912431,20.7157217 L35.8841363,21.4228284 L36.5912431,20.7157217 C38.878872,23.0033505 38.878872,26.7133011 36.5912431,29.00093 L28.153959,37.4382141 L20.5758574,29.8601125 L19.7169046,29.0011596 C17.4277368,26.7134783 17.4277368,23.0031734 19.7166749,20.7157217 C22.0043038,18.4280928 25.7142544,18.4280928 28.0018832,20.7157217 L28.153959,20.8677974 Z\" />\n\t\t            <g transform=\"translate(28.000000, 28.000000) rotate(120.000000) translate(-28.000000, -28.000000) translate(27.000000, 5.000000)\" fillRule=\"nonzero\" stroke=\"#FD5F66\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\">\n\t\t                <path d=\"M1,4.54747351e-13 L1,5\" id=\"path-3\"/>\n\t\t                <path d=\"M1.5,41 L1.5,46\" id=\"path-2\"/>\n\t\t            </g>\n\t\t        </g>\n\t\t    </g>\n\t\t</svg>\n\n\t)\n}\n\nexport default HeartSvg\n","import React from 'react';\n\nconst AmazingBaby = () => {\n\treturn (\n\t\t<div className=\"eevee\">\n\t\t\t<div className=\"body\">\n\t\t\t\t<div className=\"head\">\n\t\t\t\t\t<div className=\"ears\">\n\t\t\t\t\t\t<div className=\"ear\">\n\t\t\t\t\t\t\t<div className=\"lobe\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"ear\">\n\t\t\t\t\t\t\t<div className=\"lobe\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"face\">\n\t\t\t\t\t\t<div className=\"eyes\">\n\t\t\t\t\t\t\t<div className=\"eye\">\n\t\t\t\t\t\t\t\t<div className=\"eyelid\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"eye\">\n\t\t\t\t\t\t\t\t<div className=\"eyelid\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"nose\"></div>\n\t\t\t\t\t\t<div className=\"mouth\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"chest\">\n\t\t\t\t\t<div className=\"fur\">\n\t\t\t\t\t\t<div className=\"patch\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"fur\">\n\t\t\t\t\t\t<div className=\"patch\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"fur\">\n\t\t\t\t\t\t<div className=\"patch\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"legs\">\n\t\t\t\t\t<div className=\"leg\">\n\t\t\t\t\t\t<div className=\"inner-leg\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"leg\">\n\t\t\t\t\t\t<div className=\"inner-leg\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"leg\">\n\t\t\t\t\t\t<div className=\"inner-leg\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"leg\">\n\t\t\t\t\t\t<div className=\"inner-leg\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"tail\">\n\t\t\t\t\t<div className=\"tail\">\n\t\t\t\t\t\t<div className=\"tail\">\n\t\t\t\t\t\t\t<div className=\"tail\">\n\t\t\t\t\t\t\t\t<div className=\"tail\">\n\t\t\t\t\t\t\t\t\t<div className=\"tail -end\"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default AmazingBaby\n","import React, { useEffect, useState, useRef, Fragment } from 'react';\nimport { connect } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\"\nimport NavBar from \"./child/navbar\";\nimport HearSvg from \"./child/heartSvg\"\nimport {\n\tsaveSongFunc,\n\tremovePrefixFromFileOrigin,\n\tplayPreviousSong,\n\tplayNextSong,\n\tpauseMusic,\n\tresumeMusic,\n\tgetFilenameWithoutExt,\n\tsaveMusicToLocal,\n\tsecondsToTime,\n\ttouchDirection,\n\tremoveTouchDirection,\n\tcheckToShowPlayController,\n\tdealWithThirdPartVisit,\n\tplayMusic,\n\tremoveTagFromFilename\n} from \"../logic/common\"\nimport { updateCurrentSongTime, updateIsHeadPhoneView, updateShowMusicPlayingFromMusicControl, updateCurrentMusicItemInfo } from \"../ducks/fileServer\"\nimport { IsPC, specialBackFunc, shareLinkToWeChat, comeFromWeChat, saveFileToLocal } from \"../services/utils\"\nimport AmazingBaby from \"./child/amazingBaby\"\nimport { CONSTANT } from '../constants/enumeration';\nimport \"../themes/css/fileServer.less\"\n\nconst MusicPlaying = ({\n\tcurrentPlayingSong,\n\tcurrentPlayingMusicList=[],\n\tmusicCollection=[],\n\tcurrentPlayingSongOriginal,\n\tsoundPlaying,\n\tmusicPageType,\n\tcurrentSongTime,\n\tisHeadPhoneView,\n\tsoundInstance,\n\tsoundInstanceId,\n\tcurrentMusicItemInfo,\n\tfromMusicControl,\n\tshowMusicPlayingFromMusicControl\n}) => {\n\tconst touchDirectionObj = { debounceTimer: null, firstTimeRun: false, }\n\t,\t[ showSelectedAnimation, setShowSelectedAnimation ] = useState(false)\n\t,\t[showDownloadHeaderTip, setShowDownloadHeaderTip] = useState(false)\n\t,\t[isFromThirdPart, setIsFromThirdPart] = useState(false)\n\t,\twindowInnerWidth = window.innerWidth\n\t,\twindowInnerHeight = window.innerHeight\n\t,\thistory = useHistory()\n\t,\tplayRef = useRef()\n\t,\tpauseRef = useRef()\n\t,\tprogressRef = useRef()\n\t,\tmusicPlayingTopRef = useRef()\n\t,\tmusicPlayingContainerRef = useRef()\n\t,\tprogressPlayedRef = useRef()\n\t,\tprogressUnplayedRef = useRef()\n\t,\tprogressOutPointRef = useRef()\n\t,\tprogressInnerPointRef = useRef()\n\t,\tgetCurrentMusicItemInfo = dealWithThirdPartVisit()\n\tlet ifBool = false\n\t,\toffsetXValue=window.innerWidth/2\n\t,\toffsetYValue=0\n\t,\toffsetFirstXValue=0\n\t,\toffsetFirstYValue=0\n\t,\tmovingX=false\n\t,\tmovingY=false\n\t,\tsavedMusicFilenameOriginalArr = []\n\t,\tcurrentMusicFilenameOriginalArr = []\n\t,\tcurrentFileIndex = null\n\n\tuseEffect(() => {\n\t\tsetIsFromThirdPart(window.location.href.split(\"?\").length > 1)\n\t\tif(window.location.href.split(\"?\").length > 1){\n\t\t\t$dispatch(updateCurrentMusicItemInfo(getCurrentMusicItemInfo))\n\t\t\tconst obj = {\n\t\t\t\tfilePath: getCurrentMusicItemInfo.filePath || \"\",\n\t\t\t\tfilenameOrigin: getCurrentMusicItemInfo.filenameOrigin,\n\t\t\t\tduration: getCurrentMusicItemInfo.duration,\n\t\t\t\toriginal: getCurrentMusicItemInfo.original,\n\t\t\t\tmusicDataList: [],\n\t\t\t\tpageType: getCurrentMusicItemInfo.original,\n\t\t\t\tfilename: getCurrentMusicItemInfo.filename,\n\t\t\t\tmusicId: getCurrentMusicItemInfo.id,\n\t\t\t\tsongOriginal: getCurrentMusicItemInfo.original,\n\t\t\t\tsongInfo: getCurrentMusicItemInfo\n\t\t\t}\n\t\t\tif(!comeFromWeChat()){\n\t\t\t\tobj.checkLastMusicWhenLaunch = true\n\t\t\t}\n\t\t\ttouchDirection(musicPlayingTopRef.current, ['swipeLeft', 'swipeRight'], touchDirectionCallback, touchDirectionObj)\n\t\t\tplayMusic(obj).then(() => {\n\t\t\t\tif(comeFromWeChat()){\n\t\t\t\t\tpauseRef.current && (pauseRef.current.style.paddingLeft = \"0px\")\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\tif(fromMusicControl) musicPlayingPageXAnimation()\n\t\tdocument.addEventListener(\"deviceready\", listenBackButton, false);\n\t\tplayRef.current && (playRef.current.style.paddingLeft = \"5px\")\n\t\tpauseRef.current && (pauseRef.current.style.paddingLeft = \"0px\")\n\t\tprogressRef.current.addEventListener(\"touchstart\", startProgress, false);\n\t\tprogressRef.current.addEventListener(\"mousedown\", startProgress, false);\n\t\tprogressRef.current.addEventListener(\"touchmove\",  moveProgress, false);\n\t\tprogressRef.current.addEventListener(\"mousemove\",  moveProgress, false);\n\t\tprogressRef.current.addEventListener(\"click\", moveProgress, false);\n\t\tif(fromMusicControl){\n\t\t\twindow.addEventListener(\"touchstart\", startPage, false);\n\t\t\twindow.addEventListener(\"touchmove\",  movePage, false);\n\t\t\twindow.addEventListener(\"touchend\",  endPage, false);\n\t\t}\n\t\twindow.addEventListener(\"touchend\", endProgress);\n\t\twindow.addEventListener(\"mouseup\", endProgress);\n\t\tupdateProgressLine(currentSongTime)\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(\"deviceready\", listenBackButton, false);\n\t\t\tdocument.removeEventListener(\"backbutton\", backKeyDownToPrevious, false)\n\t\t\tprogressRef.current.removeEventListener(\"touchstart\", startProgress);\n\t\t\tprogressRef.current.removeEventListener(\"mousedown\", startProgress);\n\t\t\tprogressRef.current.removeEventListener(\"touchmove\", moveProgress);\n\t\t\tprogressRef.current.removeEventListener(\"mousemove\", moveProgress);\n\t\t\tprogressRef.current.removeEventListener(\"click\", moveProgress);\n\t\t\tif(fromMusicControl){\n\t\t\t\twindow.removeEventListener(\"touchstart\", startPage, false);\n\t\t\t\twindow.removeEventListener(\"touchmove\",  movePage, false);\n\t\t\t\twindow.removeEventListener(\"touchend\",  endPage, false);\n\t\t\t}\n\t\t\twindow.removeEventListener(\"touchend\", endProgress);\n\t\t\twindow.removeEventListener(\"mouseup\", endProgress);\n\t\t\tremoveTouchDirection(musicPlayingTopRef.current)\n\t\t}\n\t}, [])\n\n\tuseEffect(() => {\n\t\tupdateProgressLine(currentSongTime)\n\t}, [currentSongTime])\n\n\tconst touchDirectionCallback = (direction) => {\n\t\tlogger.info('touchDirectionCallback direction, isHeadPhoneView', direction, isHeadPhoneView)\n\t\tif(direction === 'left'){\n\t\t\tlogger.info(\"switch to head phone\")\n\t\t\t$dispatch(updateIsHeadPhoneView(true))\n\t\t} else if(direction === 'right'){\n\t\t\tlogger.info(\"switch to amazing baby\")\n\t\t\t$dispatch(updateIsHeadPhoneView(false))\n\t\t}\n\t}\n\n\tconst listenBackButton = () => {\n\t\tdocument.addEventListener(\"backbutton\", backKeyDownToPrevious, false)\n\t}\n\n\tconst updateProgressLine = (currentSongTime) => {\n\t\tconst percent = (currentSongTime / currentMusicItemInfo.duration)\n\t\tconst progressWidth= (window.innerWidth - 124)\n\t\tprogressPlayedRef.current.style.width = (progressWidth * percent) + \"px\"\n\t\tprogressUnplayedRef.current.style.width = (progressWidth * (1 - percent)) + \"px\"\n\t\tprogressUnplayedRef.current.style.left = (progressWidth * percent + 14) + \"px\"\n\t\tprogressOutPointRef.current.style.left = (progressWidth * percent) + \"px\"\n\t\tprogressInnerPointRef.current.style.left = (progressWidth * percent + 3) + \"px\"\n\t}\n\n\tconst startProgress = (e) => {\n\t\te.stopPropagation();\n\t\tifBool = true;\n\t\tlogger.info(\"鼠标按下\")\n\t\tsetShowSelectedAnimation(true)\n\t}\n\n\tconst moveProgress = (e) => {\n\t\te.stopPropagation();\n\t\tconst duration = currentMusicItemInfo.duration || getCurrentMusicItemInfo.duration\n\t\tconst { soundInstance, soundInstanceId } = $getState().fileServer\n\t\tif (ifBool) {\n\t\t\tconst progressRestWidth = progressRef.current.offsetWidth - 14\n\t\t\tconst x = e.clientX || e.touches[0].pageX\n\t\t\tlet minDivLeft = ((x - 55) > progressRestWidth) ? progressRestWidth : (x - 55)\n\t\t\tminDivLeft = ((x - 55) < 0) ? 0 : minDivLeft\n\t\t\tconst percent = (minDivLeft / progressRestWidth).toFixed(2)\n\t\t\tconst seekTime = duration * percent\n\t\t\tlogger.info(\"move music progress move percent, seekTime\", percent, seekTime)\n\t\t\t$dispatch(updateCurrentSongTime(seekTime))\n\t\t\tif(soundInstance && soundInstanceId) {\n\t\t\t\tsoundInstance.seek(seekTime, soundInstanceId);\n\t\t\t}\n\t\t} else {\n\t\t\tif(e.clientX && !IsPC()){\n\t\t\t\tconst percent = ((e.clientX - 55) / (progressRef.current.offsetWidth - 14)).toFixed(2)\n\t\t\t\tconst seekTime = duration * percent\n\t\t\t\tlogger.info(\"move music progress click percent, seekTime\", percent, seekTime)\n\t\t\t\t$dispatch(updateCurrentSongTime(seekTime))\n\t\t\t\tif(soundInstance && soundInstanceId) {\n\t\t\t\t\tsoundInstance.seek(seekTime, soundInstanceId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tconst endProgress = (e) => {\n\t\te.stopPropagation();\n\t\tlogger.info(\"鼠标弹起\")\n\t\tifBool = false;\n\t\tsetShowSelectedAnimation(false)\n\t}\n\n\tconst startPage = (e) => {\n\t\te.stopPropagation();\n\t\toffsetFirstXValue = e.clientX || e.touches[0].pageX\n\t\toffsetFirstYValue = e.clientY || e.touches[0].pageY\n\t\tlogger.info(\"startPage offsetFirstXValue\", offsetFirstXValue, 'offsetFirstYValue', offsetFirstYValue)\n\t}\n\n\tconst movePage = (e) => {\n\t\te.stopPropagation();\n\t\tconst x = e.clientX || e.touches[0].pageX\n\t\tconst y = e.clientY || e.touches[0].pageY\n\t\toffsetXValue = (x - offsetFirstXValue)\n\t\toffsetYValue = (y - offsetFirstYValue)\n\t\tif(offsetXValue > 0 || offsetYValue > 0){\n\t\t\tif((offsetXValue >= offsetYValue) && movingY !== true){\n\t\t\t\tmovingX = true\n\t\t\t\tmusicPlayingContainerRef.current.style.left = offsetXValue + \"px\"\n\t\t\t} else if(offsetYValue > 0 && movingX !== true) {\n\t\t\t\tmovingY = true\n\t\t\t\tmusicPlayingContainerRef.current.style.top = offsetYValue + \"px\"\n\t\t\t}\n\t\t}\n\t}\n\n\tconst endPage = (e) => {\n\t\te.stopPropagation();\n\t\tlogger.info(\"endPage offsetXValue\", offsetXValue, 'offsetYValue', offsetYValue)\n\t\tif(offsetXValue > 0 || offsetYValue > 0){\n\t\t\tif(offsetXValue >= offsetYValue){\n\t\t\t\tmovingX = false\n\t\t\t\tmusicPlayingPageXAnimation()\n\t\t\t} else {\n\t\t\t\tmovingY = false\n\t\t\t\tmusicPlayingPageYAnimation()\n\t\t\t}\n\t\t}\n\t}\n\n\tconst musicPlayingPageXAnimation = () => {\n\t\tif(offsetXValue > 0 && offsetXValue <= (windowInnerWidth / 2)){\n\t\t\tif(offsetXValue < 15){\n\t\t\t\toffsetXValue = 0\n\t\t\t\tmusicPlayingContainerRef.current.style.left = 0\n\t\t\t} else {\n\t\t\t\toffsetXValue -= 15\n\t\t\t\tmusicPlayingContainerRef.current.style.left = (offsetXValue + \"px\")\n\t\t\t\twindow.requestAnimationFrame(musicPlayingPageXAnimation)\n\t\t\t}\n\t\t} else if((offsetXValue > (windowInnerWidth / 2)) && (offsetXValue < windowInnerWidth)){\n\t\t\tmusicPlayingContainerRef.current.style.left = (offsetXValue + \"px\")\n\t\t\toffsetXValue += 15\n\t\t\twindow.requestAnimationFrame(musicPlayingPageXAnimation)\n\t\t} else if(offsetXValue >= windowInnerWidth){\n\t\t\toffsetXValue = 0\n\t\t\t$dispatch(updateShowMusicPlayingFromMusicControl(false))\n\t\t}\n\t}\n\n\tconst musicPlayingPageYAnimation = () => {\n\t\tif(offsetYValue > 0 && offsetYValue <= (windowInnerHeight / 3)){\n\t\t\tif(offsetYValue < 25){\n\t\t\t\toffsetYValue = 0\n\t\t\t\tmusicPlayingContainerRef.current.style.top = 0\n\t\t\t} else {\n\t\t\t\toffsetYValue -= 25\n\t\t\t\tmusicPlayingContainerRef.current.style.top = (offsetYValue + \"px\")\n\t\t\t\twindow.requestAnimationFrame(musicPlayingPageYAnimation)\n\t\t\t}\n\t\t} else if((offsetYValue > (windowInnerHeight / 3)) && (offsetYValue < windowInnerHeight)){\n\t\t\tmusicPlayingContainerRef.current.style.top = (offsetYValue + \"px\")\n\t\t\toffsetYValue += 25\n\t\t\twindow.requestAnimationFrame(musicPlayingPageYAnimation)\n\t\t} else if(offsetYValue >= windowInnerHeight){\n\t\t\toffsetYValue = 0\n\t\t\t$dispatch(updateShowMusicPlayingFromMusicControl(false))\n\t\t}\n\t}\n\n\tconst backKeyDownToPrevious = () => {\n\t\tspecialBackFunc()\n\t\tbackToMainPage()\n\t}\n\n\tconst backToMainPage = () => {\n\t\tif(!isFromThirdPart){\n\t\t\tif(showMusicPlayingFromMusicControl){\n\t\t\t\tif(offsetXValue >= windowInnerWidth){\n\t\t\t\t\t$dispatch(updateShowMusicPlayingFromMusicControl(false))\n\t\t\t\t} else {\n\t\t\t\t\toffsetXValue += 25\n\t\t\t\t\tmusicPlayingContainerRef.current.style.left = (offsetXValue + \"px\")\n\t\t\t\t\tsetTimeout(backToMainPage, 17)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\thistory.push(\"/my_download_middle_page\")\n\t\t\t}\n\t\t} else {\n\t\t\talert(\"请手动关闭页面\")\n\t\t}\n\t}\n\n\tconst playPreviousSongFunc = (currentFileIndex, currentMusicFilenameOriginalArr, currentPlayingSongOriginal, currentPlayingMusicList, e) => {\n\t\tif(!isFromThirdPart){\n\t\t\tplayRef.current && (playRef.current.style.paddingLeft = \"0px\")\n\t\t\tplayPreviousSong(currentFileIndex, currentMusicFilenameOriginalArr, currentPlayingSongOriginal, currentPlayingMusicList, e)\n\t\t} else {\n\t\t\tdownloadApp()\n\t\t}\n\t}\n\n\tconst playNextSongFunc = (currentFileIndex, currentMusicFilenameOriginalArr, currentPlayingSongOriginal, currentPlayingMusicList, e) => {\n\t\tif(!isFromThirdPart){\n\t\t\tplayRef.current && (playRef.current.style.paddingLeft = \"0px\")\n\t\t\tplayNextSong(currentFileIndex, currentMusicFilenameOriginalArr, currentPlayingSongOriginal, currentPlayingMusicList, e)\n\t\t} else {\n\t\t\tdownloadApp()\n\t\t}\n\t}\n\n\tconst saveMusicToLocalFunc = (musicDataList, filename, uploadUsername, fileSize, musicSrc, filenameOrigin, duration, songOriginal, musicId, payDownload) => {\n\t\tif(!isFromThirdPart){\n\t\t\tif(!filename && !filenameOrigin) return alert('请选择一首歌播放')\n\t\t\tsaveMusicToLocal({ musicDataList, filename, uploadUsername, fileSize, musicSrc, filenameOrigin, duration, songOriginal, musicId, payDownload })\n\t\t} else {\n\t\t\tdownloadApp()\n\t\t}\n\t}\n\n\tconst pause = (e) => {\n\t\tif(e) e.stopPropagation();\n\t\tif(!soundInstance && !soundInstanceId) return\n\t\tlogger.info(\"MusicController pause currentPlayingSong\", currentPlayingSong)\n\t\tpauseRef.current.style.paddingLeft = \"5px\"\n\t\tpauseMusic(soundInstance, soundInstanceId, currentPlayingSong)\n\t}\n\n\tconst resume = (e) => {\n\t\tlogger.info(\"isFromThirdPart\", isFromThirdPart)\n\t\tif(e) e.stopPropagation();\n\t\tif(!soundInstance && !soundInstanceId && !currentPlayingSong) return alert('请选择一首歌播放')\n\t\tlogger.info(\"MusicController resume currentPlayingSong\", currentPlayingSong)\n\t\tplayRef.current.style.paddingLeft = \"0px\"\n\t\tresumeMusic()\n\t}\n\n\tconst gotoPlayingOrigin = () => {\n\t\tif(!isFromThirdPart){\n\t\t\t// 只有收藏页面才有这个动画\n\t\t\tif(showMusicPlayingFromMusicControl && window.getRoute() === \"/saved_songs\" && musicPageType == \"savedSongs\"){\n\t\t\t\tmusicPlayingContainerRef.current.style.top = (offsetYValue + \"px\")\n\t\t\t\toffsetYValue += 30\n\t\t\t\tif(offsetYValue >= windowInnerHeight){\n\t\t\t\t\t$dispatch(updateShowMusicPlayingFromMusicControl(false))\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(gotoPlayingOrigin, 10)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$dispatch(updateShowMusicPlayingFromMusicControl(false))\n\t\t\t\tgotoPlayingOriginFunc()\n\t\t\t}\n\t\t} else {\n\t\t\tdownloadApp()\n\t\t}\n\t}\n\n\tconst gotoPlayingOriginFunc = () => {\n\t\tconst urlHash =  window.getRoute()\n\t\tcheckToShowPlayController()\n\t\tswitch(musicPageType){\n\t\t\tcase CONSTANT.musicOriginal.musicShare:\n\t\t\t\tif(urlHash !== \"/main/music\") history.push(\"/main/music\")\n\t\t\t\tbreak\n\t\t\tcase CONSTANT.musicOriginal.savedSongs:\n\t\t\t\tif(urlHash !== \"/saved_songs\") history.push(\"/saved_songs\")\n\t\t\t\tbreak\n\t\t\tcase CONSTANT.musicOriginal.musicFinished:\n\t\t\t\tif(urlHash !== \"/my_finished_musics\") history.push(\"/my_finished_musics\")\n\t\t\t\tbreak\n\t\t\tcase CONSTANT.musicOriginal.musicRecent:\n\t\t\t\tif(urlHash !== \"/recent_music_played\") history.push(\"/recent_music_played\")\n\t\t\t\tbreak\n\t\t\tcase \"onlySearchShareMusic\":\n\t\t\t\tif(urlHash !== \"/search_music\") history.push(\"/search_music\")\n\t\t\t\tbreak\n\t\t\tcase \"onlineMusic\":\n\t\t\t\tif(urlHash !== \"/search_online_music\") history.push(\"/search_online_music\")\n\t\t\t\tbreak\n\t\t\tcase \"onlineMusicSearchALl\":\n\t\t\t\tif(urlHash !== \"/onlineMusicSearchALl\") history.push(\"/search_all\")\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\talert(\"请选择一首歌播放\")\n\t\t\t\tbreak\n\t\t}\n\t}\n\n\tconst shareToWeChat = (place) => {\n\t\tif(currentMusicItemInfo && currentMusicItemInfo.filePath){\n\t\t\tif(currentMusicItemInfo.filePath.includes(\"cdvfile://localhost/sdcard/miXingFeng/music/\")){\n\t\t\t\treturn alertDialog(\"不能分享已下载的音乐，请上传后分享\")\n\t\t\t} else {\n\t\t\t\tlet scene = Wechat.Scene.SESSION\n\t\t\t\tif(place === \"weChat\"){\n\t\t\t\t\tscene = Wechat.Scene.SESSION\n\t\t\t\t} else if(place === \"timeLine\"){\n\t\t\t\t\tscene = Wechat.Scene.TIMELINE\n\t\t\t\t}\n\t\t\t\tconst currentMusicItemInfoCopy = JSON.parse(JSON.stringify(currentMusicItemInfo))\n\t\t\t\tif(!currentMusicItemInfo.filePath.includes(\"api.zhoushoujian.com\")) delete currentMusicItemInfoCopy.filePath\n\t\t\t\tcurrentMusicItemInfoCopy.isFromThirdPart = \"weChat\"\n\t\t\t\tlet webpageUrl = `${CONSTANT.appStaticDirectory}#/music_playing`\n\t\t\t\tconst arr = []\n\t\t\t\tfor (let key in currentMusicItemInfoCopy) {\n\t\t\t\t\tarr.push(`${key}=${currentMusicItemInfoCopy[key]}`)\n\t\t\t\t}\n\t\t\t\twebpageUrl = `${webpageUrl}?${arr.join('&')}`\n\t\t\t\tlogger.info(\"webpageUrl: \"+ webpageUrl)\n\t\t\t\treturn shareLinkToWeChat({\n\t\t\t\t\ttitle: `音乐: ${currentMusicItemInfoCopy.filename} (${secondsToTime(currentMusicItemInfoCopy.duration)})`,\n\t\t\t\t\tdescription: \"觅星峰，一款集qq音乐，网易云音乐，酷狗音乐和酷我音乐为一身的音乐播放器\",\n\t\t\t\t\tthumb: `${CONSTANT.appStaticDirectory}logo.png`,\n\t\t\t\t\twebpageUrl,\n\t\t\t\t\tscene\n\t\t\t\t})\n\t\t\t}\n\t\t} else {\n\t\t\talert(\"请选择一首歌播放\")\n\t\t}\n\t}\n\n\tconst downloadApp = () => {\n\t\tif(comeFromWeChat()){\n\t\t\tsetShowDownloadHeaderTip(true)\n\t\t} else {\n\t\t\tsaveFileToLocal({\n\t\t\t\tfilenameOrigin: \"shareMusicFromThirdPart\",\n\t\t\t\tfileUrl: CONSTANT.appDownloadUrl,\n\t\t\t\tfolder:CONSTANT.downloadAppFromPage\n\t\t\t})\n\t\t}\n\t}\n\n\tconst saveSong = (savedMusicFilenameOriginalArr, filenameOrigin, musicCollection, musicDataList, currentFileIndex, original, e, pageType) => {\n\t\tif(!isFromThirdPart){\n\t\t\tsaveSongFunc({\n\t\t\t\tsavedMusicFilenameOriginalArr,\n\t\t\t\tfilenameOrigin,\n\t\t\t\tmusicCollection,\n\t\t\t\tmusicDataList,\n\t\t\t\tcurrentFileIndex,\n\t\t\t\toriginal,\n\t\t\t\te,\n\t\t\t\tpageType\n\t\t\t})\n\t\t} else {\n\t\t\tdownloadApp()\n\t\t}\n\t}\n\n\tif(currentPlayingSong){\n\t\tsavedMusicFilenameOriginalArr = musicCollection.map(item => removePrefixFromFileOrigin(item.filenameOrigin))\n\t\tcurrentMusicFilenameOriginalArr = currentPlayingMusicList.map(item => item.filenameOrigin)\n\t\tcurrentFileIndex = currentMusicFilenameOriginalArr.indexOf(currentPlayingSong)\n\t}\n\tconst songIsSaved = currentMusicItemInfo.saved || currentPlayingSongOriginal === \"savedSongs\"\n\tconst currentSongFilename = currentMusicItemInfo.filename ? removeTagFromFilename(getFilenameWithoutExt(currentMusicItemInfo.filename)) : \"当前没有播放音乐\"\n\treturn (\n\t\t<div\n\t\t\tclassName={`music-playing-container ${isHeadPhoneView ? \"head-phone-view\" : \"amazing-baby-view\"} ${fromMusicControl ? 'from-music-control' : \"\"}`}\n\t\t\tref={musicPlayingContainerRef}\n\t\t\tstyle={{left: fromMusicControl ? \"calc(100vw / 2)\" : \"0px\"}}\n\t\t>\n\t\t\t<NavBar\n\t\t\t\tcenterText={currentSongFilename}\n\t\t\t\tbackToPreviousPage={backToMainPage}\n\t\t\t\trightText=\"源页面\"\n\t\t\t\trightTextFunc={gotoPlayingOrigin}\n\t\t\t/>\n\t\t\t<div className=\"music-playing-content\">\n\t\t\t\t<div className=\"top\" ref={musicPlayingTopRef}>\n\t\t\t\t\t<div className=\"music-singer\">{currentMusicItemInfo.uploadUsername}</div>\n\t\t\t\t\t{\n\t\t\t\t\t\t!isHeadPhoneView\n\t\t\t\t\t\t?\t<AmazingBaby />\n\t\t\t\t\t\t:\t<div className='music'>\n\t\t\t\t\t\t\t\t<span className={`line line1 ${soundPlaying ? 'line-animation' : 'line-height'}`}></span>\n\t\t\t\t\t\t\t\t<span className={`line line2 ${soundPlaying ? 'line-animation' : 'line-height'}`}></span>\n\t\t\t\t\t\t\t\t<span className={`line line3 ${soundPlaying ? 'line-animation' : 'line-height'}`}></span>\n\t\t\t\t\t\t\t\t<span className={`line line4 ${soundPlaying ? 'line-animation' : 'line-height'}`}></span>\n\t\t\t\t\t\t\t\t<span className={`line line5 ${soundPlaying ? 'line-animation' : 'line-height'}`}></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\tisFromThirdPart\n\t\t\t\t\t\t?\t<div className=\"download-button\" onClick={downloadApp}>下载</div>\n\t\t\t\t\t\t:\tnull\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\t(!isFromThirdPart && window.isCordova)\n\t\t\t\t\t\t?\t<i className=\"fa fa-share share\" aria-hidden=\"true\" onClick={shareToWeChat.bind(this, \"weChat\")} ></i>\n\t\t\t\t\t\t:\tnull\n\t\t\t\t\t}\n\t\t\t\t\t<div className=\"circle\">\n\t\t\t\t\t\t<div className={`dot ${!isHeadPhoneView ? 'dot-fill' : ''}`} onClick={touchDirectionCallback.bind(this, \"right\")}></div>\n\t\t\t\t\t\t<div className={`dot ${isHeadPhoneView ? 'dot-fill' : ''}`} onClick={touchDirectionCallback.bind(this, \"left\")}></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{\n\t\t\t\t\t\t(!isFromThirdPart && window.isCordova)\n\t\t\t\t\t\t?\t<i className=\"fa fa-share-alt share\" aria-hidden=\"true\" onClick={shareToWeChat.bind(this, \"timeLine\")} ></i>\n\t\t\t\t\t\t:\tnull\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"play-progress\">\n\t\t\t\t\t<div className=\"current-time\">{secondsToTime(currentSongTime)}</div>\n\t\t\t\t\t<div className=\"progress\" ref={progressRef}>\n\t\t\t\t\t\t<div className=\"progress-played\" ref={progressPlayedRef}></div>\n\t\t\t\t\t\t<div className=\"progress-unplayed\" ref={progressUnplayedRef}></div>\n\t\t\t\t\t\t<div className={`progress-out-point ${showSelectedAnimation ? \"selected-animation\" : \"\"}`} ref={progressOutPointRef} ></div>\n\t\t\t\t\t\t<div className=\"progress-inner-point\" ref={progressInnerPointRef} ></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"duration-time\">{secondsToTime(currentMusicItemInfo.duration || 0)}</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"bottom-controller\">\n\t\t\t\t\t<div className={`save-svg ${songIsSaved ? 'save-song-svg' : \"\"}`}\n\t\t\t\t\t\tonClick={(e) => saveSong(savedMusicFilenameOriginalArr, currentPlayingSong, musicCollection, currentPlayingMusicList, currentFileIndex, currentPlayingSongOriginal, e, musicPageType)}>\n\t\t\t\t\t\t<HearSvg />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"fa fa-step-backward play-previous\"\n\t\t\t\t\t\tonClick={(e) => playPreviousSongFunc(currentFileIndex, currentMusicFilenameOriginalArr, currentPlayingSongOriginal, currentPlayingMusicList, e)}>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"play-or-pause\">\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsoundPlaying\n\t\t\t\t\t\t\t?\t<div className=\"fa fa-pause\" ref={pauseRef} onClick={pause}></div>\n\t\t\t\t\t\t\t:\t<div className=\"fa fa-play\" ref={playRef} onClick={resume}></div>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"fa fa-step-forward play-next\"\n\t\t\t\t\t\tonClick={(e) => playNextSongFunc(currentFileIndex, currentMusicFilenameOriginalArr, currentPlayingSongOriginal, currentPlayingMusicList, e)}>\n\t\t\t\t\t</div>\n\t\t\t\t\t<i className=\"fa fa-download download-song\"\n\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\tonClick={() => saveMusicToLocalFunc(currentPlayingMusicList, currentMusicItemInfo.filename, currentMusicItemInfo.uploadUsername, currentMusicItemInfo.fileSize, currentMusicItemInfo.filePath, currentMusicItemInfo.filenameOrigin, currentMusicItemInfo.duration, currentMusicItemInfo.original, currentMusicItemInfo.id, Number(currentMusicItemInfo.payDownload))\n\t\t\t\t\t}></i>\n\t\t\t\t</div>\n\t\t\t\t{\n\t\t\t\t\tshowDownloadHeaderTip\n\t\t\t\t\t?\t<Fragment>\n\t\t\t\t\t\t\t<div className=\"open-with-browser\">\n\t\t\t\t\t\t\t\t<div className=\"text1\">链接打不开?</div>\n\t\t\t\t\t\t\t\t<div className=\"text2\">请点击右上角 <strong>. . .</strong></div>\n\t\t\t\t\t\t\t\t<div className=\"text2\">选择在\"浏览器\"打开</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"overlay\" onClick={() => setShowDownloadHeaderTip(false)}></div>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t:\tnull\n\t\t\t\t}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nconst mapStateToProps = state => {\n    return {\n\t\tsoundPlaying: state.fileServer.soundPlaying,\n\t\tsoundInstance: state.fileServer.soundInstance,\n\t\tsoundInstanceId: state.fileServer.soundInstanceId,\n\t\tcurrentPlayingSong: state.fileServer.currentPlayingSong,\n\t\tmusicCollection: state.fileServer.musicCollection,\n\t\tcurrentPlayingSongOriginal: state.fileServer.currentPlayingSongOriginal,\n\t\tcurrentPlayingMusicList: state.fileServer.currentPlayingMusicList,\n\t\tmusicPageType: state.fileServer.musicPageType,\n\t\tcurrentSongTime: state.fileServer.currentSongTime,\n\t\tisHeadPhoneView: state.fileServer.isHeadPhoneView,\n\t\tcurrentMusicItemInfo: state.fileServer.currentMusicItemInfo,\n\t\tshowMusicPlayingFromMusicControl: state.fileServer.showMusicPlayingFromMusicControl\n    };\n};\n\nconst mapDispatchToProps = () => ({});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MusicPlaying);\n"],"mappings":";;;;;;;;;;;;AAAA;AACA;AACA;AACA;AADA;AACA;AAKA;;ACRA;AACA;AACA;AACA;AACA;AADA;AACA;AAcA;;;;;;;;;;;;;;;;;;;;;;;;AClBA;AACA;AACA;AACA;AADA;AACA;AA0BA;;;;;;;;;;;AC7BA;AACA;AACA;AACA;AADA;AACA;AAkEA;;;;;;;;;;ACrEA;AACA;AACA;AACA;AACA;AACA;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AAbA;AAeA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AA3CA;AACA;AA6DA;AACA;AADA;AACA;AAGA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AARA;AACA;AAUA;AACA;AADA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AACA;AASA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1BA;AACA;AA4BA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAdA;AACA;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAXA;AACA;AAaA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AARA;AAUA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAjBA;AACA;AAmBA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AARA;AAUA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAjBA;AACA;AAmBA;AACA;AACA;AAFA;AACA;AAIA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAPA;AASA;AACA;AAXA;AAaA;AACA;AAfA;AACA;AAiBA;AACA;AACA;AACA;AAFA;AAIA;AACA;AANA;AACA;AAQA;AACA;AACA;AACA;AAFA;AAIA;AACA;AANA;AACA;AAQA;AACA;AACA;AACA;AAFA;AAIA;AACA;AANA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AACA;AAQA;AACA;AAEA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AAPA;AASA;AACA;AACA;AAbA;AAeA;AACA;AAjBA;AACA;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxBA;AAHA;AACA;AA8BA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AALA;AAOA;AA3BA;AA6BA;AACA;AA/BA;AACA;AAiCA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAHA;AAKA;AATA;AACA;AAWA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AARA;AADA;AAYA;AACA;AAdA;AACA;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AAJA;AAoDA;AAIA;AAUA;AAGA;AACA;AAvgBA;AACA;AA0hBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA;AADA;AACA;AAgBA;AACA;AACA;;;;A","sourceRoot":""}