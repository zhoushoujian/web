{"version":3,"file":"js/9.chunk.js?b081a96a","sources":["webpack:///src/components/showFileInfo.js"],"sourcesContent":["import React, { useState, useEffect, Fragment } from 'react';\nimport { dealWithThirdPartVisit } from \"../logic/common\"\nimport { comeFromWeChat, saveFileToLocal } from \"../services/utils\"\nimport { CONSTANT } from \"../constants/enumeration\"\nimport \"../themes/css/showFileInfo.less\"\n\nlet filePath = \"\"\nconst ShowFileInfo = () => {\n\n\tconst [filename, setFilename] = useState(\"\")\n\tconst [fileSize, setFileSize] = useState(\"\")\n\tconst [showDownloadHeaderTip, setShowDownloadHeaderTip] = useState(false)\n\n\tuseEffect(() => {\n\t\tconst queryParams = dealWithThirdPartVisit()\n\t\tif(queryParams.filePath){\n\t\t\tfilePath = queryParams.filePath\n\t\t\tsetFilename(queryParams.filename)\n\t\t\tsetFileSize(queryParams.fileSize)\n\t\t} else {\n\t\t\treturn alertOld(\"缺少必要的参数,请稍后重试\")\n\t\t}\n\t})\n\n\tconst downloadFile = () => {\n\t\tif(comeFromWeChat()){\n\t\t\tsetShowDownloadHeaderTip(true)\n\t\t} else {\n\t\t\tsaveFileToLocal({\n\t\t\t\tfilenameOrigin: \"downloadFileFromThirdPart\",\n\t\t\t\tfileUrl: filePath,\n\t\t\t\tfolder: CONSTANT.downloadAppFromPage\n\t\t\t})\n\t\t}\n\t}\n\n\tconst downloadApp = () => {\n\t\tif(comeFromWeChat()){\n\t\t\tsetShowDownloadHeaderTip(true)\n\t\t} else {\n\t\t\tsaveFileToLocal({\n\t\t\t\tfilenameOrigin: \"downloadAppFromThirdPartFile\",\n\t\t\t\tfileUrl: CONSTANT.appDownloadUrl,\n\t\t\t\tfolder: CONSTANT.downloadAppFromPage\n\t\t\t})\n\t\t}\n\t}\n\n\treturn \t(\n\t\t<div className=\"show-file-info-container\">\n\t\t\t<div className=\"file-info\">\n\t\t\t\t<i className=\"fa fa-file-text-o file-ico\"></i>\n\t\t\t\t<div className=\"filename\">{filename}</div>\n\t\t\t\t<div className=\"file-size\">文件大小: {fileSize}</div>\n\t\t\t</div>\n\t\t\t<div className=\"download-info\">\n\t\t\t\t<div className=\"download-file\" onClick={downloadFile} >下载</div>\n\t\t\t\t<div className=\"download-app\" onClick={downloadApp} >app打开</div>\n\t\t\t</div>\n\t\t\t{\n\t\t\t\tshowDownloadHeaderTip\n\t\t\t\t? \t<Fragment>\n\t\t\t\t\t\t<div className=\"open-with-browser\">\n\t\t\t\t\t\t\t<div className=\"text1\">链接打不开?</div>\n\t\t\t\t\t\t\t<div className=\"text2\">请点击右上角 <strong>. . .</strong></div>\n\t\t\t\t\t\t\t<div className=\"text2\">选择在\"浏览器\"打开</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"overlay\" onClick={() => setShowDownloadHeaderTip(false)}></div>\n\t\t\t\t\t</Fragment>\n\t\t\t\t: null\n\t\t\t}\n\t\t</div>\n\t)\n}\n\nexport default ShowFileInfo\n"],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AARA;AACA;AAUA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAHA;AAKA;AATA;AACA;AAWA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAHA;AAKA;AATA;AACA;AAWA;AAzCA;AACA;AAmEA;;;;A","sourceRoot":""}