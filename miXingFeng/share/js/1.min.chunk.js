(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{203:function(e,t,a){"use strict";var n=a(0),i=a.n(n);t.a=(()=>i.a.createElement("div",{className:"top-status-bar"}))},204:function(e,t,a){"use strict";var n=a(0),i=a.n(n),r=a(203);t.a=(({centerText:e="",backToPreviousPage:t=(()=>{}),rightText:a="",rightTextFunc:c=(()=>{})})=>i.a.createElement(n.Fragment,null,i.a.createElement(r.a,null),i.a.createElement("div",{className:"navbar-container"},i.a.createElement("div",{className:"back-btn",onClick:t},i.a.createElement("i",{className:"fa fa-angle-left","aria-hidden":"true"})),i.a.createElement("div",{className:"center-text"},e),i.a.createElement("div",{className:"other-text",onClick:c},a))))},234:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(71),c=a(3),s=a(204),l=a(258),o=a(8),m=a(1),u=a(4);var d=()=>i.a.createElement("div",{className:"eevee"},i.a.createElement("div",{className:"body"},i.a.createElement("div",{className:"head"},i.a.createElement("div",{className:"ears"},i.a.createElement("div",{className:"ear"},i.a.createElement("div",{className:"lobe"})),i.a.createElement("div",{className:"ear"},i.a.createElement("div",{className:"lobe"}))),i.a.createElement("div",{className:"face"},i.a.createElement("div",{className:"eyes"},i.a.createElement("div",{className:"eye"},i.a.createElement("div",{className:"eyelid"})),i.a.createElement("div",{className:"eye"},i.a.createElement("div",{className:"eyelid"}))),i.a.createElement("div",{className:"nose"}),i.a.createElement("div",{className:"mouth"}))),i.a.createElement("div",{className:"chest"},i.a.createElement("div",{className:"fur"},i.a.createElement("div",{className:"patch"})),i.a.createElement("div",{className:"fur"},i.a.createElement("div",{className:"patch"})),i.a.createElement("div",{className:"fur"},i.a.createElement("div",{className:"patch"}))),i.a.createElement("div",{className:"legs"},i.a.createElement("div",{className:"leg"},i.a.createElement("div",{className:"inner-leg"})),i.a.createElement("div",{className:"leg"},i.a.createElement("div",{className:"inner-leg"})),i.a.createElement("div",{className:"leg"},i.a.createElement("div",{className:"inner-leg"})),i.a.createElement("div",{className:"leg"},i.a.createElement("div",{className:"inner-leg"}))),i.a.createElement("div",{className:"tail"},i.a.createElement("div",{className:"tail"},i.a.createElement("div",{className:"tail"},i.a.createElement("div",{className:"tail"},i.a.createElement("div",{className:"tail"},i.a.createElement("div",{className:"tail -end"})))))))),g=a(6);a(189);t.default=Object(r.connect)(e=>({soundPlaying:e.fileServer.soundPlaying,soundInstance:e.fileServer.soundInstance,soundInstanceId:e.fileServer.soundInstanceId,currentPlayingSong:e.fileServer.currentPlayingSong,musicCollection:e.fileServer.musicCollection,currentPlayingSongOriginal:e.fileServer.currentPlayingSongOriginal,currentPlayingMusicList:e.fileServer.currentPlayingMusicList,musicPageType:e.fileServer.musicPageType,currentSongTime:e.fileServer.currentSongTime,isHeadPhoneView:e.fileServer.isHeadPhoneView,currentMusicItemInfo:e.fileServer.currentMusicItemInfo,showMusicPlayingFromMusicControl:e.fileServer.showMusicPlayingFromMusicControl,currentPlayingMusicLyric:e.fileServer.currentPlayingMusicLyric,isLyricView:e.fileServer.isLyricView}),()=>({}))(({currentPlayingSong:e,currentPlayingMusicList:t=[],musicCollection:a=[],currentPlayingSongOriginal:r,soundPlaying:v,musicPageType:f,currentSongTime:h,isHeadPhoneView:p,isLyricView:E,soundInstance:b,soundInstanceId:y,currentMusicItemInfo:N,fromMusicControl:O,showMusicPlayingFromMusicControl:L,currentPlayingMusicLyric:w,myMusicPage:j=!1,searchMusicPage:S=!1})=>{const P={debounceTimer:null,firstTimeRun:!1},[k,C]=Object(n.useState)(!1),[M,$]=Object(n.useState)(!1),[x,F]=Object(n.useState)(!1),[_,R]=Object(n.useState)(["暂无歌词"]),T=window.innerWidth,I=window.innerHeight,D=Object(c.useHistory)(),X=Object(n.useRef)(),q=Object(n.useRef)(),V=Object(n.useRef)(),W=Object(n.useRef)(),z=Object(n.useRef)(),A=Object(n.useRef)(),U=Object(n.useRef)(),H=Object(n.useRef)(),Y=Object(n.useRef)(),J=Object(o.s)();let Z=!1,B=0,G=0,K=0,Q=0,ee=!1,te=!1,ae=[],ne=[],ie=null;Object(n.useEffect)(()=>{if(F(location.href.split("?").length>1),location.href.split("?").length>1){$dispatch(Object(m.b)(J));const e={filePath:J.filePath||"",filenameOrigin:J.filenameOrigin,duration:J.duration,original:J.original,musicDataList:[],pageType:J.original,filename:J.filename,musicId:J.id,songOriginal:J.original,songInfo:J};Object(u.i)()||(e.checkLastMusicWhenLaunch=!0),Object(o.bb)(W.current,["swipeLeft","swipeRight"],se,P),Object(o.F)(e)}return O||Object(o.bb)(W.current,["swipeLeft","swipeRight"],se,P),V.current.addEventListener("touchstart",me,!1),V.current.addEventListener("touchmove",ue,!1),V.current.addEventListener("click",ue,!1),z.current.addEventListener("touchend",de),oe(h),()=>{document.removeEventListener("backbutton",pe,!1),V.current.removeEventListener("touchstart",me),V.current.removeEventListener("touchmove",ue),V.current.removeEventListener("click",ue),z.current.removeEventListener("touchend",de),Object(o.P)(W.current)}},[]),Object(n.useEffect)(()=>{oe(h)},[h]),Object(n.useEffect)(()=>{R(w?w.split(/\[.+\]/):["暂无歌词"])},[w]),Object(n.useEffect)(()=>(L?(z.current.style.left="0px",z.current.addEventListener("touchstart",ge,!1),z.current.addEventListener("touchmove",ve,!1),z.current.addEventListener("touchend",fe,!1),document.addEventListener("deviceready",le,!1)):(z.current.style.left="100vw",z.current.removeEventListener("touchstart",ge,!1),z.current.removeEventListener("touchmove",ve,!1),z.current.removeEventListener("touchend",fe,!1),document.removeEventListener("deviceready",le,!1),document.addEventListener("deviceready",re,!1)),()=>{z.current.style.left="100vw",z.current.removeEventListener("touchstart",ge,!1),z.current.removeEventListener("touchmove",ve,!1),z.current.removeEventListener("touchend",fe,!1),document.removeEventListener("deviceready",le,!1),document.removeEventListener("backbutton",pe,!1),document.removeEventListener("deviceready",re,!1),document.removeEventListener("backbutton",ce,!1)}),[L]);const re=()=>{document.addEventListener("backbutton",ce,!1)},ce=()=>{window.cancelMenuFirst||window.specialBack||"/main/home"!==getRoute()&&(j?Object(u.b)("/my_download_middle_page",!0):S&&Object(u.b)("/search_column",!0))},se=e=>{logger.info("touchDirectionCallback direction, isHeadPhoneView",e,p),"left"===e?(logger.info("switch to head phone"),$dispatch(Object(m.q)(!0)),$dispatch(Object(m.r)(!1))):"right"===e?(logger.info("switch to amazing baby"),$dispatch(Object(m.q)(!1)),$dispatch(Object(m.r)(!1))):"lyric"===e&&(logger.info("switch to lyric"),$dispatch(Object(m.q)(!1)),$dispatch(Object(m.r)(!0)))},le=()=>{document.addEventListener("backbutton",pe,!1)},oe=e=>{const t=e/N.duration,a=window.innerWidth-124;A.current.style.width=a*t+"px",U.current.style.width=a*(1-t)+"px",U.current.style.left=a*t+14+"px",H.current.style.left=a*t+"px",Y.current.style.left=a*t+3+"px"},me=e=>{e.stopPropagation(),Z=!0,logger.info("鼠标按下"),C(!0)},ue=e=>{e.stopPropagation();const t=N.duration||J.duration,{soundInstance:a,soundInstanceId:n}=$getState().fileServer;if(Z){const i=V.current.offsetWidth-14,r=e.clientX||e.touches[0].pageX;let c=r-55>i?i:r-55;const s=((c=r-55<0?0:c)/i).toFixed(2),l=t*s;logger.info("move music progress move percent, seekTime",s,l),$dispatch(Object(m.j)(l)),a&&n&&a.seek(l,n)}else if(e.clientX&&!Object(u.p)()){const i=t*((e.clientX-55)/(V.current.offsetWidth-14)).toFixed(2);$dispatch(Object(m.j)(i)),a&&n&&a.seek(i,n)}},de=e=>{e.stopPropagation(),logger.info("鼠标弹起"),Z=!1,C(!1)},ge=e=>{e.stopPropagation(),K=e.clientX||e.touches[0].pageX,Q=e.clientY||e.touches[0].pageY,logger.info("startPage offsetFirstXValue",K,"offsetFirstYValue",Q)},ve=e=>{e.stopPropagation();const t=e.clientX||e.touches[0].pageX,a=e.clientY||e.touches[0].pageY;G=a-Q,(B=t-K)>0&&(Math.abs(G)>5&&!0!==ee?te=!0:(B>=Math.abs(G)&&!0!==te||ee)&&(ee=!0,z.current.style.left=B+"px",z.current.style.transition="left 0s"))},fe=e=>{e.stopPropagation(),logger.info("endPage offsetXValue",B,"offsetYValue",G),B>0&&ee?(ee=!1,he()):te&&(te=!1)},he=()=>{B>0&&B<=T/2?B<25?(B=0,z.current.style.left=0,z.current.style.transition="left 0.2s"):(B-=25,z.current.style.left=B+"px",requestAnimationFrame(he)):B>T/2&&B<T?(z.current.style.left=B+"px",B+=25,requestAnimationFrame(he)):B>=T&&(B=0,$dispatch(Object(m.db)(!1)),z.current.style.transition="left 0.2s")},pe=()=>{Object(u.y)(),Ee()},Ee=()=>{x?alert("请手动关闭页面"):$getState().fileServer.showMusicPlayingFromMusicControl?B>=T?(B=0,$dispatch(Object(m.db)(!1)),z.current.style.transition="left 0.2s"):(B+=25,z.current.style.left=B+"px",z.current.style.transition="left 0s",requestAnimationFrame(Ee)):Object(u.b)("/my_download_middle_page",!0)},be=()=>{x?Oe():(L&&"/saved_songs"===getRoute()&&"savedSongs"===f?(z.current.style.top=G+"px",(G+=35)>=I?(z.current.style.top="0px",z.current.style.left="100vw",z.current.style.transition="left 0s",setTimeout(()=>{z.current.style.transition="left 0.2s",$dispatch(Object(m.db)(!1))},300)):requestAnimationFrame(be)):($dispatch(Object(m.db)(!1)),ye()),e&&setTimeout(()=>{try{const t=document.querySelector("#"+e.split(".")[0].match(/\w/g).join(""));if(t){const e=t.offsetTop;let a=0;if("/main/music"===getRoute())a=document.querySelector(".music-list-container");else if("/saved_songs"===getRoute())a=document.querySelector(".saved-song-content");else{if("/recent_music_played"!==getRoute())return;a=document.querySelector(".recent-play-content")}a.scrollTo(0,e)}else logger.warn("gotoPlayingOrigin find no element currentPlayingSong",e)}catch(e){logger.error("gotoPlayingOrigin currentPlayingSong err",e)}},200))},ye=()=>{const e=getRoute();switch(Object(o.q)(),f){case g.a.musicOriginal.musicShare:"/main/music"!==e&&D.push("/main/music");break;case g.a.musicOriginal.savedSongs:"/saved_songs"!==e&&D.push("/saved_songs");break;case g.a.musicOriginal.musicFinished:"/my_finished_musics"!==e&&D.push("/my_finished_musics");break;case g.a.musicOriginal.musicRecent:"/recent_music_played"!==e&&D.push("/recent_music_played");break;case g.a.musicOriginal.homeRecommend:"/main/home"!==e&&D.push("/main/home");break;case"onlySearchShareMusic":"/search_music"!==e&&D.push("/search_music");break;case"onlineMusic":"/search_online_music"!==e&&D.push("/search_online_music");break;case"onlineMusicSearchALl":"/onlineMusicSearchALl"!==e&&D.push("/search_all");break;default:alert("请选择一首歌播放")}},Ne=e=>{if(N&&N.filePath){if(N.filePath.includes("cdvfile://localhost/sdcard/miXingFeng/music/"))return alertDialog("不能分享已下载的音乐，请上传后分享");{let t=window.Wechat.Scene.SESSION;"weChat"===e?t=window.Wechat.Scene.SESSION:"timeLine"===e&&(t=window.Wechat.Scene.TIMELINE);const a=JSON.parse(JSON.stringify(N));N.filePath.includes("api.zhoushoujian.com")||delete a.filePath,a.isFromThirdPart="weChat";let n=`${g.a.appStaticDirectory}#/music_playing`;const i=[];for(const e in a)Object.prototype.hasOwnProperty.call(a,e)&&i.push(`${e}=${a[e]}`);return n=`${n}?${i.join("&")}`,logger.info("webpageUrl: "+n),Object(u.w)({title:`音乐: ${a.filename} (${Object(o.X)(a.duration)})`,description:"觅星峰，每个人都能享受好音乐",thumb:`${g.a.appStaticDirectory}logo.png`,webpageUrl:n,scene:t})}}alert("请选择一首歌播放")},Oe=()=>{Object(u.i)()?$(!0):Object(u.v)({filenameOrigin:"shareMusicFromThirdPart",fileUrl:g.a.appDownloadUrl,folder:g.a.downloadAppFromPage})};e&&(ae=a.map(e=>Object(o.N)(e.filenameOrigin)),ne=t.map(e=>e.filenameOrigin),ie=ne.indexOf(e));const Le=N.saved||"savedSongs"===r,we=N.filename?Object(o.O)(Object(o.t)(N.filename)):"当前没有播放音乐";return i.a.createElement("div",{className:`music-playing-container\n\t\t\t\t${E?"lyric-view":""} ${p?"head-phone-view":"amazing-baby-view"}\n\t\t\t\t${O&&L?"from-music-control":"/music_playing"===getRoute()?"not-from-music-control":""}`,ref:z},i.a.createElement(s.a,{centerText:we,backToPreviousPage:Ee,rightText:"源页面",rightTextFunc:be}),i.a.createElement("div",{className:"music-playing-content"},i.a.createElement("div",{className:"top",ref:W},i.a.createElement("div",{className:`music-singer ${N.original?"famous-singer":""}`},N.uploadUsername),E?i.a.createElement("div",{className:`lyric-view-container ${1===_.length?"no-lyric":""}`},_.map((e,t)=>e&&e.trim()?i.a.createElement("div",{className:"lyric",key:t},e):null)):p?i.a.createElement("div",{className:"music"},i.a.createElement("span",{className:`line line1 ${v?"line-animation":"line-height"}`}),i.a.createElement("span",{className:`line line2 ${v?"line-animation":"line-height"}`}),i.a.createElement("span",{className:`line line3 ${v?"line-animation":"line-height"}`}),i.a.createElement("span",{className:`line line4 ${v?"line-animation":"line-height"}`}),i.a.createElement("span",{className:`line line5 ${v?"line-animation":"line-height"}`})):i.a.createElement(d,null),x?i.a.createElement("div",{className:"download-button",onClick:Oe},"下载"):null,!x&&isCordova?i.a.createElement("i",{className:"fa fa-share share","aria-hidden":"true",onClick:Ne.bind(void 0,"weChat")}):null,i.a.createElement("div",{className:"circle"},i.a.createElement("div",{className:`dot ${E?"dot-fill":""}`,onClick:se.bind(void 0,"lyric")}),i.a.createElement("div",{className:`dot ${E||p?"":"dot-fill"}`,onClick:se.bind(void 0,"right")}),i.a.createElement("div",{className:`dot ${!E&&p?"dot-fill":""}`,onClick:se.bind(void 0,"left")})),!x&&isCordova?i.a.createElement("i",{className:"fa fa-share-alt share","aria-hidden":"true",onClick:Ne.bind(void 0,"timeLine")}):null),i.a.createElement("div",{className:"play-progress"},i.a.createElement("div",{className:"current-time"},Object(o.X)(h)),i.a.createElement("div",{className:"progress",ref:V},i.a.createElement("div",{className:"progress-played",ref:A}),i.a.createElement("div",{className:"progress-unplayed",ref:U}),i.a.createElement("div",{className:`progress-out-point ${k?"selected-animation":""}`,ref:H}),i.a.createElement("div",{className:"progress-inner-point",ref:Y})),i.a.createElement("div",{className:"duration-time"},Object(o.X)(N.duration||0))),i.a.createElement("div",{className:"bottom-controller"},i.a.createElement("div",{className:`save-svg ${Le?"save-song-svg":""}`,onClick:n=>((e,t,a,n,i,r,c,s)=>{x?Oe():Object(o.V)({savedMusicFilenameOriginalArr:e,filenameOrigin:t,musicCollection:a,musicDataList:n,currentFileIndex:i,original:r,e:c,pageType:s})})(ae,e,a,t,ie,r,n,f)},i.a.createElement(l.a,null)),i.a.createElement("div",{className:"fa fa-step-backward play-previous",onClick:e=>((e,t,a,n,i)=>{x?Oe():Object(o.H)(e,t,a,n,i)})(ie,ne,r,t,e)}),i.a.createElement("div",{className:"play-or-pause"},v?i.a.createElement("div",{className:"fa fa-pause",ref:q,onClick:t=>{t&&t.stopPropagation(),(b||y)&&(logger.info("MusicController pause currentPlayingSong",e),Object(o.E)(b,y,e))}}):i.a.createElement("div",{className:"fa fa-play",ref:X,onClick:t=>{if(logger.info("isFromThirdPart",x),t&&t.stopPropagation(),!b&&!y&&!e)return alert("请选择一首歌播放");logger.info("MusicController resume currentPlayingSong",e),Object(o.R)()}})),i.a.createElement("div",{className:"fa fa-step-forward play-next",onClick:e=>((e,t,a,n,i)=>{x?Oe():Object(o.G)(e,t,a,n,i)})(ie,ne,r,t,e)}),i.a.createElement("i",{className:"fa fa-download download-song","aria-hidden":"true",onClick:()=>((e,t,a,n,i,r,c,s,l,m)=>{if(x)Oe();else{if(!t&&!r)return alert("请选择一首歌播放");Object(o.U)({musicDataList:e,filename:t,uploadUsername:a,fileSize:n,musicSrc:i,filenameOrigin:r,duration:c,songOriginal:s,musicId:l,payDownload:m})}})(t,N.filename,N.uploadUsername,N.fileSize,N.filePath,N.filenameOrigin,N.duration,N.original,N.id,Number(N.payDownload))})),M?i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"open-with-browser"},i.a.createElement("div",{className:"text1"},"链接打不开?"),i.a.createElement("div",{className:"text2"},"请点击右上角 ",i.a.createElement("strong",null,". . .")),i.a.createElement("div",{className:"text2"},'选择在"浏览器"打开')),i.a.createElement("div",{className:"overlay",onClick:()=>$(!1)})):null))})},258:function(e,t,a){"use strict";var n=a(0),i=a.n(n);t.a=(()=>i.a.createElement("svg",{className:"like-btn",width:"56px",height:"56px",viewBox:"0 0 56 56",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.a.createElement("g",null,i.a.createElement("rect",{fillRule:"nonzero",x:"0",y:"0",width:"56",height:"56",rx:"28"}),i.a.createElement("g",{transform:"translate(27.000000, 5.000000)",fillRule:"nonzero",stroke:"#FD5F66",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"},i.a.createElement("path",{d:"M1,0 L1,5",id:"path-3"}),i.a.createElement("path",{d:"M1.5,41 L1.5,46",id:"path-2"})),i.a.createElement("g",{transform:"translate(28.000000, 28.000000) rotate(60.000000) translate(-28.000000, -28.000000) translate(27.000000, 5.000000)",fillRule:"nonzero",stroke:"#FD5F66",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"},i.a.createElement("path",{d:"M1,-2.27373675e-13 L1,5",id:"path-3"}),i.a.createElement("path",{d:"M1.5,41 L1.5,46",id:"path-2"})),i.a.createElement("path",{id:"fill-3",fill:"#7D878F",fillRule:"nonzero",d:"M28.153959,20.8677974 L28.3060347,20.7157217 C30.5936636,18.4280928 34.3036142,18.4280928 36.5912431,20.7157217 L35.8841363,21.4228284 L36.5912431,20.7157217 C38.878872,23.0033505 38.878872,26.7133011 36.5912431,29.00093 L28.153959,37.4382141 L20.5758574,29.8601125 L19.7169046,29.0011596 C17.4277368,26.7134783 17.4277368,23.0031734 19.7166749,20.7157217 C22.0043038,18.4280928 25.7142544,18.4280928 28.0018832,20.7157217 L28.153959,20.8677974 Z M35.8841363,21.4228284 L35.1770295,22.1299352 C33.6704492,20.6233549 31.2268286,20.6233549 29.7202483,22.1299352 L28.153959,23.6962245 L26.5876697,22.1299352 C25.0810894,20.6233549 22.6374687,20.6233549 21.1306588,22.1301648 C19.623152,23.6366927 19.623152,26.079959 21.1308885,27.5867165 L28.153959,34.609787 L35.1770295,27.5867165 C36.6836098,26.0801362 36.6836098,23.6365155 35.1770295,22.1299352 L35.8841363,21.4228284 Z"}),i.a.createElement("path",{id:"heart-color",d:"M28.153959,20.8677974 L28.3060347,20.7157217 C30.5936636,18.4280928 34.3036142,18.4280928 36.5912431,20.7157217 L35.8841363,21.4228284 L36.5912431,20.7157217 C38.878872,23.0033505 38.878872,26.7133011 36.5912431,29.00093 L28.153959,37.4382141 L20.5758574,29.8601125 L19.7169046,29.0011596 C17.4277368,26.7134783 17.4277368,23.0031734 19.7166749,20.7157217 C22.0043038,18.4280928 25.7142544,18.4280928 28.0018832,20.7157217 L28.153959,20.8677974 Z"}),i.a.createElement("g",{transform:"translate(28.000000, 28.000000) rotate(120.000000) translate(-28.000000, -28.000000) translate(27.000000, 5.000000)",fillRule:"nonzero",stroke:"#FD5F66",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"},i.a.createElement("path",{d:"M1,4.54747351e-13 L1,5",id:"path-3"}),i.a.createElement("path",{d:"M1.5,41 L1.5,46",id:"path-2"}))))))}}]);