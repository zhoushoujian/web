(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{336:function(e,t,a){"use strict";var s=a(0),n=a.n(s),o=a(337);t.a=(({centerText:e="",backToPreviousPage:t=(()=>{}),rightText:a="",rightTextFunc:r=(()=>{})})=>n.a.createElement(s.Fragment,null,n.a.createElement(o.a,null),n.a.createElement("div",{className:"navbar-container"},n.a.createElement("div",{className:"back-btn",onClick:t},n.a.createElement("i",{className:"fa fa-angle-left","aria-hidden":"true"})),n.a.createElement("div",{className:"center-text"},e),n.a.createElement("div",{className:"other-text",onClick:r},a))))},337:function(e,t,a){"use strict";var s=a(0),n=a.n(s);t.a=(()=>n.a.createElement("div",{className:"top-status-bar"}))},345:function(e,t,a){"use strict";var s=a(0),n=a.n(s),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e};const r=Object(s.forwardRef)((e,t)=>{const{type:a="text",placeholder:s="",value:r="",handleKeyDown:c=(()=>{}),handleChange:i=(()=>{}),maxLength:l=26,style:h={},handleClick:u=(()=>{}),handleBlur:d=(()=>{}),className:m,disabled:p=!1}=e;return n.a.createElement("input",o({},e,{className:`input-component ${m}`,type:a,placeholder:s,value:r,onKeyDown:c,onChange:i,maxLength:l,autoComplete:"off",style:h,onClick:u,onBlur:d,ref:t,disabled:p}))});t.a=r},384:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var s=a(0),n=a.n(s);class o extends s.Component{render(){const{item:e,query:t,select:a}=this.props,s=e.toLowerCase().indexOf(t.toLowerCase()),o=t.length,r=e.slice(0,s)+"<b>"+e.slice(s,s+o)+"</b>"+e.slice(s+o);return n.a.createElement("div",{className:"auto-suggest-name",onClick:()=>a(e),dangerouslySetInnerHTML:{__html:r}})}}},566:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),o=a(95),r=a(47),c=a.n(r),i=a(9),l=a(336),h=a(384),u=a(345);class d extends s.Component{render(){const{item:e}=this.props;return n.a.createElement("div",{className:"record-container"},n.a.createElement("div",{className:"date-record"},e.date),n.a.createElement("div",{className:"location-record"},e.location))}}t.default=Object(o.connect)(e=>({username:e.login.username,token:e.login.token,setMobile:e.myInfo.setMobile}),()=>({}))(class extends s.Component{constructor(e){super(e),this.searchRecord=((e=30)=>{const{clickShowMoreCount:t}=this.state,{token:a}=this.props;if(!a)return goRoute(this,"/login");const{searchString:s}=this.state;return Object(i.P)(s,e).then(e=>{e?(this.signDataCount=e.totalCount,this.signDataCount?(e=c()(e.signData,["date"],["desc"]),this.setState({recordList:e||[],showMoreText:"查看更多"},()=>{this.checkBottomText&&(this.checkBottomText=!1,this.signDataCount<=30*t&&setTimeout(()=>{this.historyBottom.style.display="flex"}))})):this.setState({recordList:[{date:"无历史记录"}]})):this.setState({recordList:[{date:"无历史记录"}]})})}),this.keyDownEvent=(e=>{const t=e,{token:a}=this.props;if(13===t.keyCode)return this.blur(),a?(this.setState({clickShowMoreCount:1}),this.searchRecord()):goRoute(this,"/login")}),this.backToMainPage=(()=>{goRoute(this,"/search_column")}),this.blur=(()=>{setTimeout(()=>{this.setState({ulPadding:"0",ulDisplay:"none"})},300)}),this.select=(e=>{this.setState({searchString:e,clickShowMoreCount:1,ulPadding:"0",ulDisplay:"none"},this.searchRecord)}),this.showMore=(()=>{let{clickShowMoreCount:e}=this.state;this.setState({clickShowMoreCount:++e,showMoreText:"正在查询..."}),this.searchRecord(30*e),this.checkBottomText=!0}),this.state={recordList:[],searchString:e.token?e.username||e.setMobile:"",autoSuggestList:[],clickShowMoreCount:1,showMoreText:"查看更多",ulPadding:"0",ulDisplay:"block"}}componentDidMount(){const{token:e}=this.props;e&&(this.setState({recordList:[{date:"正在查询..."}]}),this.searchRecord())}render(){const{recordList:e,searchString:t,autoSuggestList:a,clickShowMoreCount:s,showMoreText:o,ulPadding:r,ulDisplay:c}=this.state,m=e.length,{token:p}=this.props;return n.a.createElement("div",{className:"search-history-container"},n.a.createElement(l.a,{centerText:"搜索签到历史",backToPreviousPage:this.backToMainPage}),n.a.createElement("div",{className:"search-header"},n.a.createElement("div",{className:"search-input"},n.a.createElement(u.a,{value:t,placeholder:p?t:"请输入您要搜索的用户名",handleChange:e=>Object(i.U)(e.target.value,this),handleKeyDown:this.keyDownEvent,handleBlur:this.blur,className:"search-input-content"}),n.a.createElement("div",{className:"ul",style:{padding:r,display:c}},a.length?a.map((e,a)=>n.a.createElement(h.a,{key:a,item:e,query:t,select:this.select})):null),n.a.createElement("i",{className:"fa fa-search","aria-hidden":"true"}))),n.a.createElement("div",{className:"record-list-container"},m?e.map((e,t)=>n.a.createElement(d,{item:e,key:t})):null,this.signDataCount>30*s?n.a.createElement("div",{className:"show-more",onClick:this.showMore},o):n.a.createElement("div",{className:"show-more bottom",ref:e=>this.historyBottom=e},n.a.createElement("span",null,"______________"),"我是有底线的",n.a.createElement("span",null,"______________"))))}})}}]);