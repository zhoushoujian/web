(window.webpackJsonp=window.webpackJsonp||[]).push([[23,5],{345:function(e,a,t){"use strict";var i=t(0),l=t.n(i),s=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};const c=Object(i.forwardRef)((e,a)=>{const{type:t="text",placeholder:i="",value:c="",handleKeyDown:n=(()=>{}),handleChange:r=(()=>{}),maxLength:o=26,style:u={},handleClick:d=(()=>{}),handleBlur:m=(()=>{}),className:h,disabled:f=!1}=e;return l.a.createElement("input",s({},e,{className:`input-component ${h}`,type:t,placeholder:i,value:c,onKeyDown:n,onChange:r,maxLength:o,autoComplete:"off",style:u,onClick:d,onBlur:m,ref:a,disabled:f}))});a.a=c},346:function(e,a,t){"use strict";t(96),t(317)},347:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=d(t(14)),l=d(t(25)),s=d(t(16)),c=d(t(17)),n=d(t(15)),r=d(t(18)),o=d(t(26)),u=function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a.default=e,a}(t(0));function d(e){return e&&e.__esModule?e:{default:e}}var m=function(e,a){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&a.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)a.indexOf(i[l])<0&&(t[i[l]]=e[i[l]])}return t},h=function(e){function a(){return(0,s.default)(this,a),(0,n.default)(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return(0,r.default)(a,e),(0,c.default)(a,[{key:"render",value:function(){var e,a,t=this.props,s=t.className,c=t.prefixCls,n=t.children,r=t.text,d=t.size,h=t.overflowCount,f=t.dot,g=t.corner,O=t.hot,S=m(t,["className","prefixCls","children","text","size","overflowCount","dot","corner","hot"]);h=h,r="number"==typeof r&&r>h?h+"+":r,f&&(r="");var p=(0,o.default)((e={},(0,l.default)(e,c+"-dot",f),(0,l.default)(e,c+"-dot-large",f&&"large"===d),(0,l.default)(e,c+"-text",!f&&!g),(0,l.default)(e,c+"-corner",g),(0,l.default)(e,c+"-corner-large",g&&"large"===d),e)),b=(0,o.default)(c,s,(a={},(0,l.default)(a,c+"-not-a-wrapper",!n),(0,l.default)(a,c+"-corner-wrapper",g),(0,l.default)(a,c+"-hot",!!O),(0,l.default)(a,c+"-corner-wrapper-large",g&&"large"===d),a));return u.createElement("span",{className:b},n,(r||f)&&u.createElement("sup",(0,i.default)({className:p},S),r))}}]),a}(u.Component);a.default=h,h.defaultProps={prefixCls:"am-badge",size:"small",overflowCount:99,dot:!1,corner:!1},e.exports=a.default},350:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){return Object.keys(e).reduce(function(a,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(a[t]=e[t]),a},{})},e.exports=a.default},358:function(e,a,t){"use strict";t(353);var i=t(354),l=t.n(i),s=(t(348),t(349)),c=t.n(s),n=(t(150),t(69)),r=t.n(n),o=t(0),u=t.n(o),d=t(95),m=t(4),h=t(98),f=t(361),g=t(8),O=t(371),S=t(38),p=t(1),b=t(3),v=t(11),M=t(9),j=t(2),y=t(31),E=t(24),w=t(34);let N;new RegExp("\\biPhone\\b|\\biPod\\b","i").test(navigator.userAgent)&&(N={onTouchStart:e=>e.preventDefault()});let $=0;const R={action:null};a.a=Object(d.connect)(e=>({soundPlaying:e.fileServer.soundPlaying,soundInstance:e.fileServer.soundInstance,currentPlayingSong:e.fileServer.currentPlayingSong,currentSongTime:e.fileServer.currentSongTime,pauseWhenOver:e.fileServer.pauseWhenOver,playByOrder:e.fileServer.playByOrder,musicCollection:e.fileServer.musicCollection,musicMenuBadge:e.fileServer.musicMenuBadge,username:e.login.username,token:e.login.token,playByRandom:e.fileServer.playByRandom,lastMusicSearchResult:e.fileServer.lastMusicSearchResult,lastSearchAllMusicResult:e.fileServer.lastSearchAllMusicResult,downloadingMusicItems:e.fileServer.downloadingMusicItems,downloadedMusicList:e.fileServer.downloadedMusicList,currentPlayingSongOriginal:e.fileServer.currentPlayingSongOriginal,recentMusicList:e.fileServer.recentMusicList,setMobile:e.myInfo.setMobile,setPermisssions:e.myInfo.setPermisssions,showMusicPlayingFromMusicControl:e.fileServer.showMusicPlayingFromMusicControl,notExistMusicPlayingPage:e.fileServer.notExistMusicPlayingPage,musicPlayListData:e.fileServer.musicPlayListData,musicSharePosition:e.fileServer.musicSharePosition,musicSavePosition:e.fileServer.musicSavePosition,musicRecentPosition:e.fileServer.musicRecentPosition,musicHomePosition:e.fileServer.musicHomePosition,mySongList:e.fileServer.mySongList}),()=>({}))(({original:e,soundInstance:a,currentPlayingSong:t,currentSongTime:i,soundPlaying:s,pageType:n,pauseWhenOver:d,playByOrder:k,musicCollection:A=[],musicMenuBadge:x,username:P,token:F,playByRandom:C,setMobile:L,setPermisssions:Q,musicDataList:q,lastMusicSearchResult:K,lastSearchAllMusicResult:D,recentMusicList:I,noShowMusicPlaying:W=!1,myMusicPage:_=!1,searchMusicPage:G=!1,notExistMusicPlayingPage:T=!1,musicPlayerRef:J,musicPlayListData:H,height:B,musicSharePosition:z,musicSavePosition:U,musicRecentPosition:V,musicHomePosition:Y,mySongList:Z})=>{const X=Object(w.n)(),ee=Object(w.m)(),ae=Object(w.l)(),te=Object(w.k)(),ie=Object(m.useHistory)();Object(o.useEffect)(()=>(h.Howler.volume(.8),e!==j.a.musicOriginal.musicDownloading&&a&&Object(M.t)(),document.addEventListener("deviceready",le,!1),()=>{X?$dispatch(Object(p.S)($)):ee?$dispatch(Object(p.R)($)):ae?$dispatch(Object(p.Q)($)):te&&$dispatch(Object(p.L)($)),document.removeEventListener("deviceready",le,!1),document.removeEventListener("backbutton",se,!1)}),[]);const le=()=>{document.addEventListener("backbutton",se,!1)},se=()=>{if(!window.cancelMenuFirst&&!window.specialBack)if($getState().fileServer.showMusicPlayingFromMusicControl||Object(b.h)())Object(b.z)();else if(_)Object(b.b)("/my_song_lists_detail"===getRoute()?"/my_song_lists_page":"/my_download_middle_page",!0);else{if(!G)return;Object(b.b)("/search_column",!0)}},ce=()=>{window.cancelMenuFirst=!0,document.addEventListener("backbutton",re)},ne=()=>{window.cancelMenuFirst&&(window.cancelMenuFirst=!1,document.removeEventListener("backbutton",re),document.removeEventListener("deviceready",ce),document.addEventListener("backbutton",b.r))},re=()=>{const e=document.querySelector(".am-action-sheet-button-list div:nth-last-child(1)");e&&e.click(),R.action&&(R.action.close(),R.action=null),ne()},oe=(e,a,t,i,l,s,c)=>{Object(b.j)("提示",u.a.createElement(S.a,{textFragment:`确定从本地删除 <span class="delete-alert">${e}</span> 吗`}),"确定",()=>Object(M.G)(Object(M.H)(a),"music").then(()=>{ue(s,a),a===t&&Object(M.q)(i,l,s,c)}).catch(e=>{logger.error("删除音乐过程中发生了错误 isFileFinished",e.stack||e.toString()),Object(b.q)(e,`musicPlayer removeFileFromDownload filenameOrigin: ${a}`)}))},ue=(e,a)=>{if(e===j.a.musicOriginal.musicSearch){let e,t;K.some((t,i)=>Object(M.H)(t.filenameOrigin)===Object(M.H)(a)&&(e=i,!0));const i=JSON.parse(JSON.stringify(K));i.splice(e,1),D.some((e,i)=>Object(M.H)(e.filenameOrigin)===Object(M.H)(a)&&(t=i,!0));const l=JSON.parse(JSON.stringify(D));l.splice(t,1),$dispatch(Object(p.y)(i)),$dispatch(Object(p.G)(l))}},de=(m,h)=>u.a.createElement(o.Fragment,null,u.a.createElement("div",{className:"music-content",onClick:()=>Object(M.o)({filePath:m.filePath,filename:m.filename,filenameOrigin:m.filenameOrigin,uploadUsername:m.uploadUsername,fileSize:m.fileSize,duration:m.duration,songOriginal:m.original,original:e,musicDataList:q,pageType:n,payPlay:Number(m.payPlay),musicId:m.id,songInfo:m})},u.a.createElement("div",{className:`num ${Object(b.d)(h+1)}`},h+1),u.a.createElement("div",{className:"music-info"},u.a.createElement("div",{className:`info ${m.saved&&n!==j.a.musicOriginal.savedSongs?"song-saved":""}`},u.a.createElement("div",{className:`filename ${me?m.saved?"downloading-save":"downloading":""}`,dangerouslySetInnerHTML:{__html:Object(M.s)(m.filename)}}),Number(m.payPlay)?u.a.createElement("i",{className:"fa fa-lock copyright-song-flag","aria-hidden":"true"}):"",m.saved&&n!==j.a.musicOriginal.savedSongs&&u.a.createElement("i",{className:"fa fa-heart saved-song-flag","aria-hidden":"true"}),e!==j.a.musicOriginal.homeRecommend&&"onlineMusic"!==n&&"onlineMusicSearchALl"!==n?m.original===j.a.musicOriginal.netEaseCloud||m.original===j.a.musicOriginal.homeRecommend?u.a.createElement("div",{className:"net-ease-source-flag"},"网易云"):m.original===j.a.musicOriginal.qqMusic?u.a.createElement("div",{className:"qq-music-source-flag"},"QQ音乐"):m.original===j.a.musicOriginal.kuGouMusic?u.a.createElement("div",{className:"ku-gou-music-source-flag"},"酷狗音乐"):m.original===j.a.musicOriginal.kuWoMusic?u.a.createElement("div",{className:"ku-wo-music-source-flag"},"酷我音乐"):null:null,m.mvId?u.a.createElement("i",{className:"fa fa-youtube-play","aria-hidden":"true",onClick:e=>((e,a,t,i)=>{e.stopPropagation(),ie.push({pathname:"/music_mv_Player",query:{mvId:a,original:t,filename:Object(M.J)(i),lastLocation:getRoute()}})})(e,m.mvId,m.original,m.filename)}):null,me?u.a.createElement("div",{className:"song-duration-time downloading"},m.progress):null),t===m.filenameOrigin?((e,a,t)=>u.a.createElement("div",{className:"audio-player"},u.a.createElement("audio",{preload:"auto",className:"audio-selector"},u.a.createElement("source",{src:e})),u.a.createElement("div",{className:"audio-player-time audio-player-time-current"},Object(M.Q)(a)),u.a.createElement("div",{className:"audio-player-bar"},u.a.createElement("div",{className:"audio-player-bar-loaded",style:{width:"100%"}}),u.a.createElement("div",{className:"audio-player-bar-played",style:{width:a/t*100+"%"}})),u.a.createElement("div",{className:"audio-player-time audio-player-time-duration"},Object(M.Q)(t))))(m.filePath,i,m.duration):u.a.createElement("div",{className:"upload-duration"},u.a.createElement("div",{className:`upload-user ${me?"downloading":""}`},m.uploadUsername||"未知",(a=>a?e!==j.a.musicOriginal.musicDownloading?("number"==typeof a&&(a=new Date(a).format("yyyy-MM-dd")),e===j.a.musicOriginal.musicShare||e===j.a.musicOriginal.musicSearch||e===j.a.musicOriginal.musicFinished?" "+a.split(" ")[0]:""):void 0:"")(m.date)),me?u.a.createElement("div",{className:"download-progress"},u.a.createElement(l.a,{percent:m.received?m.received/m.fileSize*100:0,position:"normal"})):u.a.createElement("div",{className:`song-duration-time ${Object(b.d)(h+1)}`},Object(M.Q)(m.duration)))),!s&&e!==j.a.musicOriginal.musicDownloading&&t===m.filenameOrigin&&u.a.createElement("div",{className:"pause-button-overlay"},u.a.createElement("div",{className:"pause-button"},u.a.createElement("div",{className:"triangle"})))),e!==j.a.musicOriginal.musicDownloading?u.a.createElement("div",{className:"menu",onClick:((i,l,o,m,h,f,O,E,w,$,K,D)=>{const W=r.a.operation;document.removeEventListener("backbutton",b.r,!1),document.addEventListener("deviceready",ce),i=Object(M.J)(i);const _=JSON.parse(JSON.stringify(x)),G=A.map(e=>Object(M.H)(e.filenameOrigin)),T=["播放",-1!==G.indexOf(Object(M.H)(o))?"已收藏":"收藏","单曲播放","单曲循环","顺序播放","随机播放","添加到播放列表","添加到歌单","下载","删除","取消"];s&&o===t&&(T[0]="暂停"),$=e===j.a.musicOriginal.musicShare||e===j.a.musicOriginal.musicSearch?` ${$}`:"";const J={options:T,cancelButtonIndex:T.length-1,destructiveButtonIndex:T.length-2,badges:_,message:l?`大小: ${Object(M.b)(l)}${$}`:$,title:i,maskClosable:!0,"data-seed":"logId",wrapProps:N};e!==j.a.musicOriginal.musicShare&&e!==j.a.musicOriginal.musicSearch||Q.removeMusic||(T.splice(-2,1),delete J.destructiveButtonIndex),e===j.a.musicOriginal.musicFinished?(T.splice(8,1),J.destructiveButtonIndex=T.length-2):((n===j.a.musicOriginal.savedSongs||"onlineMusic"===n||"onlineMusicSearchALl"===n&&e!==j.a.musicOriginal.musicSearch||n===j.a.musicOriginal.homeRecommend||n===j.a.musicOriginal.musicPlayList)&&(T.splice(-2,1),delete J.destructiveButtonIndex,n===j.a.musicOriginal.musicPlayList&&(T[6]="移除")),E&&_.push({index:8,text:"版"})),c.a.showActionSheetWithOptions(J,s=>{logger.info("music player showMenu buttonIndex",s);const c=q.map(e=>e.filenameOrigin),r=c.indexOf(o);if(-1===r)return logger.error("showActionSheetWithOptions currentFileIndex === -1 filename",i),alert(i+"已被删除");const N=q[r].filePath;switch(s){case 0:Object(M.o)({filePath:N,filename:i,filenameOrigin:o,uploadUsername:m,fileSize:l,duration:h,songOriginal:f,original:e,musicDataList:q,pageType:n,payPlay:O,musicId:w,songInfo:D});break;case 1:Object(M.O)({savedMusicFilenameOriginalArr:G,filenameOrigin:o,musicCollection:A,musicDataList:q,currentFileIndex:r,original:e,e:null,pageType:n});break;case 2:(!d||k||C)&&(a&&a.loop(!1),$dispatch(Object(p.jb)(!0)),$dispatch(Object(p.kb)(!1)),$dispatch(Object(p.lb)(!1)),alert("单曲播放"),$dispatch(Object(p.N)([{index:2,text:"✔️"},{index:3,text:""},{index:4,text:""},{index:5,text:""}])));break;case 3:d&&(a&&a.loop(!0),$dispatch(Object(p.jb)(!1)),$dispatch(Object(p.kb)(!1)),$dispatch(Object(p.lb)(!1)),alert("单曲循环"),$dispatch(Object(p.N)([{index:2,text:""},{index:3,text:"✔️"},{index:4,text:""},{index:5,text:""}])));break;case 4:k||(a&&a.loop(!1),$dispatch(Object(p.jb)(!0)),$dispatch(Object(p.kb)(!0)),$dispatch(Object(p.lb)(!1)),alert("顺序播放"),$dispatch(Object(p.N)([{index:2,text:""},{index:3,text:""},{index:4,text:"✔️"},{index:5,text:""}])));break;case 5:C||(a&&a.loop(!1),$dispatch(Object(p.jb)(!0)),$dispatch(Object(p.kb)(!1)),$dispatch(Object(p.lb)(!0)),alert("随机播放"),$dispatch(Object(p.N)([{index:2,text:""},{index:3,text:""},{index:4,text:""},{index:5,text:"✔️"}])));break;case 6:{let e=JSON.parse(JSON.stringify(H));if(n!==j.a.musicOriginal.musicPlayList){if(O&&!$getState().myInfo.setMusicVip)return alert("不可以添加有版权的音乐");{let a=JSON.parse(JSON.stringify(D));a.pageType=n,e.push(a);const t={};e=e.filter(e=>!t[e.filenameOrigin]&&(t[e.filenameOrigin]=!0,!0)),a=null,alert("添加成功")}}else e=e.filter(e=>e.filenameOrigin!==D.filenameOrigin),alert("已取消");$dispatch(Object(p.P)(e));break}case 7:if(Object.keys(Z).length){const e=Object(M.y)({musicDataList:q,currentFileIndex:r,filenameOrigin:o,operationAction:R,removeListenBackFunc:ne});if(e.length)return void(R.action=W(e));alert("没有其他歌单了");break}alert("请先创建歌单");break;case 8:e===j.a.musicOriginal.musicFinished?oe(i,o,t,r,c,e,q):Object(M.N)({musicDataList:q,filename:i,uploadUsername:m,fileSize:l,musicSrc:N,filenameOrigin:o,duration:h,songOriginal:f,musicId:w,payDownload:E,mvId:D.mvId,md5:D.md5,albumId:D.albumId});break;case 9:{if(ne(),("onlineMusic"===n||"onlineMusicSearchALl"===n||e===j.a.musicOriginal.musicFinished)&&e!==j.a.musicOriginal.musicSearch)return;if(!F)return goRoute(void 0,"/login");const a={username:P||L,token:F,filename:i,type:"default-music"};if(e!==j.a.musicOriginal.musicShare&&e!==j.a.musicOriginal.musicSearch||"downloaded"===K)e===j.a.musicOriginal.musicRecent?Object(b.j)("提示",u.a.createElement(S.a,{textFragment:`确定要删除 <span class="delete-alert">${i}</span> 的播放记录吗`}),"确定",()=>{let a=null;if(I.some((e,t)=>e.filenameOrigin===o&&(a=t,!0)),null!==a){const i=JSON.parse(JSON.stringify(I));if(i.splice(a,1),$dispatch(Object(p.nb)(i)),Object(y.c)(o),o===t){const a=JSON.parse(JSON.stringify(I));Object(M.q)(r,c,e,a)}}else logger.error("确定要删除播放记录吗 filenameOrigin, recentMusicList",o,I)}):"downloaded"===K?oe(i,o,t,r,c,e,q):n===j.a.musicOriginal.myMusicListPage&&Object(M.I)(o,i);else{if(!Q.removeMusic)return;Object(b.j)("提示",u.a.createElement(S.a,{textFragment:`确定要从服务器删除 <span class="delete-alert">${i}</span> 吗`}),"确定",()=>(Object(b.B)(),axios.delete(g.a.delFileV2,{data:a}).then(a=>{if(window.toast.hide(),!window.cancelAxiosRequest)return"success"===a.result?($dispatch(Object(v.i)(a.token)),alert("删除成功"),ue(e,o)):"file_deleted"===a.result?(alert("文件已删除!"),ue(e,o)):void logger.error("HTTP_URL.delFileV2 result",a)}).then(()=>{o===t&&Object(M.q)(r,c,e,q)}).catch(e=>{window.toast.hide(),logger.error("HTTP_URL.delFileV2 err",e),Object(b.q)(e,`musicPlayer delFile filenameOrigin: ${o}`)}).finally(()=>{window.cancelAxiosRequest=!1})))}return}}ne()})}).bind(void 0,m.filename,m.fileSize,m.filenameOrigin,m.uploadUsername,m.duration,m.original,Number(m.payPlay),Number(m.payDownload),m.id,m.date,m.status,m)},u.a.createElement("div",{className:"dot"}),u.a.createElement("div",{className:"dot"}),u.a.createElement("div",{className:"dot"})):u.a.createElement("div",{className:"move-downloading-item fa fa-remove",onClick:((e,a)=>{Object(b.j)("提示",u.a.createElement(S.a,{textFragment:`确定要移除下载 <span class="delete-alert">${e}</span> 吗`}),"确定",()=>{const e=Object(M.H)(a);window.eventEmit.$emit(`FileTransfer-${e}`,"abort"),window[`remove-download-${e}`]=!0,setTimeout(()=>{window[`remove-download-${e}`]=!1},1500);const{downloadingMusicItems:t}=$getState().fileServer,i=JSON.parse(JSON.stringify(t));for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&t[e].filenameOrigin===a){i.splice(e,1),$dispatch(Object(p.o)(i)),Object(E.c)(a);break}logger.info("saveFileToLocal param, downloadingMusicItems",t)})}).bind(void 0,m.filename,m.filenameOrigin)}));Object(M.n)(q,n);const me=e===j.a.musicOriginal.musicDownloading;let he=0;return X&&z?he=z:ee&&U?he=U:ae&&V?he=V:te&&Y&&(he=Y),u.a.createElement(o.Fragment,null,u.a.createElement("div",{className:"music-list-container",style:{height:n===j.a.musicOriginal.musicFinished?"auto":"100%"},ref:J},B?u.a.createElement(f.a,{width:window.screen.width,height:B,rowCount:q.length,rowHeight:66,onScroll:({scrollTop:e})=>{$=e,X&&z?$dispatch(Object(p.S)(0)):ee&&U?$dispatch(Object(p.R)(0)):ae&&V?$dispatch(Object(p.Q)(0)):te&&Y&&$dispatch(Object(p.L)(0))},scrollTop:he||void 0,rowRenderer:({key:e,index:a,style:t})=>u.a.createElement("div",{key:e,style:t,className:"music-list",id:Object(w.d)(q[a].filenameOrigin)},de(q[a],a))}):q.map((e,a)=>u.a.createElement("div",{key:e.filenameOrigin,className:"music-list",id:Object(w.d)(e.filenameOrigin)},de(e,a)))),n===j.a.musicOriginal.savedSongs&&u.a.createElement("div",{className:"music-picture"}),!W&&!T&&u.a.createElement(O.default,{fromMusicControl:!0,myMusicPage:_,searchMusicPage:G}))})},365:function(e,a,t){"use strict";t(353);var i=t(354),l=t.n(i),s=(t(348),t(349)),c=t.n(s),n=t(0),r=t.n(n),o=t(4),u=t(95),d=t(375),m=t.n(d),h=t(361),f=t(38),g=t(3),O=t(8),S=t(2),p=t(11),b=t(9),v=t(1),M=t(20),j=t(34);function y(e){return function(){var a=e.apply(this,arguments);return new Promise(function(e,t){return function i(l,s){try{var c=a[l](s),n=c.value}catch(e){return void t(e)}if(!c.done)return Promise.resolve(n).then(function(e){i("next",e)},function(e){i("throw",e)});e(n)}("next")})}}let E;new RegExp("\\biPhone\\b|\\biPod\\b","i").test(navigator.userAgent)&&(E={onTouchStart:e=>e.preventDefault()});let w=0;a.a=Object(u.connect)(e=>({username:e.login.username,token:e.login.token,downloadingFileList:e.fileServer.downloadingFileList,lastFileSearchResult:e.fileServer.lastFileSearchResult,lastSearchAllFileResult:e.fileServer.lastSearchAllFileResult,setMobile:e.myInfo.setMobile,setPermisssions:e.myInfo.setPermisssions,downloadedFileList:e.fileServer.downloadedFileList,fileSharePosition:e.fileServer.fileSharePosition}),()=>({}))(({username:e,token:a,downloadingFileList:t,downloadedFileList:i,lastFileSearchResult:s,lastSearchAllFileResult:u,setMobile:d,setPermisssions:N={},fileDataList:$=[],original:R,height:k,fileSharePosition:A})=>{const x="fileDownloading"===R,P=Object(j.j)(),F=Object(o.useHistory)();Object(n.useEffect)(()=>()=>{P&&$dispatch(Object(v.q)(w))},[]);const C=()=>{window.cancelMenuFirst=!0,document.addEventListener("backbutton",L,!1)},L=()=>{window.cancelMenuFirst=!1;const e=document.querySelector(".am-action-sheet-button-list div:nth-last-child(1)");e&&e.click(),e&&e.click()},Q=(()=>{var e=y(function*(e,a,t,l,s,n,o,u){try{document.removeEventListener("backbutton",g.r,!1),document.addEventListener("deviceready",C),e=Object(b.J)(e);let d="下载",m="fileFinished"===R;m?d="打开":"fileShare"!==R&&"fileSearch"!==R||i.some(function(e){return!(Object(b.H)(e.filenameOrigin)!==Object(b.H)(s)||e.status&&"downloaded"!==e.status||(d="打开",m=!0,0))});const h=[d,"分享","删除","取消"];"fileFinished"===R||"downloaded"===o?(h.splice(1,1),n=""):"fileShare"===R&&(n=` ${n}`),"fileShare"!==R&&"fileSearch"!==R||(isCordova?N.removeFile||h.splice(2,1):(h.splice(1,1),N.removeFile||h.splice(1,1)));const O={options:h,cancelButtonIndex:h.length-1,destructiveButtonIndex:h.length-2,message:`大小: ${Object(b.b)(a)}${n}`,title:e,maskClosable:!0,"data-seed":"logId",wrapProps:E};c.a.showActionSheetWithOptions(O,function(i){switch(logger.info("file manage showMenu buttonIndex",i),i){case 0:m?D(e,s):Object(b.M)(e,l,a,t,!1,s,F,D,u);break;case 1:if("fileFinished"===R||"downloaded"===o)Object(g.j)("提示",r.a.createElement(f.a,{textFragment:`确定从本地删除 <span class="delete-alert">${e}</span> 吗`}),"确定",function(){Object(b.G)(Object(b.H)(s),"file").then(function(){K(R,s)}).catch(function(a){logger.error("删除文件过程中发生了错误 isFileFinished",a.stack||a.toString()),Object(g.q)(a,`fileManage removeFileFromDownload filename ${e}`)})});else if(isCordova){const i=`${S.a.appStaticDirectory}#/show_file_info?filename=${e}&fileSize=${Object(b.b)(a)}&filePath=${t}`;Object(g.w)({title:e,description:"我分享了一个文件,快来看看吧",thumb:`${S.a.appStaticDirectory}logo.png`,webpageUrl:i})}else N.removeFile&&q(e,s);break;case 2:isCordova&&("fileShare"===R||"fileSearch"===R)&&"downloaded"!==o&&N.removeFile&&q(e,s);break;default:logger.warn("buttonIndex default")}window.cancelMenuFirst=!1,document.removeEventListener("backbutton",L),document.removeEventListener("deviceready",C),document.addEventListener("backbutton",g.r,!1)})}catch(e){logger.error("fileManage showMenu err",e)}});return function(a,t,i,l,s,c,n,r){return e.apply(this,arguments)}})(),q=(t,i)=>{if(!a)return goRoute(void 0,"/login");const l={username:e||d,token:a,filename:t,type:"default-file"};Object(g.j)("提示",r.a.createElement(f.a,{textFragment:`确定从服务器删除 <span class="delete-alert">${t}</span> 吗`}),"确定",()=>(Object(g.B)(),axios.delete(O.a.delFileV2,{data:l}).then(e=>{if(window.toast.hide(),!window.cancelAxiosRequest)return"file_deleted"===e.result?(alert("文件已删除!"),$dispatch(Object(p.i)(e.token)),K(R,i)):"success"===e.result?(alert("删除成功!"),$dispatch(Object(p.i)(e.token)),K(R,i)):void alert("删除失败!")}).catch(e=>{window.toast.hide(),logger.error("删除文件过程中发生了错误",e.stack||e.toString()),Object(g.q)(e,`delFile dataInfo: ${JSON.stringify(l)}`)}).finally(()=>{window.cancelAxiosRequest=!1})))},K=(e,a)=>{if("fileSearch"===e){let e,t;s.some((t,i)=>t.filenameOrigin===a&&(e=i,!0));const i=JSON.parse(JSON.stringify(s));i.splice(e,1),u.some((e,i)=>e.filenameOrigin===a&&(t=i,!0));const l=JSON.parse(JSON.stringify(u));u.splice(t,1),$dispatch(Object(v.u)(i)),$dispatch(Object(v.D)(l))}},D=(e,a)=>{let t=m.a.lookup(e);t||(t="text/plain",alert("不支持打开的的文件类型，请提交反馈")),Object(b.x)(e,t,Object(b.H)(a))},I=(()=>{var e=y(function*(e,a,i,l,s,c){e=Object(b.J)(e),"fileFinished"===R?D(e,s):"fileShare"===R||"fileSearch"===R?yield Object(b.M)(e,a,i,l,!1,s,F,D,c):"fileDownloading"===R&&t.some(function(t){return t.filenameOrigin===s&&(s=s.replace(/^downloading_/,""),logger.info("downloadOrOpenFile filenameOrigin",s),"失败"===t.progress||"已取消"===t.progress?Object(b.M)(e,a,i,l,!0,s,F,D,c):(window.eventEmit.$emit(`FileTransfer-${s}`,"abort"),setTimeout(function(){window[`cancel-download-${Object(b.H)(s)}`]||Object(b.M)(e,a,i,l,!0,s,F,D,c)},500)),!0)})});return function(a,t,i,l,s,c){return e.apply(this,arguments)}})(),W=(e,a)=>r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:`file-content ${x?"downloading":""}`,onClick:I.bind(void 0,e.filename,e.uploadUsername,e.fileSize,e.filePath,e.filenameOrigin,e.md5)},r.a.createElement("div",{className:`num ${Object(g.d)(a+1)}`},a+1),r.a.createElement("div",{className:"file-info"},r.a.createElement("div",{className:`info ${"fileFinished"===R?"center":""} ${e.downloaded?"downloaded":""}`},r.a.createElement("div",{className:`filename ${x?"downloading":""}`,dangerouslySetInnerHTML:{__html:e.filename}}),e.downloaded&&r.a.createElement("div",{className:"downloaded-text"},"已下载"),x?r.a.createElement("div",{className:"file-size downloading"},e.progress):null),r.a.createElement("div",{className:"upload-info"},r.a.createElement("div",{className:`upload-user ${x?"downloading":""}`},`${"fileFinished"!==R?e.uploadUsername:""}${(e=>e?"fileDownloading"===R?"":("number"==typeof e&&(e=new Date(e).format("yyyy-MM-dd"))," "+e.split(" ")[0]):"")(e.date)}`),"fileShare"===R||"fileSearch"===R?r.a.createElement("div",{className:`file-size ${Object(g.d)(a+1)}`},Object(b.b)(e.fileSize)):x?r.a.createElement("div",{className:"download-progress"},r.a.createElement(l.a,{percent:e.received?e.received/e.fileSize*100:0,position:"normal"})):null))),x?r.a.createElement("div",{className:"move-downloading-item fa fa-remove",onClick:((e,a)=>{Object(g.j)("提示",r.a.createElement(f.a,{textFragment:`确定要移除下载 <span class="delete-alert">${e}</span> 吗`}),"确定",()=>{const e=Object(b.H)(a);window.eventEmit.$emit(`FileTransfer-${e}`,"abort"),window[`remove-download-${e}`]=!0,setTimeout(()=>{window[`remove-download-${e}`]=!1},1500);const{downloadingFileList:t}=$getState().fileServer,i=JSON.parse(JSON.stringify(t));for(const e in t)if(i[e].filenameOrigin===a){i.splice(e,1),$dispatch(Object(v.n)(i)),Object(M.c)(a);break}})}).bind(void 0,e.filename,e.filenameOrigin)}):r.a.createElement("div",{className:"menu",onClick:Q.bind(void 0,e.filename,e.fileSize,e.filePath,e.uploadUsername,e.filenameOrigin,e.date,e.status,e.md5)},r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"})));let _=0;return P&&A&&(_=A),r.a.createElement("div",{className:"file-manage-container"},k?r.a.createElement(h.a,{width:window.screen.width,height:k,rowCount:$.length,rowHeight:66,onScroll:({scrollTop:e})=>{w=e,P&&A&&$dispatch(Object(v.q)(0))},scrollTop:_||void 0,rowRenderer:({key:e,index:a,style:t})=>r.a.createElement("div",{key:e,style:t,className:"file-list"},W($[a],a))}):$.map((e,a)=>r.a.createElement("div",{className:"file-list",key:e.filenameOrigin},W(e,a))))})},370:function(e,a,t){"use strict";var i=t(0),l=t.n(i),s=t(95),c=t(336),n=t(345),r=t(365),o=t(358),u=t(8),d=t(1),m=t(3),h=t(2),f=t(9);let g="",O=null;a.a=Object(s.connect)(e=>({noMoreNetEaseCloudResults:e.fileServer.noMoreNetEaseCloudResults,noMoreQQMusicResults:e.fileServer.noMoreQQMusicResults,noMoreKuGouMusicResults:e.fileServer.noMoreKuGouMusicResults,noMoreKuWoMusicResults:e.fileServer.noMoreKuWoMusicResults,noMoreSearchAllFileResults:e.fileServer.noMoreSearchAllFileResults,noMoreSearchAllMusicResults:e.fileServer.noMoreSearchAllMusicResults,noMoreSearchAllNetEaseCloudResults:e.fileServer.noMoreSearchAllNetEaseCloudResults,noMoreSearchAllQQMusicResults:e.fileServer.noMoreSearchAllQQMusicResults,noMoreSearchAllKuGouMusicResults:e.fileServer.noMoreSearchAllKuGouMusicResults,noMoreSearchAllKuWoMusicResults:e.fileServer.noMoreSearchAllKuWoMusicResults,musicCollection:e.fileServer.musicCollection,downloadedMusicList:e.fileServer.downloadedMusicList,downloadedFileList:e.fileServer.downloadedFileList,defaultSearchRealKey:e.common.defaultSearchRealKey}),()=>({}))(({lastSearchResult:e,lastSearchString:a,type:t,musicCollection:s,fileDatalist:S,musicDatalist:p,navbarText:b,placeholder:v,noMoreNetEaseCloudResults:M,noMoreQQMusicResults:j,noMoreKuGouMusicResults:y,noMoreKuWoMusicResults:E,noMoreSearchAllFileResults:w,noMoreSearchAllMusicResults:N,noMoreSearchAllNetEaseCloudResults:$,noMoreSearchAllQQMusicResults:R,noMoreSearchAllKuGouMusicResults:k,noMoreSearchAllKuWoMusicResults:A,downloadedMusicList:x,downloadedFileList:P,currentQueryStringWithResults:F,defaultSearchRealKey:C})=>{const[L,Q]=Object(i.useState)(!1),[q,K]=Object(i.useState)(!1),[D,I]=Object(i.useState)(!1),[W,_]=Object(i.useState)(!1),[G,T]=Object(i.useState)(!1),[J,H]=Object(i.useState)(!1),[B,z]=Object(i.useState)(!1),[U,V]=Object(i.useState)(!1),Y=Object(i.useRef)();Object(i.useEffect)(()=>{K(!!e.length),!a&&Y.current&&Y.current.focus()},[]);const Z=e=>"searchAll"===t?`searchAll_${e.filenameOrigin?e.filenameOrigin:e.filename+"_"+e.md5+".mp3"}`:"onlineMusic"===t?"onlineMusic_"+e.filename+"_"+e.md5+".mp3":"music"===t?"searchMusic_"+e.filenameOrigin:void 0,X=(e,a,t)=>{switch(a=JSON.parse(JSON.stringify(a)),"file"!==e&&"fileSearchAll"!==e&&a.forEach(e=>{e.filenameOrigin=Z(e),(e=>{s.forEach(a=>{Object(f.H)(a.filenameOrigin)===Object(f.H)(e.filenameOrigin)&&(e.saved=!0)})})(e)}),a.forEach(a=>{let i=a.filename;i="file"===e||"music"===e?(i=i.split(g)).join(`<span class="hight-light-keyword">${g}</span>`):(i=i.split(t||F||g)).join(`<span class="hight-light-keyword">${t||F||g}</span>`),a.filename=i}),e){case"file":$dispatch(Object(d.u)(a));break;case"music":$dispatch(Object(d.y)(a));break;case h.a.musicOriginal.netEaseCloud:$dispatch(Object(d.A)(a));break;case h.a.musicOriginal.qqMusic:$dispatch(Object(d.C)(a));break;case h.a.musicOriginal.kuGouMusic:$dispatch(Object(d.w)(a));break;case h.a.musicOriginal.kuWoMusic:$dispatch(Object(d.x)(a));break;case"onlineMusic":$dispatch(Object(d.A)([])),$dispatch(Object(d.C)([])),$dispatch(Object(d.w)([])),$dispatch(Object(d.x)([]));break;case"searchAll":$dispatch(Object(d.D)([])),$dispatch(Object(d.G)([])),$dispatch(Object(d.H)([])),$dispatch(Object(d.I)([])),$dispatch(Object(d.E)([])),$dispatch(Object(d.F)([]));break;case"netEaseCloudSearchAll":$dispatch(Object(d.H)(a));break;case"qqMusicSearchAll":$dispatch(Object(d.I)(a));break;case"kuGouMusicSearchAll":$dispatch(Object(d.E)(a));break;case"kuWoMusicSearchAll":$dispatch(Object(d.F)(a));break;case"fileSearchAll":$dispatch(Object(d.D)(a));break;case"musicSearchAll":$dispatch(Object(d.G)(a))}},ee=(e,a)=>{switch(g=a,e){case"file":$dispatch(Object(d.v)(a));break;case"music":$dispatch(Object(d.z)(a));break;case"onlineMusic":$dispatch(Object(d.B)(a));break;case"searchAll":$dispatch(Object(d.J)(a))}},ae=e=>{try{K(!1);const a=e?e.target.value:"";if(ee(t,a),!a)return I(!1),_(!1),T(!1),H(!1),z(!1),V(!1),void(O&&clearInterval(O));"music"===t||"file"===t?te(a):(O&&clearInterval(O),O=setTimeout(()=>{te(a),O=null},800))}catch(e){logger.error("SearchResourceComponent updateValue type",t,"err",e),alertDebug("SearchResourceComponent updateValue err")}},te=e=>{if(logger.info("SearchResourceComponent getAutoSuggest query",e),"searchAll"!==t&&"onlineMusic"!==t||!v||"搜索"===v||e||ee(t,e=C),e){if(Q(!0),I(!1),_(!1),T(!1),H(!1),z(!1),V(!1),"onlineMusic"===t)return $dispatch(Object(d.ab)(!1)),$dispatch(Object(d.bb)(!1)),$dispatch(Object(d.Y)(!1)),$dispatch(Object(d.Z)(!1)),le(e,h.a.musicOriginal.netEaseCloud,h.a.musicOriginal.qqMusic,h.a.musicOriginal.kuGouMusic,h.a.musicOriginal.kuWoMusic);if("file"===t||"music"===t)ie(e,t);else if("searchAll"===t)return $dispatch(Object(d.gb)(!1)),$dispatch(Object(d.hb)(!1)),$dispatch(Object(d.db)(!1)),$dispatch(Object(d.eb)(!1)),le(e,"netEaseCloudSearchAll","qqMusicSearchAll","kuGouMusicSearchAll","kuWoMusicSearchAll").then(()=>{ie(e,"fileSearchAll",3),ie(e,"musicSearchAll",3)})}},ie=(e,a,t)=>{if(!e)return;let i=[],l=[];if("file"===a||"fileSearchAll"===a){const e=[...P,...S];l=JSON.parse(JSON.stringify(e))}else if("music"===a||"musicSearchAll"===a){const e=[...x,...p];l=JSON.parse(JSON.stringify(e))}(l=Object.values(Object(f.F)(l))).forEach(a=>{a.filename.includes(e)&&i.push(a)}),t?(i.length<=t?"fileSearchAll"===a?$dispatch(Object(d.cb)(!0)):"musicSearchAll"===a&&$dispatch(Object(d.fb)(!0)):"fileSearchAll"===a?$dispatch(Object(d.cb)(!1)):"musicSearchAll"===a&&$dispatch(Object(d.fb)(!1)),i=i.slice(0,t)):"fileSearchAll"===a?$dispatch(Object(d.cb)(!0)):"musicSearchAll"===a&&$dispatch(Object(d.fb)(!0)),X(a,i,e),Q(!1),K(!0)},le=(e,a,i,l,s)=>{if(e)return logger.info("SearchResourceComponent fetchOnlineSongs query",e),axios.get(u.a.getOnlineMusicLists.format({query:e})).then(c=>{const n=c.response;logger.info("SearchResourceComponent fetchOnlineSongs result"),"onlineMusic"===t?$dispatch(Object(d.j)(e)):"searchAll"===t&&$dispatch(Object(d.i)(e)),Q(!1),X(a,n.netEaseCloud,e),X(i,n.qqMusic,e),X(l,n.kuGouMusic,e),X(s,n.kuWoMusic,e),Object(f.w)({msg:"search online music query: "+e})}).catch(a=>(Q(!1),Object(m.q)(a,`fetchOnlineSongs ${e}`)))},se=e=>{let t;if(e===h.a.musicOriginal.netEaseCloud||"netEaseCloudSearchAll"===e){if(D||!F)return;t=u.a.getNetEaseCloudMusicLists,I(!0)}else if(e===h.a.musicOriginal.qqMusic||"qqMusicSearchAll"===e){if(W||!F)return;t=u.a.getQQMusicLists,_(!0)}else if(e===h.a.musicOriginal.kuGouMusic||"kuGouMusicSearchAll"===e){if(G||!F)return;t=u.a.getKuGouMusicLists,T(!0)}else if(e===h.a.musicOriginal.kuWoMusic||"kuWoMusicSearchAll"===e){if(J||!F)return;t=u.a.getKuWoMusicLists,H(!0)}else{if("file"===e){if(B||!a)return;return z(!0),void ie(a,"fileSearchAll")}if("music"===e){if(U||!a)return;return V(!0),void ie(a,"musicSearchAll")}}return logger.info("SearchResourceComponent showMoreSearchResult original, currentQueryStringWithResults",e,F),axios.get(t.format({query:F})).then(a=>{const t=a.response;logger.info("SearchResourceComponent showMoreSearchResult original, result.length",e,t.length),ce(e,t)}).catch(a=>(ce(e,null),Object(m.q)(a,`showMoreSearchResult axios ${e}`)))},ce=(e,a)=>{e===h.a.musicOriginal.netEaseCloud||"netEaseCloudSearchAll"===e?(a&&X(e,a,null),e===h.a.musicOriginal.netEaseCloud?$dispatch(Object(d.ab)(!0)):$dispatch(Object(d.gb)(!0)),I(!1)):e===h.a.musicOriginal.qqMusic||"qqMusicSearchAll"===e?(a&&X(e,a,null),e===h.a.musicOriginal.qqMusic?$dispatch(Object(d.bb)(!0)):$dispatch(Object(d.hb)(!0)),_(!1)):e===h.a.musicOriginal.kuGouMusic||"kuGouMusicSearchAll"===e?(a&&X(e,a,null),e===h.a.musicOriginal.kuGouMusic?$dispatch(Object(d.Y)(!0)):$dispatch(Object(d.db)(!0)),T(!1)):e!==h.a.musicOriginal.kuWoMusic&&"kuWoMusicSearchAll"!==e||(a&&X(e,a,null),e===h.a.musicOriginal.kuWoMusic?$dispatch(Object(d.Z)(!0)):$dispatch(Object(d.eb)(!0)),H(!1))},ne=({origin:e,lastSearchResult:a,noMoreNetEaseCloudResults:t,moreNetEaseCloudSearch:s,noMoreQQMusicResults:c,moreQQMusicSearch:n,noMoreKuGouMusicResults:r,moreKuGouMusicSearch:u,noMoreKuWoMusicResults:d,moreKuWoMusicSearch:m})=>l.a.createElement(i.Fragment,null,l.a.createElement("div",{className:"online-music-container"},l.a.createElement("div",{className:"interval-line"}),l.a.createElement("div",{className:"online-music-header"},"QQ音乐"),l.a.createElement(o.a,{musicDataList:a[2].lastQQMusicSearchResult,original:h.a.musicOriginal.qqMusic,pageType:e,searchMusicPage:!0}),l.a.createElement("div",{className:"online-music-more-btn last-one"},!c&&a[2].lastQQMusicSearchResult.length?l.a.createElement("i",{className:`fa fa-search ${n&&"searching-status"}`,"aria-hidden":"true"}):null,n&&!c?l.a.createElement("span",{className:"searching-text"},"正在查询..."):c||!a[2].lastQQMusicSearchResult.length?null:l.a.createElement("span",{className:"more-results-text",onClick:()=>se("onlineMusic"===e?h.a.musicOriginal.qqMusic:"qqMusicSearchAll")},"更多结果"))),l.a.createElement("div",{className:"online-music-container"},l.a.createElement("div",{className:"interval-line first-line"}),l.a.createElement("div",{className:"online-music-header"},"网易云"),l.a.createElement(o.a,{musicDataList:a[3].lastNetEaseCloudSearchResult,original:h.a.musicOriginal.netEaseCloud,pageType:e,noShowMusicPlaying:!0}),l.a.createElement("div",{className:"online-music-more-btn"},!t&&a[3].lastNetEaseCloudSearchResult.length?l.a.createElement("i",{className:`fa fa-search ${s&&"searching-status"}`,"aria-hidden":"true"}):null,s&&!t?l.a.createElement("span",{className:"searching-text"},"正在查询..."):t||!a[3].lastNetEaseCloudSearchResult.length?null:l.a.createElement("span",{className:"more-results-text",onClick:()=>se("onlineMusic"===e?h.a.musicOriginal.netEaseCloud:"netEaseCloudSearchAll")},"更多结果"))),l.a.createElement("div",{className:"online-music-container"},l.a.createElement("div",{className:"interval-line"}),l.a.createElement("div",{className:"online-music-header"},"酷狗音乐"),l.a.createElement(o.a,{musicDataList:a[4].lastKuGouMusicSearchResult,original:h.a.musicOriginal.kuGouMusic,pageType:e,noShowMusicPlaying:!0}),l.a.createElement("div",{className:"online-music-more-btn last-one"},!r&&a[4].lastKuGouMusicSearchResult.length?l.a.createElement("i",{className:`fa fa-search ${u&&"searching-status"}`,"aria-hidden":"true"}):null,u&&!r?l.a.createElement("span",{className:"searching-text"},"正在查询..."):r||!a[4].lastKuGouMusicSearchResult.length?null:l.a.createElement("span",{className:"more-results-text",onClick:()=>se("onlineMusic"===e?h.a.musicOriginal.kuGouMusic:"kuGouMusicSearchAll")},"更多结果"))),l.a.createElement("div",{className:"online-music-container"},l.a.createElement("div",{className:"interval-line"}),l.a.createElement("div",{className:"online-music-header"},"酷我音乐"),l.a.createElement(o.a,{musicDataList:a[5].lastKuWoMusicSearchResult,original:h.a.musicOriginal.kuWoMusic,pageType:e,noShowMusicPlaying:!0}),l.a.createElement("div",{className:"online-music-more-btn last-one"},!d&&a[5].lastKuWoMusicSearchResult.length?l.a.createElement("i",{className:`fa fa-search ${m&&"searching-status"}`,"aria-hidden":"true"}):null,m&&!d?l.a.createElement("span",{className:"searching-text"},"正在查询..."):d||!a[5].lastKuWoMusicSearchResult.length?null:l.a.createElement("span",{className:"more-results-text",onClick:()=>se("onlineMusic"===e?h.a.musicOriginal.kuWoMusic:"kuWoMusicSearchAll")},"更多结果"))));return l.a.createElement("div",{className:"search-component-container"},l.a.createElement(c.a,{centerText:b,backToPreviousPage:()=>Object(m.b)("/search_column",!1)}),l.a.createElement("div",{className:"search-header"},l.a.createElement("div",{className:"search-input"},l.a.createElement(n.a,{value:a,placeholder:v,handleChange:ae,handleKeyDown:e=>{13===e.keyCode&&(logger.info("lastSearchString",a),Y.current.blur(),te(a))},className:"search-input-content",ref:Y}),l.a.createElement("i",{className:"fa fa-search","aria-hidden":"true"}),a&&l.a.createElement("i",{className:"fa fa-times-circle-o","aria-hidden":"true",onClick:ae}))),l.a.createElement("div",{className:`search-result-container ${"file"===t&&"isFileSearchColumn"}`},L?l.a.createElement("div",{className:"searching"},"正在查询..."):e.length||!a?l.a.createElement("div",{className:"search-result-content"},"file"===t?l.a.createElement(r.a,{fileDataList:e,original:"fileSearch"}):"music"===t?l.a.createElement(o.a,{musicDataList:e,original:h.a.musicOriginal.musicSearch,pageType:"onlySearchShareMusic",searchMusicPage:!0}):"onlineMusic"===t?ne({origin:"onlineMusic",lastSearchResult:e,noMoreNetEaseCloudResults:M,moreNetEaseCloudSearch:D,noMoreQQMusicResults:j,moreQQMusicSearch:W,noMoreKuGouMusicResults:y,moreKuGouMusicSearch:G,noMoreKuWoMusicResults:E,moreKuWoMusicSearch:J}):"searchAll"===t?l.a.createElement(i.Fragment,null,l.a.createElement("div",{className:"online-music-container"},l.a.createElement("div",{className:"online-music-header"},"文件"),l.a.createElement(r.a,{fileDataList:e[0].lastSearchAllFileResult,original:"fileSearch"}),l.a.createElement("div",{className:"online-music-more-btn last-one",onClick:()=>se("file")},!w&&e[0].lastSearchAllFileResult.length?l.a.createElement("i",{className:`fa fa-search ${B&&"searching-status"}`,"aria-hidden":"true"}):null,B&&!w?l.a.createElement("span",{className:"searching-text"},"正在查询..."):w||!e[0].lastSearchAllFileResult.length?null:l.a.createElement("span",{className:"more-results-text"},"更多结果"))),l.a.createElement("div",{className:"online-music-container"},l.a.createElement("div",{className:"interval-line"}),l.a.createElement("div",{className:"online-music-header"},"音乐"),l.a.createElement(o.a,{musicDataList:e[1].lastSearchAllMusicResult,original:h.a.musicOriginal.musicSearch,pageType:"onlineMusicSearchALl",noShowMusicPlaying:!0}),l.a.createElement("div",{className:"online-music-more-btn last-one",onClick:()=>se("music")},!N&&e[1].lastSearchAllMusicResult.length?l.a.createElement("i",{className:`fa fa-search ${U&&"searching-status"}`,"aria-hidden":"true"}):null,U&&!N?l.a.createElement("span",{className:"searching-text"},"正在查询..."):N||!e[1].lastSearchAllMusicResult.length?null:l.a.createElement("span",{className:"more-results-text"},"更多结果"))),ne({origin:"onlineMusicSearchALl",lastSearchResult:e,noMoreNetEaseCloudResults:$,moreNetEaseCloudSearch:D,noMoreQQMusicResults:R,moreQQMusicSearch:W,noMoreKuGouMusicResults:k,moreKuGouMusicSearch:G,noMoreKuWoMusicResults:A,moreKuWoMusicSearch:J})):null):q&&l.a.createElement("div",{className:"no-result"},"没有结果")))})},603:function(e,a,t){"use strict";t.r(a);var i=t(0),l=t.n(i),s=t(95),c=t(370);a.default=Object(s.connect)(e=>({lastSearchAllNetEaseCloudResult:e.fileServer.lastSearchAllNetEaseCloudResult,lastSearchAllQQMusicSearchResult:e.fileServer.lastSearchAllQQMusicSearchResult,lastSearchAllKuGouMusicSearchResult:e.fileServer.lastSearchAllKuGouMusicSearchResult,lastSearchAllKuWoMusicSearchResult:e.fileServer.lastSearchAllKuWoMusicSearchResult,lastSearchAllSearchString:e.fileServer.lastSearchAllSearchString,lastSearchAllFileResult:e.fileServer.lastSearchAllFileResult,lastSearchAllMusicResult:e.fileServer.lastSearchAllMusicResult,musicList:e.fileServer.musicList,fileList:e.fileServer.fileList,currentQueryStringWithResultsSearchAll:e.fileServer.currentQueryStringWithResultsSearchAll,defaultSearchShortKey:e.common.defaultSearchShortKey}),()=>({}))(({lastSearchAllNetEaseCloudResult:e,lastSearchAllQQMusicSearchResult:a,lastSearchAllKuGouMusicSearchResult:t,lastSearchAllKuWoMusicSearchResult:i,lastSearchAllSearchString:s,lastSearchAllFileResult:n,lastSearchAllMusicResult:r,musicList:o,fileList:u,currentQueryStringWithResultsSearchAll:d,defaultSearchShortKey:m})=>{const h=[];return h.push({lastSearchAllFileResult:n}),h.push({lastSearchAllMusicResult:r}),h.push({lastQQMusicSearchResult:a}),h.push({lastNetEaseCloudSearchResult:e}),h.push({lastKuGouMusicSearchResult:t}),h.push({lastKuWoMusicSearchResult:i}),l.a.createElement(c.a,{navbarText:"全局搜索",placeholder:`${m||"搜索"}`,type:"searchAll",lastSearchResult:h,lastSearchString:s,musicDatalist:o,fileDatalist:u,currentQueryStringWithResults:d})})}}]);