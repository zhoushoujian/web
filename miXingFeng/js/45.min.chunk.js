(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{210:function(e,t,o){"use strict";var a=o(0),r=o.n(a),l=o(211);t.a=(({centerText:e="",backToPreviousPage:t=(()=>{}),rightText:o="",rightTextFunc:i=(()=>{})})=>r.a.createElement(a.Fragment,null,r.a.createElement(l.a,null),r.a.createElement("div",{className:"navbar-container"},r.a.createElement("div",{className:"back-btn",onClick:t},r.a.createElement("i",{className:"fa fa-angle-left","aria-hidden":"true"})),r.a.createElement("div",{className:"center-text"},e),r.a.createElement("div",{className:"other-text",onClick:i},o))))},211:function(e,t,o){"use strict";var a=o(0),r=o.n(a);t.a=(()=>r.a.createElement("div",{className:"top-status-bar"}))},289:function(e,t,o){e.exports=o(27)(29)},296:function(e,t,o){e.exports=o(27)(13)},515:function(e,t,o){"use strict";o.r(t);o(287);var a=o(288),r=o.n(a),l=(o(233),o(236)),i=o.n(l),n=o(0),s=o.n(n),c=o(75),m=o(328),g=o(210),h=o(6),S=o(116),p=o(9),u=o(8),d=o(10),v=o(3),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e};const f=Object(m.a)()(class extends n.Component{constructor(...e){var t;return t=super(...e),this.backToMainPage=(()=>{goRoute(this,"/system_setup")}),this.onChangeNotification=(e=>{logger.info("onChangeNotification",e),$dispatch(Object(h.D)(e)),e?Object(S.a)():Object(S.b)(),this.props.form.setFieldsValue({Switch1:e})}),this.onChangeAlwaysShowAdsPage=(e=>{logger.info("onChangeAlwaysShowAdsPage",e),$dispatch(Object(h.g)(e)),this.props.form.setFieldsValue({Switch3:e})}),this.onAllowGetPosition=(e=>{try{logger.info("onAllowGetPosition",e);const t=this;e?window.permissions?window.permissions.checkPermission(window.permissions.ACCESS_FINE_LOCATION,function(e){if(logger.info("onAllowGetPosition ACCESS_FINE_LOCATION",e),!e.hasPermission)return Object(p.K)().then(e=>{!1===e?t.props.form.setFieldsValue({Switch4:!1}):(t.props.form.setFieldsValue({Switch4:!0}),$dispatch(Object(h.d)(!0)))});$dispatch(Object(h.d)(!0)),t.props.form.setFieldsValue({Switch4:!0})}):($dispatch(Object(h.d)(!0)),t.props.form.setFieldsValue({Switch4:!0})):($dispatch(Object(h.d)(!1)),this.props.form.setFieldsValue({Switch4:!1}))}catch(e){logger.error("onAllowGetPosition err",e)}}),this.onAllowOthersGetPosition=(e=>{logger.info("onAllowOthersGetPosition",e),$dispatch(Object(h.e)(e)),this.props.form.setFieldsValue({Switch5:e})}),this.onAllowShareMySignature=(e=>{const{username:t,token:o}=this.props;if(!o)return alert("请先登录"),void setTimeout(()=>{this.props.form.setFieldsValue({Switch6:!e}),$dispatch(Object(h.f)(!e))},17);logger.info("onAllowShareMySignature",e);const a=Object.assign({username:t,token:o,userInfo:{shareNickname:e}});axios.post(u.a.updateUserInfo,a).then(t=>{"modify_success"===t.response?($dispatch(Object(d.j)(t.token)),$dispatch(Object(h.f)(e))):(alertDebug("onAllowShareMySignature 设置失败"),logger.error("onAllowShareMySignature 设置失败",t),this.props.form.setFieldsValue({Switch6:!e}),$dispatch(Object(h.f)(!e)))}).catch(t=>(this.props.form.setFieldsValue({Switch6:!e}),$dispatch(Object(h.f)(!e)),Object(v.q)(t,"onAllowShareMySignature"))),this.props.form.setFieldsValue({Switch6:e})}),this.clearFingerPrint=(()=>{Object(v.j)("提示","确定要清除指纹识别记录吗","确定",function(){localStorage.removeItem("fingerprintAuth"),localStorage.removeItem("fingerprintAuthUsername"),localStorage.removeItem("fingerprintAuthToken"),alert("清除成功")})}),this.clearCache=(()=>{Object(v.j)("提示","确定要清除缓存吗","确定",function(){localStorage.removeItem("alreadyShowInstallAppTip"),localStorage.removeItem("oldUserId"),localStorage.removeItem("appVersion"),localStorage.removeItem("menuList"),localStorage.removeItem("recommendSongs"),localStorage.removeItem("currentTimeForRecommendSongs"),localStorage.removeItem("fileList"),localStorage.removeItem("musicList"),localStorage.removeItem("favoriteSongs"),localStorage.removeItem("userId"),localStorage.removeItem("setHeadPicName"),localStorage.removeItem("email"),localStorage.removeItem("headPicAddress"),localStorage.removeItem("totalSongCount"),localStorage.removeItem("totalSongTime"),localStorage.removeItem("weekSongCount"),localStorage.removeItem("weekSongTime"),localStorage.removeItem("totalScore"),localStorage.removeItem("lastSignUpTime"),localStorage.removeItem("alreadySignUpPersons"),localStorage.removeItem("notSignUpPersons"),localStorage.removeItem("signCount"),localStorage.removeItem("notFirstTimePlayMusic"),localStorage.removeItem("lastPlaySongInfo"),localStorage.removeItem("lastPlaySongPageType"),localStorage.removeItem("lastPlaySongMusicDataList"),localStorage.removeItem("filePath"),localStorage.removeItem("userProfile"),localStorage.removeItem("role"),localStorage.removeItem("musicVip"),localStorage.removeItem("fingerprintAuth"),localStorage.removeItem("fingerprintAuthUsername"),localStorage.removeItem("fingerprintAuthToken"),localStorage.removeItem("fingerprintAuthPassword"),localStorage.removeItem("registrationID"),localStorage.removeItem("versionDate"),localStorage.removeItem("incorrectQuestions"),localStorage.removeItem("mySongList"),localStorage.removeItem("mySongListDetail"),localStorage.removeItem("questionsInfo"),localStorage.removeItem("newServerVersion"),localStorage.removeItem("updateQuestionsInfoFlag"),alert("清除成功")})}),this.openConsole=(()=>{new window.VConsole}),t}render(){const{receiveNotification:e,alwaysShowAdsPage:t,token:o,allowGetPosition:a,allowOthersGetPosition:l,allowShareMyNickname:n}=this.props,{getFieldProps:c}=this.props.form,m=localStorage.getItem("role");return s.a.createElement("div",{className:"notification-run-container"},s.a.createElement(g.a,{centerText:"通知和权限",backToPreviousPage:this.backToMainPage}),s.a.createElement(i.a,null,!isH5&&o?s.a.createElement(i.a.Item,{style:{height:"60px"},extra:s.a.createElement(r.a,w({},c("Switch1",{initialValue:e,valuePropName:"checked",platform:"ios"}),{onClick:this.onChangeNotification}))},"接收所有通知"):null,s.a.createElement(i.a.Item,{style:{height:"60px"},extra:s.a.createElement(r.a,w({},c("Switch3",{initialValue:t,valuePropName:"checked",platform:"ios"}),{onClick:this.onChangeAlwaysShowAdsPage}))},"启动app显示广告"),s.a.createElement(i.a.Item,{style:{height:"60px"},extra:s.a.createElement(r.a,w({},c("Switch4",{initialValue:a,valuePropName:"checked",platform:"ios"}),{onClick:this.onAllowGetPosition}))},"允许程序获取地理位置"),s.a.createElement(i.a.Item,{style:{height:"60px"},extra:s.a.createElement(r.a,w({},c("Switch5",{initialValue:l,valuePropName:"checked",platform:"ios"}),{onClick:this.onAllowOthersGetPosition}))},"允许别人获取我的位置"),s.a.createElement(i.a.Item,{style:{height:"60px"},extra:s.a.createElement(r.a,w({},c("Switch6",{initialValue:n,valuePropName:"checked",platform:"ios"}),{onClick:this.onAllowShareMySignature}))},"共享我的昵称"),isCordova&&s.a.createElement(i.a.Item,{onClick:this.clearFingerPrint,style:{height:"60px"}},"清除指纹识别记录"),s.a.createElement(i.a.Item,{onClick:this.clearCache,style:{height:"60px"}},"清除缓存"),"admin"===m&&s.a.createElement(i.a.Item,{onClick:this.openConsole,style:{height:"60px"}},"打开console")))}});t.default=Object(c.connect)(e=>({receiveNotification:e.common.receiveNotification,alwaysShowAdsPage:e.common.alwaysShowAdsPage,username:e.login.username,token:e.login.token,allowGetPosition:e.common.allowGetPosition,allowOthersGetPosition:e.common.allowOthersGetPosition,allowShareMyNickname:e.common.allowShareMyNickname}),()=>({}))(f)}}]);