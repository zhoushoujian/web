(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{336:function(e,t,a){"use strict";var s=a(0),r=a.n(s),c=a(337);t.a=(({centerText:e="",backToPreviousPage:t=(()=>{}),rightText:a="",rightTextFunc:n=(()=>{})})=>r.a.createElement(s.Fragment,null,r.a.createElement(c.a,null),r.a.createElement("div",{className:"navbar-container"},r.a.createElement("div",{className:"back-btn",onClick:t},r.a.createElement("i",{className:"fa fa-angle-left","aria-hidden":"true"})),r.a.createElement("div",{className:"center-text"},e),r.a.createElement("div",{className:"other-text",onClick:n},a))))},337:function(e,t,a){"use strict";var s=a(0),r=a.n(s);t.a=(()=>r.a.createElement("div",{className:"top-status-bar"}))},612:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),c=a(95),n=a(336),i=a(8),o=a(12),l=a(3),m=a(2),u=a(37);t.default=Object(c.connect)(e=>({everydayQuestions:e.questions.everydayQuestions,answerQuestioning:e.questions.answerQuestioning}),()=>({}))(class extends r.a.Component{constructor(...e){var t;return t=super(...e),this.state={leftTime:9,questionName:"",questions:[],correctAnswer:0,questionType:"",showCorrectAnswer:!1,selected:!1,correctSelected:!0,userSelectAnswer:0,answerTimes:1,userAnswers:Array(12).fill(null),gameOver:!1,correctQuestionsNumber:0,correctPercent:"0%",getTotalScore:0},this.listenBackButton=(()=>{document.addEventListener("backbutton",this.backKeyDownToPrevious,!1)}),this.backKeyDownToPrevious=(()=>{Object(l.b)("/questions",!0),this.checkQuitGame()}),this.backToMainPage=(()=>{Object(l.b)("/questions",!1),this.checkQuitGame()}),this.checkQuitGame=(()=>{setTimeout(()=>{const{answerQuestioning:e}=this.props;if(e){const e={score:-20};Object(u.a)(e),alert("中途退出答题,将扣除20积分"),$dispatch(Object(o.b)(!1))}},20)}),this.initQuestions=((e=!1)=>{const{answerTimes:t}=this.state;t>=12?setTimeout(()=>{const{userAnswers:e}=this.state,t=e.filter(Boolean).length,a=parseInt(t/12*100)+"%";let s=0;e.forEach((e,t)=>{e&&(t<=3?s+=10:t<=7?s+=20:t<=11&&(s+=40))}),$dispatch(Object(o.b)(!1)),this.setState({gameOver:!0,correctQuestionsNumber:t,correctPercent:a,getTotalScore:s});const r={score:s};s&&Object(u.a)(r).then(()=>alert("奖励领取成功: "+s))},2e3):setTimeout(()=>{const{everydayQuestions:t}=this.props;if(!e){let{answerTimes:e}=this.state;this.setState({leftTime:9,questionName:"",questions:[],correctAnswer:0,questionType:"",showCorrectAnswer:!1,selected:!1,correctSelected:!0,userSelectAnswer:0,answerTimes:++e})}setTimeout(()=>{const{answerTimes:e}=this.state,a=t[e-1];this.setState({questionName:JSON.parse(a.quiz),questions:JSON.parse(a.options),correctAnswer:JSON.parse(a.answer),questionType:`${JSON.parse(a.school)} ● ${JSON.parse(a.type)}`})},25),this.timer=setInterval(()=>{if(!this.unmount){const{leftTime:e,userAnswers:a,answerTimes:s}=this.state,r=e-1;if(r<=0){const e=JSON.parse(JSON.stringify(a));e[s-1]=!1,clearInterval(this.timer),this.setState({showCorrectAnswer:!0,userAnswers:e}),Object(u.b)(t[s-1],"add"),this.initQuestions(!1)}this.setState({leftTime:r})}},1e3)},e?1:2e3)}),this.select=(e=>{const{correctAnswer:t,showCorrectAnswer:a,selected:s,answerTimes:r,userAnswers:c}=this.state,{everydayQuestions:n}=this.props,i=JSON.parse(JSON.stringify(c));a||s||(e===t-1?(i[r-1]=!0,this.setState({selected:!0,correctSelected:!0,showCorrectAnswer:!0,userAnswers:i})):(i[r-1]=!1,this.setState({selected:!0,correctSelected:!1,showCorrectAnswer:!0,userSelectAnswer:e,userAnswers:i}),Object(u.b)(n[r-1],"add")),clearInterval(this.timer),this.initQuestions(!1))}),this.shareToWeChat=(()=>{const{correctQuestionsNumber:e}=this.state;Object(l.w)({title:"觅星峰",description:`我在觅星峰答对了${e}题,希望在那里与你一较高下`,thumb:`${m.a.appStaticDirectory}logo.png`,webpageUrl:`${m.a.appStaticDirectory}#/show_file_info?filename=觅星峰&fileSize=${window.newAppSize||"11.5MB"}&filePath=${m.a.appDownloadUrl}`})}),this.tryAnotherOne=(()=>(Object(l.B)("正在获取答题..."),axios.get(i.a.getRandomQuestion.format({number:12})).then(e=>{window.toast.hide();const{results:t}=e;t&&($dispatch(Object(o.d)(t)),$dispatch(Object(o.b)(!0)),this.setState({leftTime:9,questionName:"",questions:[],correctAnswer:0,questionType:"",showCorrectAnswer:!1,selected:!1,correctSelected:!0,userSelectAnswer:0,answerTimes:1,userAnswers:Array(12).fill(null),gameOver:!1,correctQuestionsNumber:0,correctPercent:"0%",getTotalScore:0},()=>this.initQuestions(!0)))}))),t}componentDidMount(){isCordova&&window.StatusBar.backgroundColorByHexString(m.a.questionThemeColor);const{everydayQuestions:e}=this.props;e.length?this.initQuestions(!0):axios.get(i.a.getRandomQuestion.format({number:12})).then(e=>{const{results:t}=e;t&&($dispatch(Object(o.d)(t)),this.initQuestions(!0))}),$dispatch(Object(o.b)(!0)),document.addEventListener("deviceready",this.listenBackButton,!1)}componentWillUnmount(){this.unmount=!0,clearInterval(this.timer),document.removeEventListener("deviceready",this.listenBackButton,!1),document.removeEventListener("backbutton",this.backKeyDownToPrevious,!1)}render(){const{leftTime:e,questionName:t,questions:a,questionType:s,showCorrectAnswer:c,correctAnswer:i,selected:o,correctSelected:l,userSelectAnswer:m,answerTimes:u,userAnswers:d,gameOver:h,correctQuestionsNumber:w,correctPercent:v,getTotalScore:N}=this.state;return r.a.createElement("div",{className:"knowledge-container"},r.a.createElement(n.a,{centerText:"每日挑战",backToPreviousPage:this.backToMainPage}),h?r.a.createElement("div",{className:"answer-result web-font animate__animated animate__bounceIn"},r.a.createElement("div",{className:"over"},"挑战结束"),r.a.createElement("div",{className:"result-case"},r.a.createElement("span",null,"本次挑战答对"),r.a.createElement("span",{className:"hight-light-score"},w),r.a.createElement("span",null,"题,正确率: "),r.a.createElement("span",{className:"hight-light-score"},v)),r.a.createElement("div",{className:"get-from-result-text"},"本次挑战获得"),r.a.createElement("i",{className:"fa fa-btc","aria-hidden":"true"}),r.a.createElement("div",{className:"get-number"},"X ",N),r.a.createElement("div",{className:"get-reward",onClick:this.tryAnotherOne},"再来一局"),isCordova&&r.a.createElement("div",{className:"share-reward",onClick:this.shareToWeChat},"分享战绩")):r.a.createElement("div",{className:"knowledge-content web-font"},r.a.createElement("div",{className:"number"},r.a.createElement("div",{className:`num ${t?"animate__bounceOut":""} animate__animated`},"第",u,"题"),r.a.createElement("div",{className:`question-ball-container ${t?"animate__fadeIn animate__delay-1s":"not-show-balls"} animate__animated`},r.a.createElement("div",{className:`column ${!0===d[0]?"correct":!1===d[0]?"incorrect":""}`}),r.a.createElement("div",{className:`column ${!0===d[1]?"correct":!1===d[1]?"incorrect":""}`}),r.a.createElement("div",{className:`column ${!0===d[2]?"correct":!1===d[2]?"incorrect":""}`}),r.a.createElement("div",{className:`column ${!0===d[3]?"correct":!1===d[3]?"incorrect":""}`},r.a.createElement("span",{className:`score-tip first-one ${null!==d[3]?"selected":""}`},"10"),r.a.createElement("i",{className:`fa fa-btc first-one  ${null!==d[3]?"selected":""}`,"aria-hidden":"true"})),r.a.createElement("div",{className:`column ${!0===d[4]?"correct":!1===d[4]?"incorrect":""}`}),r.a.createElement("div",{className:`column ${!0===d[5]?"correct":!1===d[5]?"incorrect":""}`}),r.a.createElement("div",{className:`column ${!0===d[6]?"correct":!1===d[6]?"incorrect":""}`}),r.a.createElement("div",{className:`column ${!0===d[7]?"correct":!1===d[7]?"incorrect":""}`},r.a.createElement("span",{className:`score-tip second-one ${null!==d[7]?"selected":""}`},"20"),r.a.createElement("i",{className:`fa fa-btc second-one ${null!==d[7]?"selected":""}`,"aria-hidden":"true"})),r.a.createElement("div",{className:`column ${!0===d[8]?"correct":!1===d[8]?"incorrect":""}`}),r.a.createElement("div",{className:`column ${!0===d[9]?"correct":!1===d[9]?"incorrect":""}`}),r.a.createElement("div",{className:`column ${!0===d[10]?"correct":!1===d[10]?"incorrect":""}`}),r.a.createElement("div",{className:`column ${!0===d[11]?"correct":!1===d[11]?"incorrect":""}`},r.a.createElement("span",{className:`score-tip third-one ${null!==d[11]?"selected":""}`},"40"),r.a.createElement("i",{className:`fa fa-btc third-one ${null!==d[11]?"selected":""}`,"aria-hidden":"true"}))),r.a.createElement("div",{className:`type animate__animated ${t?"animate__fadeIn":""}`},s)),r.a.createElement("div",{className:"left-time"},r.a.createElement("div",{className:"rect-box animate__pulse animate__animated "},r.a.createElement("div",{className:"rect left"},r.a.createElement("div",{className:`circle ${c?"has-selected":""}`})),r.a.createElement("div",{className:"rect right"},r.a.createElement("div",{className:`circle ${c?"has-selected":""}`})),r.a.createElement("div",{className:"time-text"},e))),r.a.createElement("div",{className:"title"},t),r.a.createElement("div",{className:`questions animate__animated ${t?"animate__fadeIn":""}`},a.map((e,t)=>r.a.createElement("div",{key:t,className:`question ${o&&!l&&m===t?"incorrect-answer":""} ${(c||o)&&t+1===i?"correct-answer":""}`,onClick:()=>this.select(t)},r.a.createElement("span",{className:"question-text"},e),c&&t+1===i&&r.a.createElement("span",{className:"circle"},r.a.createElement("span",{className:"circle-inner"})),o&&!l&&m===t&&r.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"}))))))}})}}]);