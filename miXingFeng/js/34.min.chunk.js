(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{334:function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(335);t.a=(({centerText:e="",backToPreviousPage:t=(()=>{}),rightText:a="",rightTextFunc:r=(()=>{})})=>i.a.createElement(n.Fragment,null,i.a.createElement(s.a,null),i.a.createElement("div",{className:"navbar-container"},i.a.createElement("div",{className:"back-btn",onClick:t},i.a.createElement("i",{className:"fa fa-angle-left","aria-hidden":"true"})),i.a.createElement("div",{className:"center-text"},e),i.a.createElement("div",{className:"other-text",onClick:r},a))))},335:function(e,t,a){"use strict";var n=a(0),i=a.n(n);t.a=(()=>i.a.createElement("div",{className:"top-status-bar"}))},397:function(e,t,a){"use strict";a(96),a(147),a(321)},398:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(a(14)),i=d(a(16)),s=d(a(17)),r=d(a(15)),o=d(a(18)),l=d(a(26)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0)),m=d(a(148)),u=d(a(399));function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(a[n[i]]=e[n[i]])}return a},f=function(e){function t(e){(0,i.default)(this,t);var a=(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onClick=function(){var e=a.props,t=e.mode,n=e.onClick;n&&n(),"closable"===t&&a.setState({show:!1})},a.state={show:!0},a}return(0,o.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.mode,a=e.icon,i=e.onClick,s=e.children,r=e.className,o=e.prefixCls,d=e.action,f=e.marqueeProps,v=p(e,["mode","icon","onClick","children","className","prefixCls","action","marqueeProps"]),g={},h=null;"closable"===t?h=c.createElement("div",{className:o+"-operation",onClick:this.onClick,role:"button","aria-label":"close"},d||c.createElement(m.default,{type:"cross",size:"md"})):("link"===t&&(h=c.createElement("div",{className:o+"-operation",role:"button","aria-label":"go to detail"},d||c.createElement(m.default,{type:"right",size:"md"}))),g.onClick=i);var E=(0,l.default)(o,r);return this.state.show?c.createElement("div",(0,n.default)({className:E},v,g,{role:"alert"}),a&&c.createElement("div",{className:o+"-icon","aria-hidden":"true"},a),c.createElement("div",{className:o+"-content"},c.createElement(u.default,(0,n.default)({prefixCls:o,text:s},f))),h):null}}]),t}(c.Component);t.default=f,f.defaultProps={prefixCls:"am-notice-bar",mode:"",icon:c.createElement(m.default,{type:"voice",size:"xxs"}),onClick:function(){}},e.exports=t.default},399:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(a(14)),i=u(a(16)),s=u(a(17)),r=u(a(15)),o=u(a(18)),l=m(a(0)),c=m(a(19));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){(0,i.default)(this,t);var e=(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={animatedWidth:0,overflowWidth:0},e}return(0,o.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this._measureText(),this._startAnimation()}},{key:"componentDidUpdate",value:function(){this._measureText(),this._marqueeTimer||this._startAnimation()}},{key:"componentWillUnmount",value:function(){clearTimeout(this._marqueeTimer)}},{key:"render",value:function(){var e=this,t=this.props,a=t.prefixCls,i=t.className,s=t.text,r=(0,n.default)({position:"relative",right:this.state.animatedWidth,whiteSpace:"nowrap",display:"inline-block"},this.props.style);return l.createElement("div",{className:a+"-marquee-wrap "+i,style:{overflow:"hidden"},role:"marquee"},l.createElement("div",{ref:function(t){return e.textRef=t},className:a+"-marquee",style:r},s))}},{key:"_startAnimation",value:function(){var e=this;this._marqueeTimer&&window.clearTimeout(this._marqueeTimer);var t=1/this.props.fps*1e3,a=0===this.state.animatedWidth?this.props.leading:t;0!==this.state.overflowWidth&&(this._marqueeTimer=window.setTimeout(function a(){var n=e.state.overflowWidth,i=e.state.animatedWidth+1,s=i>n;if(s){if(!e.props.loop)return;i=0}s&&e.props.trailing?e._marqueeTimer=window.setTimeout(function(){e.setState({animatedWidth:i}),e._marqueeTimer=window.setTimeout(a,t)},e.props.trailing):(e.setState({animatedWidth:i}),e._marqueeTimer=window.setTimeout(a,t))},a))}},{key:"_measureText",value:function(){var e=c.findDOMNode(this),t=this.textRef;if(e&&t){var a=e.offsetWidth,n=t.offsetWidth-a;n!==this.state.overflowWidth&&this.setState({overflowWidth:n})}}}]),t}(l.Component);t.default=d,d.defaultProps={text:"",loop:!1,leading:500,trailing:800,fps:40,className:""},e.exports=t.default},607:function(e,t,a){"use strict";a.r(t);a(397);var n=a(398),i=a.n(n),s=a(0),r=a.n(s),o=a(95),l=a(4),c=a(334),m=a(106),u=a(9),d=a(13),p=a(3);let f=null,v=":";t.default=Object(o.connect)(e=>({currentLocation:e.common.currentLocation,alreadySignUpPersons:e.sign.alreadySignUpPersons,notSignUpPersons:e.sign.notSignUpPersons,lastSignUpTime:e.sign.lastSignUpTime,onlinePersonsNum:e.sign.onlinePersonsNum,signedFlag:e.sign.signedFlag,isSignedUp:e.sign.isSignedUp,allowGetPosition:e.common.allowGetPosition,timeForOpenApp:e.sign.timeForOpenApp,setNickname:e.myInfo.setNickname,username:e.login.username,setMobile:e.myInfo.setMobile,signCount:e.sign.signCount}),()=>({}))(({isSignedUp:e,alreadySignUpPersons:t,notSignUpPersons:a,timeForOpenApp:n,allowGetPosition:o,signedFlag:g,currentLocation:h,onlinePersonsNum:E,lastSignUpTime:b,setNickname:N,username:y,setMobile:w,signCount:_})=>{const O=Object(l.useHistory)(),[k,x]=Object(s.useState)({hour:"",minute:"",greetingsWord:""});Object(s.useEffect)(()=>(Object(u.l)(),T(),t.length&&a.length?e&&Object(m.h)():t.length||a.length||(Object(m.e)(),Object(m.d)()),C(),document.addEventListener("deviceready",P,!1),()=>{f&&clearInterval(f),document.removeEventListener("deviceready",P,!1),document.removeEventListener("backbutton",S,!1)}),[]);const P=()=>{document.addEventListener("backbutton",S,!1)},T=()=>{j(),f=setInterval(()=>{const e=(new Date).getDate();n<e&&($dispatch(Object(d.r)(e)),Object(m.e)()),j()},1e3)},j=()=>{let e=(new Date).getMinutes(),t=(new Date).getHours();e<10&&(e="0"+e),t<10&&(t="0"+t),v=""===v?":":"";let a="";t<6?a="凌晨好！":t<8?a="早上好！":t<11?a="上午好！":t<14?a="中午好！":t<17?a="下午好！":t<19?a="傍晚好！":t<24&&(a="晚上好！"),x({hour:t,minute:e,greetingsWord:a})},C=()=>{isCordova?o&&document.addEventListener("deviceready",m.c,!1):o&&Object(m.b)()},S=()=>{Object(p.b)("/main/myInfo",!0)};return r.a.createElement("div",{className:"sign-main"},r.a.createElement(c.a,{centerText:`${k.greetingsWord}${N||y||w}`,backToPreviousPage:S}),r.a.createElement("div",{className:"body"},r.a.createElement(i.a,{mode:"",icon:null},"您已连续签到",_,"天"),r.a.createElement("div",{className:"sign-area"},r.a.createElement("div",{className:`sign ${!g&&"flick-animation"} ${g}`,onClick:()=>{Object(m.g)(O)}},r.a.createElement("div",{className:"sign-text"},g?"已签到":"签到"),r.a.createElement("div",{id:"now-time"},r.a.createElement("span",{className:"hour"},k.hour),r.a.createElement("span",{className:"middle"},v),r.a.createElement("span",{className:"minute"},k.minute))),h?r.a.createElement("div",{id:"position-location"},"您当前的位置:","object"==typeof h?h.formatted_address:h):"",r.a.createElement("div",{className:`last-sign-time ${h&&"less-margin-value"}`},"上一次签到时间：",r.a.createElement("span",{className:"last-sign"},b)),r.a.createElement("div",{className:"online-persons",onClick:()=>{O.push("/show_online_persons")}},r.a.createElement("div",{className:"text"},"当前"),r.a.createElement("div",{className:"persons"},E),r.a.createElement("div",{className:"text"},"人在线"))),r.a.createElement("div",{className:"count-area"},r.a.createElement("div",{className:"signed"},r.a.createElement("span",{className:"signed-text"},"已签到:"),r.a.createElement("p",{className:"signed-persons"},t.map((e,a)=>r.a.createElement("span",{key:e.username,className:e.origin||"h5"},e.username+(a===t.length-1?"":", "))))),r.a.createElement("div",{className:"not-signed"},r.a.createElement("span",{className:"not-signed-text"},"未签到:"),r.a.createElement("p",{className:"not-signed-persons"},a.map((e,t)=>r.a.createElement("span",{key:e.username,className:e.origin||"h5"},e.username+(t===a.length-1?"":", "))))))))})}}]);