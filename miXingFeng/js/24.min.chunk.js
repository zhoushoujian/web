(window.webpackJsonp=window.webpackJsonp||[]).push([[24,5],{345:function(e,a,i){"use strict";var t=i(0),l=i.n(t),s=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var i=arguments[a];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e};const n=Object(t.forwardRef)((e,a)=>{const{type:i="text",placeholder:t="",value:n="",handleKeyDown:c=(()=>{}),handleChange:r=(()=>{}),maxLength:o=26,style:u={},handleClick:d=(()=>{}),handleBlur:m=(()=>{}),className:h,disabled:g=!1}=e;return l.a.createElement("input",s({},e,{className:`input-component ${h}`,type:i,placeholder:t,value:n,onKeyDown:c,onChange:r,maxLength:o,autoComplete:"off",style:u,onClick:d,onBlur:m,ref:a,disabled:g}))});a.a=n},346:function(e,a,i){"use strict";i(96),i(317)},347:function(e,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=d(i(14)),l=d(i(25)),s=d(i(16)),n=d(i(17)),c=d(i(15)),r=d(i(18)),o=d(i(26)),u=function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(a[i]=e[i]);return a.default=e,a}(i(0));function d(e){return e&&e.__esModule?e:{default:e}}var m=function(e,a){var i={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(i[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(t=Object.getOwnPropertySymbols(e);l<t.length;l++)a.indexOf(t[l])<0&&(i[t[l]]=e[t[l]])}return i},h=function(e){function a(){return(0,s.default)(this,a),(0,c.default)(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return(0,r.default)(a,e),(0,n.default)(a,[{key:"render",value:function(){var e,a,i=this.props,s=i.className,n=i.prefixCls,c=i.children,r=i.text,d=i.size,h=i.overflowCount,g=i.dot,f=i.corner,O=i.hot,b=m(i,["className","prefixCls","children","text","size","overflowCount","dot","corner","hot"]);h=h,r="number"==typeof r&&r>h?h+"+":r,g&&(r="");var p=(0,o.default)((e={},(0,l.default)(e,n+"-dot",g),(0,l.default)(e,n+"-dot-large",g&&"large"===d),(0,l.default)(e,n+"-text",!g&&!f),(0,l.default)(e,n+"-corner",f),(0,l.default)(e,n+"-corner-large",f&&"large"===d),e)),S=(0,o.default)(n,s,(a={},(0,l.default)(a,n+"-not-a-wrapper",!c),(0,l.default)(a,n+"-corner-wrapper",f),(0,l.default)(a,n+"-hot",!!O),(0,l.default)(a,n+"-corner-wrapper-large",f&&"large"===d),a));return u.createElement("span",{className:S},c,(r||g)&&u.createElement("sup",(0,t.default)({className:p},b),r))}}]),a}(u.Component);a.default=h,h.defaultProps={prefixCls:"am-badge",size:"small",overflowCount:99,dot:!1,corner:!1},e.exports=a.default},350:function(e,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){return Object.keys(e).reduce(function(a,i){return"aria-"!==i.substr(0,5)&&"data-"!==i.substr(0,5)&&"role"!==i||(a[i]=e[i]),a},{})},e.exports=a.default},358:function(e,a,i){"use strict";i(353);var t=i(354),l=i.n(t),s=(i(348),i(349)),n=i.n(s),c=(i(150),i(69)),r=i.n(c),o=i(0),u=i.n(o),d=i(95),m=i(4),h=i(98),g=i(361),f=i(8),O=i(371),b=i(38),p=i(1),S=i(3),v=i(11),M=i(9),j=i(2),y=i(31),E=i(24),w=i(34);let N;new RegExp("\\biPhone\\b|\\biPod\\b","i").test(navigator.userAgent)&&(N={onTouchStart:e=>e.preventDefault()});let $=0;const k={action:null};a.a=Object(d.connect)(e=>({soundPlaying:e.fileServer.soundPlaying,soundInstance:e.fileServer.soundInstance,currentPlayingSong:e.fileServer.currentPlayingSong,currentSongTime:e.fileServer.currentSongTime,pauseWhenOver:e.fileServer.pauseWhenOver,playByOrder:e.fileServer.playByOrder,musicCollection:e.fileServer.musicCollection,musicMenuBadge:e.fileServer.musicMenuBadge,username:e.login.username,token:e.login.token,playByRandom:e.fileServer.playByRandom,lastMusicSearchResult:e.fileServer.lastMusicSearchResult,lastSearchAllMusicResult:e.fileServer.lastSearchAllMusicResult,downloadingMusicItems:e.fileServer.downloadingMusicItems,downloadedMusicList:e.fileServer.downloadedMusicList,currentPlayingSongOriginal:e.fileServer.currentPlayingSongOriginal,recentMusicList:e.fileServer.recentMusicList,setMobile:e.myInfo.setMobile,setPermisssions:e.myInfo.setPermisssions,showMusicPlayingFromMusicControl:e.fileServer.showMusicPlayingFromMusicControl,notExistMusicPlayingPage:e.fileServer.notExistMusicPlayingPage,musicPlayListData:e.fileServer.musicPlayListData,musicSharePosition:e.fileServer.musicSharePosition,musicSavePosition:e.fileServer.musicSavePosition,musicRecentPosition:e.fileServer.musicRecentPosition,musicHomePosition:e.fileServer.musicHomePosition,mySongList:e.fileServer.mySongList}),()=>({}))(({original:e,soundInstance:a,currentPlayingSong:i,currentSongTime:t,soundPlaying:s,pageType:c,pauseWhenOver:d,playByOrder:R,musicCollection:x=[],musicMenuBadge:P,username:F,token:A,playByRandom:C,setMobile:L,setPermisssions:q,musicDataList:I,lastMusicSearchResult:D,lastSearchAllMusicResult:Q,recentMusicList:_,noShowMusicPlaying:K=!1,myMusicPage:T=!1,searchMusicPage:W=!1,notExistMusicPlayingPage:J=!1,musicPlayerRef:G,musicPlayListData:H,height:B,musicSharePosition:z,musicSavePosition:U,musicRecentPosition:V,musicHomePosition:Y,mySongList:Z})=>{const X=Object(w.n)(),ee=Object(w.m)(),ae=Object(w.l)(),ie=Object(w.k)(),te=Object(m.useHistory)();Object(o.useEffect)(()=>(h.Howler.volume(.8),e!==j.a.musicOriginal.musicDownloading&&a&&Object(M.t)(),document.addEventListener("deviceready",le,!1),()=>{X?$dispatch(Object(p.S)($)):ee?$dispatch(Object(p.R)($)):ae?$dispatch(Object(p.Q)($)):ie&&$dispatch(Object(p.L)($)),document.removeEventListener("deviceready",le,!1),document.removeEventListener("backbutton",se,!1)}),[]);const le=()=>{document.addEventListener("backbutton",se,!1)},se=()=>{if(!window.cancelMenuFirst&&!window.specialBack)if($getState().fileServer.showMusicPlayingFromMusicControl||Object(S.h)())Object(S.z)();else if(T)Object(S.b)("/my_song_lists_detail"===getRoute()?"/my_song_lists_page":"/my_download_middle_page",!0);else{if(!W)return;Object(S.b)("/search_column",!0)}},ne=()=>{window.cancelMenuFirst=!0,document.addEventListener("backbutton",re)},ce=()=>{window.cancelMenuFirst&&(window.cancelMenuFirst=!1,document.removeEventListener("backbutton",re),document.removeEventListener("deviceready",ne),document.addEventListener("backbutton",S.r))},re=()=>{const e=document.querySelector(".am-action-sheet-button-list div:nth-last-child(1)");e&&e.click(),k.action&&(k.action.close(),k.action=null),ce()},oe=(e,a,i,t,l,s,n)=>{Object(S.j)("提示",u.a.createElement(b.a,{textFragment:`确定从本地删除 <span class="delete-alert">${e}</span> 吗`}),"确定",()=>Object(M.G)(Object(M.H)(a),"music").then(()=>{ue(s,a),a===i&&Object(M.q)(t,l,s,n)}).catch(e=>{logger.error("删除音乐过程中发生了错误 isFileFinished",e.stack||e.toString()),Object(S.q)(e,`musicPlayer removeFileFromDownload filenameOrigin: ${a}`)}))},ue=(e,a)=>{if(e===j.a.musicOriginal.musicSearch){let e,i;D.some((i,t)=>Object(M.H)(i.filenameOrigin)===Object(M.H)(a)&&(e=t,!0));const t=JSON.parse(JSON.stringify(D));t.splice(e,1),Q.some((e,t)=>Object(M.H)(e.filenameOrigin)===Object(M.H)(a)&&(i=t,!0));const l=JSON.parse(JSON.stringify(Q));l.splice(i,1),$dispatch(Object(p.y)(t)),$dispatch(Object(p.G)(l))}},de=(m,h)=>u.a.createElement(o.Fragment,null,u.a.createElement("div",{className:"music-content",onClick:()=>Object(M.o)({filePath:m.filePath,filename:m.filename,filenameOrigin:m.filenameOrigin,uploadUsername:m.uploadUsername,fileSize:m.fileSize,duration:m.duration,songOriginal:m.original,original:e,musicDataList:I,pageType:c,payPlay:Number(m.payPlay),musicId:m.id,songInfo:m})},u.a.createElement("div",{className:`num ${Object(S.d)(h+1)}`},h+1),u.a.createElement("div",{className:"music-info"},u.a.createElement("div",{className:`info ${m.saved&&c!==j.a.musicOriginal.savedSongs?"song-saved":""}`},u.a.createElement("div",{className:`filename ${me?m.saved?"downloading-save":"downloading":""}`,dangerouslySetInnerHTML:{__html:Object(M.s)(m.filename)}}),Number(m.payPlay)?u.a.createElement("i",{className:"fa fa-lock copyright-song-flag","aria-hidden":"true"}):"",m.saved&&c!==j.a.musicOriginal.savedSongs&&u.a.createElement("i",{className:"fa fa-heart saved-song-flag","aria-hidden":"true"}),e!==j.a.musicOriginal.homeRecommend&&"onlineMusic"!==c&&"onlineMusicSearchALl"!==c?m.original===j.a.musicOriginal.netEaseCloud||m.original===j.a.musicOriginal.homeRecommend?u.a.createElement("div",{className:"net-ease-source-flag"},"网易云"):m.original===j.a.musicOriginal.qqMusic?u.a.createElement("div",{className:"qq-music-source-flag"},"QQ音乐"):m.original===j.a.musicOriginal.kuGouMusic?u.a.createElement("div",{className:"ku-gou-music-source-flag"},"酷狗音乐"):m.original===j.a.musicOriginal.kuWoMusic?u.a.createElement("div",{className:"ku-wo-music-source-flag"},"酷我音乐"):null:null,m.mvId?u.a.createElement("i",{className:"fa fa-youtube-play","aria-hidden":"true",onClick:e=>((e,a,i,t)=>{e.stopPropagation(),te.push({pathname:"/music_mv_Player",query:{mvId:a,original:i,filename:Object(M.J)(t),lastLocation:getRoute()}})})(e,m.mvId,m.original,m.filename)}):null,me?u.a.createElement("div",{className:"song-duration-time downloading"},m.progress):null),i===m.filenameOrigin?((e,a,i)=>u.a.createElement("div",{className:"audio-player"},u.a.createElement("audio",{preload:"auto",className:"audio-selector"},u.a.createElement("source",{src:e})),u.a.createElement("div",{className:"audio-player-time audio-player-time-current"},Object(M.Q)(a)),u.a.createElement("div",{className:"audio-player-bar"},u.a.createElement("div",{className:"audio-player-bar-loaded",style:{width:"100%"}}),u.a.createElement("div",{className:"audio-player-bar-played",style:{width:a/i*100+"%"}})),u.a.createElement("div",{className:"audio-player-time audio-player-time-duration"},Object(M.Q)(i))))(m.filePath,t,m.duration):u.a.createElement("div",{className:"upload-duration"},u.a.createElement("div",{className:`upload-user ${me?"downloading":""}`},m.uploadUsername||"未知",(a=>a?e!==j.a.musicOriginal.musicDownloading?("number"==typeof a&&(a=new Date(a).format("yyyy-MM-dd")),e===j.a.musicOriginal.musicShare||e===j.a.musicOriginal.musicSearch||e===j.a.musicOriginal.musicFinished?" "+a.split(" ")[0]:""):void 0:"")(m.date)),me?u.a.createElement("div",{className:"download-progress"},u.a.createElement(l.a,{percent:m.received?m.received/m.fileSize*100:0,position:"normal"})):u.a.createElement("div",{className:`song-duration-time ${Object(S.d)(h+1)}`},Object(M.Q)(m.duration)))),!s&&e!==j.a.musicOriginal.musicDownloading&&i===m.filenameOrigin&&u.a.createElement("div",{className:"pause-button-overlay"},u.a.createElement("div",{className:"pause-button"},u.a.createElement("div",{className:"triangle"})))),e!==j.a.musicOriginal.musicDownloading?u.a.createElement("div",{className:"menu",onClick:((t,l,o,m,h,g,O,E,w,$,D,Q)=>{const K=r.a.operation;document.removeEventListener("backbutton",S.r,!1),document.addEventListener("deviceready",ne),t=Object(M.J)(t);const T=JSON.parse(JSON.stringify(P)),W=x.map(e=>Object(M.H)(e.filenameOrigin)),J=["播放",-1!==W.indexOf(Object(M.H)(o))?"已收藏":"收藏","单曲播放","单曲循环","顺序播放","随机播放","添加到播放列表","添加到歌单","下载","删除","取消"];s&&o===i&&(J[0]="暂停"),$=e===j.a.musicOriginal.musicShare||e===j.a.musicOriginal.musicSearch?` ${$}`:"";const G={options:J,cancelButtonIndex:J.length-1,destructiveButtonIndex:J.length-2,badges:T,message:l?`大小: ${Object(M.b)(l)}${$}`:$,title:t,maskClosable:!0,"data-seed":"logId",wrapProps:N};e!==j.a.musicOriginal.musicShare&&e!==j.a.musicOriginal.musicSearch||q.removeMusic||(J.splice(-2,1),delete G.destructiveButtonIndex),e===j.a.musicOriginal.musicFinished?(J.splice(8,1),G.destructiveButtonIndex=J.length-2):((c===j.a.musicOriginal.savedSongs||"onlineMusic"===c||"onlineMusicSearchALl"===c&&e!==j.a.musicOriginal.musicSearch||c===j.a.musicOriginal.homeRecommend||c===j.a.musicOriginal.musicPlayList)&&(J.splice(-2,1),delete G.destructiveButtonIndex,c===j.a.musicOriginal.musicPlayList&&(J[6]="移除")),E&&T.push({index:8,text:"版"})),n.a.showActionSheetWithOptions(G,s=>{logger.info("music player showMenu buttonIndex",s);const n=I.map(e=>e.filenameOrigin),r=n.indexOf(o);if(-1===r)return logger.error("showActionSheetWithOptions currentFileIndex === -1 filename",t),alert(t+"已被删除");const N=I[r].filePath;switch(s){case 0:Object(M.o)({filePath:N,filename:t,filenameOrigin:o,uploadUsername:m,fileSize:l,duration:h,songOriginal:g,original:e,musicDataList:I,pageType:c,payPlay:O,musicId:w,songInfo:Q});break;case 1:Object(M.O)({savedMusicFilenameOriginalArr:W,filenameOrigin:o,musicCollection:x,musicDataList:I,currentFileIndex:r,original:e,e:null,pageType:c});break;case 2:(!d||R||C)&&(a&&a.loop(!1),$dispatch(Object(p.jb)(!0)),$dispatch(Object(p.kb)(!1)),$dispatch(Object(p.lb)(!1)),alert("单曲播放"),$dispatch(Object(p.N)([{index:2,text:"✔️"},{index:3,text:""},{index:4,text:""},{index:5,text:""}])));break;case 3:d&&(a&&a.loop(!0),$dispatch(Object(p.jb)(!1)),$dispatch(Object(p.kb)(!1)),$dispatch(Object(p.lb)(!1)),alert("单曲循环"),$dispatch(Object(p.N)([{index:2,text:""},{index:3,text:"✔️"},{index:4,text:""},{index:5,text:""}])));break;case 4:R||(a&&a.loop(!1),$dispatch(Object(p.jb)(!0)),$dispatch(Object(p.kb)(!0)),$dispatch(Object(p.lb)(!1)),alert("顺序播放"),$dispatch(Object(p.N)([{index:2,text:""},{index:3,text:""},{index:4,text:"✔️"},{index:5,text:""}])));break;case 5:C||(a&&a.loop(!1),$dispatch(Object(p.jb)(!0)),$dispatch(Object(p.kb)(!1)),$dispatch(Object(p.lb)(!0)),alert("随机播放"),$dispatch(Object(p.N)([{index:2,text:""},{index:3,text:""},{index:4,text:""},{index:5,text:"✔️"}])));break;case 6:{let e=JSON.parse(JSON.stringify(H));if(c!==j.a.musicOriginal.musicPlayList){if(O&&!$getState().myInfo.setMusicVip)return alert("不可以添加有版权的音乐");{let a=JSON.parse(JSON.stringify(Q));a.pageType=c,e.push(a);const i={};e=e.filter(e=>!i[e.filenameOrigin]&&(i[e.filenameOrigin]=!0,!0)),a=null,alert("添加成功")}}else e=e.filter(e=>e.filenameOrigin!==Q.filenameOrigin),alert("已取消");$dispatch(Object(p.P)(e));break}case 7:if(Object.keys(Z).length){const e=Object(M.y)({musicDataList:I,currentFileIndex:r,filenameOrigin:o,operationAction:k,removeListenBackFunc:ce});if(e.length)return void(k.action=K(e));alert("没有其他歌单了");break}alert("请先创建歌单");break;case 8:e===j.a.musicOriginal.musicFinished?oe(t,o,i,r,n,e,I):Object(M.N)({musicDataList:I,filename:t,uploadUsername:m,fileSize:l,musicSrc:N,filenameOrigin:o,duration:h,songOriginal:g,musicId:w,payDownload:E,mvId:Q.mvId,md5:Q.md5,albumId:Q.albumId});break;case 9:{if(ce(),("onlineMusic"===c||"onlineMusicSearchALl"===c||e===j.a.musicOriginal.musicFinished)&&e!==j.a.musicOriginal.musicSearch)return;if(!A)return goRoute(void 0,"/login");const a={username:F||L,token:A,filename:t,type:"default-music"};if(e!==j.a.musicOriginal.musicShare&&e!==j.a.musicOriginal.musicSearch||"downloaded"===D)e===j.a.musicOriginal.musicRecent?Object(S.j)("提示",u.a.createElement(b.a,{textFragment:`确定要删除 <span class="delete-alert">${t}</span> 的播放记录吗`}),"确定",()=>{let a=null;if(_.some((e,i)=>e.filenameOrigin===o&&(a=i,!0)),null!==a){const t=JSON.parse(JSON.stringify(_));if(t.splice(a,1),$dispatch(Object(p.nb)(t)),Object(y.c)(o),o===i){const a=JSON.parse(JSON.stringify(_));Object(M.q)(r,n,e,a)}}else logger.error("确定要删除播放记录吗 filenameOrigin, recentMusicList",o,_)}):"downloaded"===D?oe(t,o,i,r,n,e,I):c===j.a.musicOriginal.myMusicListPage&&Object(M.I)(o,t);else{if(!q.removeMusic)return;Object(S.j)("提示",u.a.createElement(b.a,{textFragment:`确定要从服务器删除 <span class="delete-alert">${t}</span> 吗`}),"确定",()=>(Object(S.B)(),axios.delete(f.a.delFileV2,{data:a}).then(a=>{if(window.toast.hide(),!window.cancelAxiosRequest)return"success"===a.result?($dispatch(Object(v.i)(a.token)),alert("删除成功"),ue(e,o)):"file_deleted"===a.result?(alert("文件已删除!"),ue(e,o)):void logger.error("HTTP_URL.delFileV2 result",a)}).then(()=>{o===i&&Object(M.q)(r,n,e,I)}).catch(e=>{window.toast.hide(),logger.error("HTTP_URL.delFileV2 err",e),Object(S.q)(e,`musicPlayer delFile filenameOrigin: ${o}`)}).finally(()=>{window.cancelAxiosRequest=!1})))}return}}ce()})}).bind(void 0,m.filename,m.fileSize,m.filenameOrigin,m.uploadUsername,m.duration,m.original,Number(m.payPlay),Number(m.payDownload),m.id,m.date,m.status,m)},u.a.createElement("div",{className:"dot"}),u.a.createElement("div",{className:"dot"}),u.a.createElement("div",{className:"dot"})):u.a.createElement("div",{className:"move-downloading-item fa fa-remove",onClick:((e,a)=>{Object(S.j)("提示",u.a.createElement(b.a,{textFragment:`确定要移除下载 <span class="delete-alert">${e}</span> 吗`}),"确定",()=>{const e=Object(M.H)(a);window.eventEmit.$emit(`FileTransfer-${e}`,"abort"),window[`remove-download-${e}`]=!0,setTimeout(()=>{window[`remove-download-${e}`]=!1},1500);const{downloadingMusicItems:i}=$getState().fileServer,t=JSON.parse(JSON.stringify(i));for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)&&i[e].filenameOrigin===a){t.splice(e,1),$dispatch(Object(p.o)(t)),Object(E.c)(a);break}logger.info("saveFileToLocal param, downloadingMusicItems",i)})}).bind(void 0,m.filename,m.filenameOrigin)}));Object(M.n)(I,c);const me=e===j.a.musicOriginal.musicDownloading;let he=0;return X&&z?he=z:ee&&U?he=U:ae&&V?he=V:ie&&Y&&(he=Y),u.a.createElement(o.Fragment,null,u.a.createElement("div",{className:"music-list-container",style:{height:c===j.a.musicOriginal.musicFinished?"auto":"100%"},ref:G},B?u.a.createElement(g.a,{width:window.screen.width,height:B,rowCount:I.length,rowHeight:66,onScroll:({scrollTop:e})=>{$=e,X&&z?$dispatch(Object(p.S)(0)):ee&&U?$dispatch(Object(p.R)(0)):ae&&V?$dispatch(Object(p.Q)(0)):ie&&Y&&$dispatch(Object(p.L)(0))},scrollTop:he||void 0,rowRenderer:({key:e,index:a,style:i})=>u.a.createElement("div",{key:e,style:i,className:"music-list",id:Object(w.d)(I[a].filenameOrigin)},de(I[a],a))}):I.map((e,a)=>u.a.createElement("div",{key:e.filenameOrigin,className:"music-list",id:Object(w.d)(e.filenameOrigin)},de(e,a)))),c===j.a.musicOriginal.savedSongs&&u.a.createElement("div",{className:"music-picture"}),!K&&!J&&u.a.createElement(O.default,{fromMusicControl:!0,myMusicPage:T,searchMusicPage:W}))})},365:function(e,a,i){"use strict";i(353);var t=i(354),l=i.n(t),s=(i(348),i(349)),n=i.n(s),c=i(0),r=i.n(c),o=i(4),u=i(95),d=i(375),m=i.n(d),h=i(361),g=i(38),f=i(3),O=i(8),b=i(2),p=i(11),S=i(9),v=i(1),M=i(20),j=i(34);function y(e){return function(){var a=e.apply(this,arguments);return new Promise(function(e,i){return function t(l,s){try{var n=a[l](s),c=n.value}catch(e){return void i(e)}if(!n.done)return Promise.resolve(c).then(function(e){t("next",e)},function(e){t("throw",e)});e(c)}("next")})}}let E;new RegExp("\\biPhone\\b|\\biPod\\b","i").test(navigator.userAgent)&&(E={onTouchStart:e=>e.preventDefault()});let w=0;a.a=Object(u.connect)(e=>({username:e.login.username,token:e.login.token,downloadingFileList:e.fileServer.downloadingFileList,lastFileSearchResult:e.fileServer.lastFileSearchResult,lastSearchAllFileResult:e.fileServer.lastSearchAllFileResult,setMobile:e.myInfo.setMobile,setPermisssions:e.myInfo.setPermisssions,downloadedFileList:e.fileServer.downloadedFileList,fileSharePosition:e.fileServer.fileSharePosition}),()=>({}))(({username:e,token:a,downloadingFileList:i,downloadedFileList:t,lastFileSearchResult:s,lastSearchAllFileResult:u,setMobile:d,setPermisssions:N={},fileDataList:$=[],original:k,height:R,fileSharePosition:x})=>{const P="fileDownloading"===k,F=Object(j.j)(),A=Object(o.useHistory)();Object(c.useEffect)(()=>()=>{F&&$dispatch(Object(v.q)(w))},[]);const C=()=>{window.cancelMenuFirst=!0,document.addEventListener("backbutton",L,!1)},L=()=>{window.cancelMenuFirst=!1;const e=document.querySelector(".am-action-sheet-button-list div:nth-last-child(1)");e&&e.click(),e&&e.click()},q=(()=>{var e=y(function*(e,a,i,l,s,c,o,u){try{document.removeEventListener("backbutton",f.r,!1),document.addEventListener("deviceready",C),e=Object(S.J)(e);let d="下载",m="fileFinished"===k;m?d="打开":"fileShare"!==k&&"fileSearch"!==k||t.some(function(e){return!(Object(S.H)(e.filenameOrigin)!==Object(S.H)(s)||e.status&&"downloaded"!==e.status||(d="打开",m=!0,0))});const h=[d,"分享","删除","取消"];"fileFinished"===k||"downloaded"===o?(h.splice(1,1),c=""):"fileShare"===k&&(c=` ${c}`),"fileShare"!==k&&"fileSearch"!==k||(isCordova?N.removeFile||h.splice(2,1):(h.splice(1,1),N.removeFile||h.splice(1,1)));const O={options:h,cancelButtonIndex:h.length-1,destructiveButtonIndex:h.length-2,message:`大小: ${Object(S.b)(a)}${c}`,title:e,maskClosable:!0,"data-seed":"logId",wrapProps:E};n.a.showActionSheetWithOptions(O,function(t){switch(logger.info("file manage showMenu buttonIndex",t),t){case 0:m?Q(e,s):Object(S.M)(e,l,a,i,!1,s,A,Q,u);break;case 1:if("fileFinished"===k||"downloaded"===o)Object(f.j)("提示",r.a.createElement(g.a,{textFragment:`确定从本地删除 <span class="delete-alert">${e}</span> 吗`}),"确定",function(){Object(S.G)(Object(S.H)(s),"file").then(function(){D(k,s)}).catch(function(a){logger.error("删除文件过程中发生了错误 isFileFinished",a.stack||a.toString()),Object(f.q)(a,`fileManage removeFileFromDownload filename ${e}`)})});else if(isCordova){const t=`${b.a.appStaticDirectory}#/show_file_info?filename=${e}&fileSize=${Object(S.b)(a)}&filePath=${i}`;Object(f.w)({title:e,description:"我分享了一个文件,快来看看吧",thumb:`${b.a.appStaticDirectory}logo.png`,webpageUrl:t})}else N.removeFile&&I(e,s);break;case 2:isCordova&&("fileShare"===k||"fileSearch"===k)&&"downloaded"!==o&&N.removeFile&&I(e,s);break;default:logger.warn("buttonIndex default")}window.cancelMenuFirst=!1,document.removeEventListener("backbutton",L),document.removeEventListener("deviceready",C),document.addEventListener("backbutton",f.r,!1)})}catch(e){logger.error("fileManage showMenu err",e)}});return function(a,i,t,l,s,n,c,r){return e.apply(this,arguments)}})(),I=(i,t)=>{if(!a)return goRoute(void 0,"/login");const l={username:e||d,token:a,filename:i,type:"default-file"};Object(f.j)("提示",r.a.createElement(g.a,{textFragment:`确定从服务器删除 <span class="delete-alert">${i}</span> 吗`}),"确定",()=>(Object(f.B)(),axios.delete(O.a.delFileV2,{data:l}).then(e=>{if(window.toast.hide(),!window.cancelAxiosRequest)return"file_deleted"===e.result?(alert("文件已删除!"),$dispatch(Object(p.i)(e.token)),D(k,t)):"success"===e.result?(alert("删除成功!"),$dispatch(Object(p.i)(e.token)),D(k,t)):void alert("删除失败!")}).catch(e=>{window.toast.hide(),logger.error("删除文件过程中发生了错误",e.stack||e.toString()),Object(f.q)(e,`delFile dataInfo: ${JSON.stringify(l)}`)}).finally(()=>{window.cancelAxiosRequest=!1})))},D=(e,a)=>{if("fileSearch"===e){let e,i;s.some((i,t)=>i.filenameOrigin===a&&(e=t,!0));const t=JSON.parse(JSON.stringify(s));t.splice(e,1),u.some((e,t)=>e.filenameOrigin===a&&(i=t,!0));const l=JSON.parse(JSON.stringify(u));u.splice(i,1),$dispatch(Object(v.u)(t)),$dispatch(Object(v.D)(l))}},Q=(e,a)=>{let i=m.a.lookup(e);i||(i="text/plain",alert("不支持打开的的文件类型，请提交反馈")),Object(S.x)(e,i,Object(S.H)(a))},_=(()=>{var e=y(function*(e,a,t,l,s,n){e=Object(S.J)(e),"fileFinished"===k?Q(e,s):"fileShare"===k||"fileSearch"===k?yield Object(S.M)(e,a,t,l,!1,s,A,Q,n):"fileDownloading"===k&&i.some(function(i){return i.filenameOrigin===s&&(s=s.replace(/^downloading_/,""),logger.info("downloadOrOpenFile filenameOrigin",s),"失败"===i.progress||"已取消"===i.progress?Object(S.M)(e,a,t,l,!0,s,A,Q,n):(window.eventEmit.$emit(`FileTransfer-${s}`,"abort"),setTimeout(function(){window[`cancel-download-${Object(S.H)(s)}`]||Object(S.M)(e,a,t,l,!0,s,A,Q,n)},500)),!0)})});return function(a,i,t,l,s,n){return e.apply(this,arguments)}})(),K=(e,a)=>r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:`file-content ${P?"downloading":""}`,onClick:_.bind(void 0,e.filename,e.uploadUsername,e.fileSize,e.filePath,e.filenameOrigin,e.md5)},r.a.createElement("div",{className:`num ${Object(f.d)(a+1)}`},a+1),r.a.createElement("div",{className:"file-info"},r.a.createElement("div",{className:`info ${"fileFinished"===k?"center":""} ${e.downloaded?"downloaded":""}`},r.a.createElement("div",{className:`filename ${P?"downloading":""}`,dangerouslySetInnerHTML:{__html:e.filename}}),e.downloaded&&r.a.createElement("div",{className:"downloaded-text"},"已下载"),P?r.a.createElement("div",{className:"file-size downloading"},e.progress):null),r.a.createElement("div",{className:"upload-info"},r.a.createElement("div",{className:`upload-user ${P?"downloading":""}`},`${"fileFinished"!==k?e.uploadUsername:""}${(e=>e?"fileDownloading"===k?"":("number"==typeof e&&(e=new Date(e).format("yyyy-MM-dd"))," "+e.split(" ")[0]):"")(e.date)}`),"fileShare"===k||"fileSearch"===k?r.a.createElement("div",{className:`file-size ${Object(f.d)(a+1)}`},Object(S.b)(e.fileSize)):P?r.a.createElement("div",{className:"download-progress"},r.a.createElement(l.a,{percent:e.received?e.received/e.fileSize*100:0,position:"normal"})):null))),P?r.a.createElement("div",{className:"move-downloading-item fa fa-remove",onClick:((e,a)=>{Object(f.j)("提示",r.a.createElement(g.a,{textFragment:`确定要移除下载 <span class="delete-alert">${e}</span> 吗`}),"确定",()=>{const e=Object(S.H)(a);window.eventEmit.$emit(`FileTransfer-${e}`,"abort"),window[`remove-download-${e}`]=!0,setTimeout(()=>{window[`remove-download-${e}`]=!1},1500);const{downloadingFileList:i}=$getState().fileServer,t=JSON.parse(JSON.stringify(i));for(const e in i)if(t[e].filenameOrigin===a){t.splice(e,1),$dispatch(Object(v.n)(t)),Object(M.c)(a);break}})}).bind(void 0,e.filename,e.filenameOrigin)}):r.a.createElement("div",{className:"menu",onClick:q.bind(void 0,e.filename,e.fileSize,e.filePath,e.uploadUsername,e.filenameOrigin,e.date,e.status,e.md5)},r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"})));let T=0;return F&&x&&(T=x),r.a.createElement("div",{className:"file-manage-container"},R?r.a.createElement(h.a,{width:window.screen.width,height:R,rowCount:$.length,rowHeight:66,onScroll:({scrollTop:e})=>{w=e,F&&x&&$dispatch(Object(v.q)(0))},scrollTop:T||void 0,rowRenderer:({key:e,index:a,style:i})=>r.a.createElement("div",{key:e,style:i,className:"file-list"},K($[a],a))}):$.map((e,a)=>r.a.createElement("div",{className:"file-list",key:e.filenameOrigin},K(e,a))))})},370:function(e,a,i){"use strict";var t=i(0),l=i.n(t),s=i(95),n=i(336),c=i(345),r=i(365),o=i(358),u=i(8),d=i(1),m=i(3),h=i(2),g=i(9);let f="",O=null;a.a=Object(s.connect)(e=>({noMoreNetEaseCloudResults:e.fileServer.noMoreNetEaseCloudResults,noMoreQQMusicResults:e.fileServer.noMoreQQMusicResults,noMoreKuGouMusicResults:e.fileServer.noMoreKuGouMusicResults,noMoreKuWoMusicResults:e.fileServer.noMoreKuWoMusicResults,noMoreSearchAllFileResults:e.fileServer.noMoreSearchAllFileResults,noMoreSearchAllMusicResults:e.fileServer.noMoreSearchAllMusicResults,noMoreSearchAllNetEaseCloudResults:e.fileServer.noMoreSearchAllNetEaseCloudResults,noMoreSearchAllQQMusicResults:e.fileServer.noMoreSearchAllQQMusicResults,noMoreSearchAllKuGouMusicResults:e.fileServer.noMoreSearchAllKuGouMusicResults,noMoreSearchAllKuWoMusicResults:e.fileServer.noMoreSearchAllKuWoMusicResults,musicCollection:e.fileServer.musicCollection,downloadedMusicList:e.fileServer.downloadedMusicList,downloadedFileList:e.fileServer.downloadedFileList,defaultSearchRealKey:e.common.defaultSearchRealKey}),()=>({}))(({lastSearchResult:e,lastSearchString:a,type:i,musicCollection:s,fileDatalist:b,musicDatalist:p,navbarText:S,placeholder:v,noMoreNetEaseCloudResults:M,noMoreQQMusicResults:j,noMoreKuGouMusicResults:y,noMoreKuWoMusicResults:E,noMoreSearchAllFileResults:w,noMoreSearchAllMusicResults:N,noMoreSearchAllNetEaseCloudResults:$,noMoreSearchAllQQMusicResults:k,noMoreSearchAllKuGouMusicResults:R,noMoreSearchAllKuWoMusicResults:x,downloadedMusicList:P,downloadedFileList:F,currentQueryStringWithResults:A,defaultSearchRealKey:C})=>{const[L,q]=Object(t.useState)(!1),[I,D]=Object(t.useState)(!1),[Q,_]=Object(t.useState)(!1),[K,T]=Object(t.useState)(!1),[W,J]=Object(t.useState)(!1),[G,H]=Object(t.useState)(!1),[B,z]=Object(t.useState)(!1),[U,V]=Object(t.useState)(!1),Y=Object(t.useRef)();Object(t.useEffect)(()=>{D(!!e.length),!a&&Y.current&&Y.current.focus()},[]);const Z=e=>"searchAll"===i?`searchAll_${e.filenameOrigin?e.filenameOrigin:e.filename+"_"+e.md5+".mp3"}`:"onlineMusic"===i?"onlineMusic_"+e.filename+"_"+e.md5+".mp3":"music"===i?"searchMusic_"+e.filenameOrigin:void 0,X=(e,a,i)=>{switch(a=JSON.parse(JSON.stringify(a)),"file"!==e&&"fileSearchAll"!==e&&a.forEach(e=>{e.filenameOrigin=Z(e),(e=>{s.forEach(a=>{Object(g.H)(a.filenameOrigin)===Object(g.H)(e.filenameOrigin)&&(e.saved=!0)})})(e)}),a.forEach(a=>{let t=a.filename;t="file"===e||"music"===e?(t=t.split(f)).join(`<span class="hight-light-keyword">${f}</span>`):(t=t.split(i||A||f)).join(`<span class="hight-light-keyword">${i||A||f}</span>`),a.filename=t}),e){case"file":$dispatch(Object(d.u)(a));break;case"music":$dispatch(Object(d.y)(a));break;case h.a.musicOriginal.netEaseCloud:$dispatch(Object(d.A)(a));break;case h.a.musicOriginal.qqMusic:$dispatch(Object(d.C)(a));break;case h.a.musicOriginal.kuGouMusic:$dispatch(Object(d.w)(a));break;case h.a.musicOriginal.kuWoMusic:$dispatch(Object(d.x)(a));break;case"onlineMusic":$dispatch(Object(d.A)([])),$dispatch(Object(d.C)([])),$dispatch(Object(d.w)([])),$dispatch(Object(d.x)([]));break;case"searchAll":$dispatch(Object(d.D)([])),$dispatch(Object(d.G)([])),$dispatch(Object(d.H)([])),$dispatch(Object(d.I)([])),$dispatch(Object(d.E)([])),$dispatch(Object(d.F)([]));break;case"netEaseCloudSearchAll":$dispatch(Object(d.H)(a));break;case"qqMusicSearchAll":$dispatch(Object(d.I)(a));break;case"kuGouMusicSearchAll":$dispatch(Object(d.E)(a));break;case"kuWoMusicSearchAll":$dispatch(Object(d.F)(a));break;case"fileSearchAll":$dispatch(Object(d.D)(a));break;case"musicSearchAll":$dispatch(Object(d.G)(a))}},ee=(e,a)=>{switch(f=a,e){case"file":$dispatch(Object(d.v)(a));break;case"music":$dispatch(Object(d.z)(a));break;case"onlineMusic":$dispatch(Object(d.B)(a));break;case"searchAll":$dispatch(Object(d.J)(a))}},ae=e=>{try{D(!1);const a=e?e.target.value:"";if(ee(i,a),!a)return _(!1),T(!1),J(!1),H(!1),z(!1),V(!1),void(O&&clearInterval(O));"music"===i||"file"===i?ie(a):(O&&clearInterval(O),O=setTimeout(()=>{ie(a),O=null},800))}catch(e){logger.error("SearchResourceComponent updateValue type",i,"err",e),alertDebug("SearchResourceComponent updateValue err")}},ie=e=>{if(logger.info("SearchResourceComponent getAutoSuggest query",e),"searchAll"!==i&&"onlineMusic"!==i||!v||"搜索"===v||e||ee(i,e=C),e){if(q(!0),_(!1),T(!1),J(!1),H(!1),z(!1),V(!1),"onlineMusic"===i)return $dispatch(Object(d.ab)(!1)),$dispatch(Object(d.bb)(!1)),$dispatch(Object(d.Y)(!1)),$dispatch(Object(d.Z)(!1)),le(e,h.a.musicOriginal.netEaseCloud,h.a.musicOriginal.qqMusic,h.a.musicOriginal.kuGouMusic,h.a.musicOriginal.kuWoMusic);if("file"===i||"music"===i)te(e,i);else if("searchAll"===i)return $dispatch(Object(d.gb)(!1)),$dispatch(Object(d.hb)(!1)),$dispatch(Object(d.db)(!1)),$dispatch(Object(d.eb)(!1)),le(e,"netEaseCloudSearchAll","qqMusicSearchAll","kuGouMusicSearchAll","kuWoMusicSearchAll").then(()=>{te(e,"fileSearchAll",3),te(e,"musicSearchAll",3)})}},te=(e,a,i)=>{if(!e)return;let t=[],l=[];if("file"===a||"fileSearchAll"===a){const e=[...F,...b];l=JSON.parse(JSON.stringify(e))}else if("music"===a||"musicSearchAll"===a){const e=[...P,...p];l=JSON.parse(JSON.stringify(e))}(l=Object.values(Object(g.F)(l))).forEach(a=>{a.filename.includes(e)&&t.push(a)}),i?(t.length<=i?"fileSearchAll"===a?$dispatch(Object(d.cb)(!0)):"musicSearchAll"===a&&$dispatch(Object(d.fb)(!0)):"fileSearchAll"===a?$dispatch(Object(d.cb)(!1)):"musicSearchAll"===a&&$dispatch(Object(d.fb)(!1)),t=t.slice(0,i)):"fileSearchAll"===a?$dispatch(Object(d.cb)(!0)):"musicSearchAll"===a&&$dispatch(Object(d.fb)(!0)),X(a,t,e),q(!1),D(!0)},le=(e,a,t,l,s)=>{if(e)return logger.info("SearchResourceComponent fetchOnlineSongs query",e),axios.get(u.a.getOnlineMusicLists.format({query:e})).then(n=>{const c=n.response;logger.info("SearchResourceComponent fetchOnlineSongs result"),"onlineMusic"===i?$dispatch(Object(d.j)(e)):"searchAll"===i&&$dispatch(Object(d.i)(e)),q(!1),X(a,c.netEaseCloud,e),X(t,c.qqMusic,e),X(l,c.kuGouMusic,e),X(s,c.kuWoMusic,e),Object(g.w)({msg:"search online music query: "+e})}).catch(a=>(q(!1),Object(m.q)(a,`fetchOnlineSongs ${e}`)))},se=e=>{let i;if(e===h.a.musicOriginal.netEaseCloud||"netEaseCloudSearchAll"===e){if(Q||!A)return;i=u.a.getNetEaseCloudMusicLists,_(!0)}else if(e===h.a.musicOriginal.qqMusic||"qqMusicSearchAll"===e){if(K||!A)return;i=u.a.getQQMusicLists,T(!0)}else if(e===h.a.musicOriginal.kuGouMusic||"kuGouMusicSearchAll"===e){if(W||!A)return;i=u.a.getKuGouMusicLists,J(!0)}else if(e===h.a.musicOriginal.kuWoMusic||"kuWoMusicSearchAll"===e){if(G||!A)return;i=u.a.getKuWoMusicLists,H(!0)}else{if("file"===e){if(B||!a)return;return z(!0),void te(a,"fileSearchAll")}if("music"===e){if(U||!a)return;return V(!0),void te(a,"musicSearchAll")}}return logger.info("SearchResourceComponent showMoreSearchResult original, currentQueryStringWithResults",e,A),axios.get(i.format({query:A})).then(a=>{const i=a.response;logger.info("SearchResourceComponent showMoreSearchResult original, result.length",e,i.length),ne(e,i)}).catch(a=>(ne(e,null),Object(m.q)(a,`showMoreSearchResult axios ${e}`)))},ne=(e,a)=>{e===h.a.musicOriginal.netEaseCloud||"netEaseCloudSearchAll"===e?(a&&X(e,a,null),e===h.a.musicOriginal.netEaseCloud?$dispatch(Object(d.ab)(!0)):$dispatch(Object(d.gb)(!0)),_(!1)):e===h.a.musicOriginal.qqMusic||"qqMusicSearchAll"===e?(a&&X(e,a,null),e===h.a.musicOriginal.qqMusic?$dispatch(Object(d.bb)(!0)):$dispatch(Object(d.hb)(!0)),T(!1)):e===h.a.musicOriginal.kuGouMusic||"kuGouMusicSearchAll"===e?(a&&X(e,a,null),e===h.a.musicOriginal.kuGouMusic?$dispatch(Object(d.Y)(!0)):$dispatch(Object(d.db)(!0)),J(!1)):e!==h.a.musicOriginal.kuWoMusic&&"kuWoMusicSearchAll"!==e||(a&&X(e,a,null),e===h.a.musicOriginal.kuWoMusic?$dispatch(Object(d.Z)(!0)):$dispatch(Object(d.eb)(!0)),H(!1))},ce=({origin:e,lastSearchResult:a,noMoreNetEaseCloudResults:i,moreNetEaseCloudSearch:s,noMoreQQMusicResults:n,moreQQMusicSearch:c,noMoreKuGouMusicResults:r,moreKuGouMusicSearch:u,noMoreKuWoMusicResults:d,moreKuWoMusicSearch:m})=>l.a.createElement(t.Fragment,null,l.a.createElement("div",{className:"online-music-container"},l.a.createElement("div",{className:"interval-line"}),l.a.createElement("div",{className:"online-music-header"},"QQ音乐"),l.a.createElement(o.a,{musicDataList:a[2].lastQQMusicSearchResult,original:h.a.musicOriginal.qqMusic,pageType:e,searchMusicPage:!0}),l.a.createElement("div",{className:"online-music-more-btn last-one"},!n&&a[2].lastQQMusicSearchResult.length?l.a.createElement("i",{className:`fa fa-search ${c&&"searching-status"}`,"aria-hidden":"true"}):null,c&&!n?l.a.createElement("span",{className:"searching-text"},"正在查询..."):n||!a[2].lastQQMusicSearchResult.length?null:l.a.createElement("span",{className:"more-results-text",onClick:()=>se("onlineMusic"===e?h.a.musicOriginal.qqMusic:"qqMusicSearchAll")},"更多结果"))),l.a.createElement("div",{className:"online-music-container"},l.a.createElement("div",{className:"interval-line first-line"}),l.a.createElement("div",{className:"online-music-header"},"网易云"),l.a.createElement(o.a,{musicDataList:a[3].lastNetEaseCloudSearchResult,original:h.a.musicOriginal.netEaseCloud,pageType:e,noShowMusicPlaying:!0}),l.a.createElement("div",{className:"online-music-more-btn"},!i&&a[3].lastNetEaseCloudSearchResult.length?l.a.createElement("i",{className:`fa fa-search ${s&&"searching-status"}`,"aria-hidden":"true"}):null,s&&!i?l.a.createElement("span",{className:"searching-text"},"正在查询..."):i||!a[3].lastNetEaseCloudSearchResult.length?null:l.a.createElement("span",{className:"more-results-text",onClick:()=>se("onlineMusic"===e?h.a.musicOriginal.netEaseCloud:"netEaseCloudSearchAll")},"更多结果"))),l.a.createElement("div",{className:"online-music-container"},l.a.createElement("div",{className:"interval-line"}),l.a.createElement("div",{className:"online-music-header"},"酷狗音乐"),l.a.createElement(o.a,{musicDataList:a[4].lastKuGouMusicSearchResult,original:h.a.musicOriginal.kuGouMusic,pageType:e,noShowMusicPlaying:!0}),l.a.createElement("div",{className:"online-music-more-btn last-one"},!r&&a[4].lastKuGouMusicSearchResult.length?l.a.createElement("i",{className:`fa fa-search ${u&&"searching-status"}`,"aria-hidden":"true"}):null,u&&!r?l.a.createElement("span",{className:"searching-text"},"正在查询..."):r||!a[4].lastKuGouMusicSearchResult.length?null:l.a.createElement("span",{className:"more-results-text",onClick:()=>se("onlineMusic"===e?h.a.musicOriginal.kuGouMusic:"kuGouMusicSearchAll")},"更多结果"))),l.a.createElement("div",{className:"online-music-container"},l.a.createElement("div",{className:"interval-line"}),l.a.createElement("div",{className:"online-music-header"},"酷我音乐"),l.a.createElement(o.a,{musicDataList:a[5].lastKuWoMusicSearchResult,original:h.a.musicOriginal.kuWoMusic,pageType:e,noShowMusicPlaying:!0}),l.a.createElement("div",{className:"online-music-more-btn last-one"},!d&&a[5].lastKuWoMusicSearchResult.length?l.a.createElement("i",{className:`fa fa-search ${m&&"searching-status"}`,"aria-hidden":"true"}):null,m&&!d?l.a.createElement("span",{className:"searching-text"},"正在查询..."):d||!a[5].lastKuWoMusicSearchResult.length?null:l.a.createElement("span",{className:"more-results-text",onClick:()=>se("onlineMusic"===e?h.a.musicOriginal.kuWoMusic:"kuWoMusicSearchAll")},"更多结果"))));return l.a.createElement("div",{className:"search-component-container"},l.a.createElement(n.a,{centerText:S,backToPreviousPage:()=>Object(m.b)("/search_column",!1)}),l.a.createElement("div",{className:"search-header"},l.a.createElement("div",{className:"search-input"},l.a.createElement(c.a,{value:a,placeholder:v,handleChange:ae,handleKeyDown:e=>{13===e.keyCode&&(logger.info("lastSearchString",a),Y.current.blur(),ie(a))},className:"search-input-content",ref:Y}),l.a.createElement("i",{className:"fa fa-search","aria-hidden":"true"}),a&&l.a.createElement("i",{className:"fa fa-times-circle-o","aria-hidden":"true",onClick:ae}))),l.a.createElement("div",{className:`search-result-container ${"file"===i&&"isFileSearchColumn"}`},L?l.a.createElement("div",{className:"searching"},"正在查询..."):e.length||!a?l.a.createElement("div",{className:"search-result-content"},"file"===i?l.a.createElement(r.a,{fileDataList:e,original:"fileSearch"}):"music"===i?l.a.createElement(o.a,{musicDataList:e,original:h.a.musicOriginal.musicSearch,pageType:"onlySearchShareMusic",searchMusicPage:!0}):"onlineMusic"===i?ce({origin:"onlineMusic",lastSearchResult:e,noMoreNetEaseCloudResults:M,moreNetEaseCloudSearch:Q,noMoreQQMusicResults:j,moreQQMusicSearch:K,noMoreKuGouMusicResults:y,moreKuGouMusicSearch:W,noMoreKuWoMusicResults:E,moreKuWoMusicSearch:G}):"searchAll"===i?l.a.createElement(t.Fragment,null,l.a.createElement("div",{className:"online-music-container"},l.a.createElement("div",{className:"online-music-header"},"文件"),l.a.createElement(r.a,{fileDataList:e[0].lastSearchAllFileResult,original:"fileSearch"}),l.a.createElement("div",{className:"online-music-more-btn last-one",onClick:()=>se("file")},!w&&e[0].lastSearchAllFileResult.length?l.a.createElement("i",{className:`fa fa-search ${B&&"searching-status"}`,"aria-hidden":"true"}):null,B&&!w?l.a.createElement("span",{className:"searching-text"},"正在查询..."):w||!e[0].lastSearchAllFileResult.length?null:l.a.createElement("span",{className:"more-results-text"},"更多结果"))),l.a.createElement("div",{className:"online-music-container"},l.a.createElement("div",{className:"interval-line"}),l.a.createElement("div",{className:"online-music-header"},"音乐"),l.a.createElement(o.a,{musicDataList:e[1].lastSearchAllMusicResult,original:h.a.musicOriginal.musicSearch,pageType:"onlineMusicSearchALl",noShowMusicPlaying:!0}),l.a.createElement("div",{className:"online-music-more-btn last-one",onClick:()=>se("music")},!N&&e[1].lastSearchAllMusicResult.length?l.a.createElement("i",{className:`fa fa-search ${U&&"searching-status"}`,"aria-hidden":"true"}):null,U&&!N?l.a.createElement("span",{className:"searching-text"},"正在查询..."):N||!e[1].lastSearchAllMusicResult.length?null:l.a.createElement("span",{className:"more-results-text"},"更多结果"))),ce({origin:"onlineMusicSearchALl",lastSearchResult:e,noMoreNetEaseCloudResults:$,moreNetEaseCloudSearch:Q,noMoreQQMusicResults:k,moreQQMusicSearch:K,noMoreKuGouMusicResults:R,moreKuGouMusicSearch:W,noMoreKuWoMusicResults:x,moreKuWoMusicSearch:G})):null):I&&l.a.createElement("div",{className:"no-result"},"没有结果")))})},600:function(e,a,i){"use strict";i.r(a);var t=i(0),l=i.n(t),s=i(95),n=i(370);a.default=Object(s.connect)(e=>({fileList:e.fileServer.fileList,lastFileSearchResult:e.fileServer.lastFileSearchResult,lastFileSearchString:e.fileServer.lastFileSearchString}),()=>({}))(({fileList:e,lastFileSearchResult:a,lastFileSearchString:i})=>l.a.createElement(n.a,{fileDatalist:e,navbarText:"搜索文件",placeholder:"搜索",type:"file",self:void 0,lastSearchResult:a,lastSearchString:i}))}}]);