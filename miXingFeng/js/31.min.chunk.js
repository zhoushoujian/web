(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{336:function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(337);t.a=(({centerText:e="",backToPreviousPage:t=(()=>{}),rightText:a="",rightTextFunc:l=(()=>{})})=>i.a.createElement(n.Fragment,null,i.a.createElement(s.a,null),i.a.createElement("div",{className:"navbar-container"},i.a.createElement("div",{className:"back-btn",onClick:t},i.a.createElement("i",{className:"fa fa-angle-left","aria-hidden":"true"})),i.a.createElement("div",{className:"center-text"},e),i.a.createElement("div",{className:"other-text",onClick:l},a))))},337:function(e,t,a){"use strict";var n=a(0),i=a.n(n);t.a=(()=>i.a.createElement("div",{className:"top-status-bar"}))},345:function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};const l=Object(n.forwardRef)((e,t)=>{const{type:a="text",placeholder:n="",value:l="",handleKeyDown:r=(()=>{}),handleChange:o=(()=>{}),maxLength:c=26,style:u={},handleClick:d=(()=>{}),handleBlur:m=(()=>{}),className:f,disabled:p=!1}=e;return i.a.createElement("input",s({},e,{className:`input-component ${f}`,type:a,placeholder:n,value:l,onKeyDown:r,onChange:o,maxLength:c,autoComplete:"off",style:u,onClick:d,onBlur:m,ref:t,disabled:p}))});t.a=l},356:function(e,t,a){"use strict";a(96),a(148),a(319)},357:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(14)),i=f(a(25)),s=f(a(16)),l=f(a(17)),r=f(a(15)),o=f(a(18)),c=f(a(26)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0)),d=f(a(146)),m=f(a(149));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(a[n[i]]=e[n[i]])}return a},h=/^[\u4e00-\u9fa5]{2}$/,b=h.test.bind(h);function v(e){return"string"==typeof e}function g(e){return v(e.type)&&b(e.props.children)?u.cloneElement(e,{},e.props.children.split("").join(" ")):v(e)?(b(e)&&(e=e.split("").join(" ")),u.createElement("span",null,e)):e}var y=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e,t=this.props,a=t.children,s=t.className,l=t.prefixCls,r=t.type,o=t.size,f=t.inline,h=t.disabled,b=t.icon,v=t.loading,y=t.activeStyle,w=t.activeClassName,O=t.onClick,k=p(t,["children","className","prefixCls","type","size","inline","disabled","icon","loading","activeStyle","activeClassName","onClick"]),j=v?"loading":b,E=(0,c.default)(l,s,(e={},(0,i.default)(e,l+"-primary","primary"===r),(0,i.default)(e,l+"-ghost","ghost"===r),(0,i.default)(e,l+"-warning","warning"===r),(0,i.default)(e,l+"-small","small"===o),(0,i.default)(e,l+"-inline",f),(0,i.default)(e,l+"-disabled",h),(0,i.default)(e,l+"-loading",v),(0,i.default)(e,l+"-icon",!!j),e)),x=u.Children.map(a,g),P=void 0;if("string"==typeof j)P=u.createElement(m.default,{"aria-hidden":"true",type:j,size:"small"===o?"xxs":"md",className:l+"-icon"});else if(j){var _=j.props&&j.props.className,C=(0,c.default)("am-icon",l+"-icon","small"===o?"am-icon-xxs":"am-icon-md");P=u.cloneElement(j,{className:_?_+" "+C:C})}return u.createElement(d.default,{activeClassName:w||(y?l+"-active":void 0),disabled:h,activeStyle:y},u.createElement("a",(0,n.default)({role:"button",className:E},k,{onClick:h?void 0:O,"aria-disabled":h}),P,x))}}]),t}(u.Component);y.defaultProps={prefixCls:"am-button",size:"large",inline:!1,disabled:!1,loading:!1,activeStyle:{}},t.default=y,e.exports=t.default},598:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return p});a(356);var n=a(357),i=a.n(n),s=a(0),l=a.n(s),r=a(336),o=a(345),c=a(3),u=a(8),d=a(7),m=a(11),f=a(9);class p extends s.Component{constructor(e){super(e),this.listenBackButton=(()=>{document.addEventListener("backbutton",this.backKeyDownToPrevious,!1)}),this.backKeyDownToPrevious=(()=>{Object(c.c)(this,"/login",{specialBack:!0})}),this.backToMain=(()=>{Object(c.c)(this,"/login")}),this.forgetPasswordKeyDownEvent=(e=>{const t=e,{emailOrMobile:a}=this.state;if(13===t.keyCode){if(!a)return alert("手机号或邮箱不能为空");this.forgetPasswordFunc()}}),this.forgetPasswordFunc=(()=>{const{emailOrMobile:e}=this.state;let t,a;Object(f.e)(e)&&(t=!0),Object(f.j)(e)&&(a=!0);const{tryMobileOrEmailTimes:n=0}=$getState().common;if(n>=3)return alertDialog("您的操作太频繁，请稍后重试");if(!t&&!a)return alert("手机号或邮箱格式不正确");{const i={email:t&&e,mobile:a&&e};i.url=u.a.forgetPassword,$dispatch(Object(d.f)(i)),Object(c.B)(),axios.post(u.a.forgetPassword,i).then(t=>{if(window.toast.hide(),!window.cancelAxiosRequest)return"no_mobile_or_email"===t.response?alert("手机号或邮箱不能为空"):"no_such_email"===t.response?alert("邮箱不存在"):"no_such_mobile"===t.response?alert("手机号不存在"):void("send_email_success"===t.response?(Object(f.S)(n),$dispatch(Object(m.c)("email")),alert("验证码已发送邮箱，请注意查收"),$dispatch(Object(d.u)(e)),$dispatch(Object(m.d)(!0)),logger.info("forgetPassword result.emailToken",t.emailToken),$dispatch(Object(m.b)(t.emailToken)),goRoute(this,"/check_email")):"send_mobile_success"===t.response&&(Object(f.S)(n),$dispatch(Object(m.c)("mobile")),alert("验证码已发送，请注意查收"),$dispatch(Object(d.v)(e)),$dispatch(Object(m.d)(!0)),$dispatch(Object(m.b)(t.token)),goRoute(this,"/check_mobile")))}).catch(e=>(window.toast.hide(),e&&e.result&&e.result.errText&&e.result.errText.includes("Mailbox not found or access denied")?alertDialog("未找到该邮箱地址,请检查邮箱"):Object(c.q)(e,"forgetPassword"))).finally(()=>{window.cancelAxiosRequest=!1})}}),this.updateValue=(e=>{this.setState({emailOrMobile:e.target.value})}),this.emailInput=Object(s.createRef)(),this.state={emailOrMobile:""}}componentDidMount(){this.emailInput.current&&this.emailInput.current.focus(),document.addEventListener("deviceready",this.listenBackButton,!1)}componentWillUnmount(){document.removeEventListener("deviceready",this.listenBackButton),document.removeEventListener("backbutton",this.backKeyDownToPrevious)}render(){const{emailOrMobile:e}=this.state;return l.a.createElement("div",{className:"forget-password-area"},l.a.createElement(r.a,{centerText:"忘记密码",backToPreviousPage:this.backToMain}),l.a.createElement("div",{className:"input-content"},l.a.createElement("div",{className:"content"},l.a.createElement(o.a,{placeholder:"请输入手机号或邮箱",handleKeyDown:this.forgetPasswordKeyDownEvent,handleChange:this.updateValue,ref:this.emailInput,value:e}))),l.a.createElement("div",{className:"reset-password-btn"},l.a.createElement(i.a,{type:"primary",className:"button",value:"提交",onClick:this.forgetPasswordFunc},"提交")))}}}}]);